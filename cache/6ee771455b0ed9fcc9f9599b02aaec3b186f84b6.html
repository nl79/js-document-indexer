undefined<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Data Structures/All Chapters - Wikibooks, open books for an open world</title>
<meta name="generator" content="MediaWiki 1.25wmf19" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="/w/index.php?title=Data_Structures/All_Chapters&amp;action=edit" />
<link rel="edit" title="Edit" href="/w/index.php?title=Data_Structures/All_Chapters&amp;action=edit" />
<link rel="shortcut icon" href="//bits.wikimedia.org/favicon/wikibooks.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikibooks (en)" />
<link rel="EditURI" type="application/rsd+xml" href="//en.wikibooks.org/w/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="/wiki/Data_Structures/All_Chapters" />
<link rel="copyright" href="//creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Wikibooks Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="canonical" href="http://en.wikibooks.org/w/index.php?title=Data_Structures/All_Chapters&amp;amp;action=edit" />
<link rel="stylesheet" href="//bits.wikimedia.org/en.wikibooks.org/load.php?debug=false&amp;lang=en&amp;modules=ext.flaggedRevs.basic%7Cext.gadget.extlinks%2CmySandbox%7Cext.geshi.language.ada%2Cc%2Cjava%2Cpython%7Cext.geshi.local%7Cext.math.styles%7Cext.rtlcite%2Cwikihiero%2CwikimediaBadges%7Cext.uls.nojs%7Cext.visualEditor.viewPageTarget.noscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles%7Cwikibase.client.init%2Cnolanglinks&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="//bits.wikimedia.org/en.wikibooks.org/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: enwikibooks:resourceloader:filter:minify-css:7:4969bf752d40e7c60e4c1bc8e4153549 */</style>
<script src="//bits.wikimedia.org/en.wikibooks.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Data_Structures/All_Chapters","wgTitle":"Data Structures/All Chapters","wgCurRevisionId":2758853,"wgRevisionId":2758853,"wgArticleId":20101,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Data Structures","Pages needing attention","Pages with broken file links"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Data_Structures/All_Chapters","wgRelevantArticleId":20101,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":false,"publish":false},"wgBetaFeaturesFeatures":[],"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr"},"wgPoweredByHHVM":true,"wgULSAcceptLanguageList":[],"wgULSCurrentAutonym":"English","wgFlaggedRevsParams":{"tags":{"value":{"levels":3,"quality":2,"pristine":3}}},"wgStableRevisionId":2758853,"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}","wgNoticeProject":"wikibooks"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});},{},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});},{},{},{});
/* cache key: enwikibooks:resourceloader:filter:minify-js:7:94007ea073e20ad4a3cdce36b2f2e369 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","ext.centralauth.centralautologin","mmv.head","ext.imageMetrics.head","ext.visualEditor.viewPageTarget.init","ext.uls.init","ext.uls.interface","ext.centralNotice.bannerController","skins.vector.js"]);
}</script>
<link rel="dns-prefetch" href="//meta.wikimedia.org" />
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/w/static-1.25wmf19/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Data_Structures_All_Chapters skin-vector action-view">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

							<div id="siteNotice"><!-- CentralNotice --></div>
						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en">Data Structures/All Chapters</h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Wikibooks, open books for an open world</div>
								<div id="contentSub"><span class="subpages">&lt; <a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></span></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div style="text-align:center; margin:1em;">
<p><span style="padding:0.75em;"><a href="/wiki/File:ComputerScienceDataStructuresCoverArt.png" class="image"><img alt="ComputerScienceDataStructuresCoverArt.png" src="//upload.wikimedia.org/wikipedia/commons/2/2b/ComputerScienceDataStructuresCoverArt.png" width="542" height="132" data-file-width="542" data-file-height="132" /></a></span></p>
</div>
<hr />
<p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#The_Node"><span class="tocnumber">1</span> <span class="toctext">The Node</span></a></li>
<li class="toclevel-1"><a href="#Building_a_Chain_from_Nodes"><span class="tocnumber">2</span> <span class="toctext">Building a Chain from Nodes</span></a></li>
<li class="toclevel-1"><a href="#The_Principle_of_Induction"><span class="tocnumber">3</span> <span class="toctext">The Principle of Induction</span></a></li>
<li class="toclevel-1"><a href="#Induction_on_a_Summation"><span class="tocnumber">4</span> <span class="toctext">Induction on a Summation</span></a></li>
<li class="toclevel-1"><a href="#Asymptotic_Notation"><span class="tocnumber">5</span> <span class="toctext">Asymptotic Notation</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction"><span class="tocnumber">5.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#The_O_Notation"><span class="tocnumber">5.2</span> <span class="toctext">The O Notation</span></a>
<ul>
<li class="toclevel-3"><a href="#Definition"><span class="tocnumber">5.2.1</span> <span class="toctext">Definition</span></a></li>
<li class="toclevel-3"><a href="#Theory_Examples"><span class="tocnumber">5.2.2</span> <span class="toctext">Theory Examples</span></a></li>
<li class="toclevel-3"><a href="#Practical_Examples"><span class="tocnumber">5.2.3</span> <span class="toctext">Practical Examples</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Big-Omega_Notation"><span class="tocnumber">5.3</span> <span class="toctext"><i>Big-Omega Notation</i></span></a>
<ul>
<li class="toclevel-3"><a href="#Theta_Notation"><span class="tocnumber">5.3.1</span> <span class="toctext">Theta Notation</span></a></li>
<li class="toclevel-3"><a href="#Little-O_Notation"><span class="tocnumber">5.3.2</span> <span class="toctext">Little-O Notation</span></a></li>
<li class="toclevel-3"><a href="#Little_Omega_Notation"><span class="tocnumber">5.3.3</span> <span class="toctext">Little Omega Notation</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#How_asymptotic_notation_relates_to_analyzing_complexity"><span class="tocnumber">5.4</span> <span class="toctext">How asymptotic notation relates to analyzing complexity</span></a></li>
<li class="toclevel-2"><a href="#A_few_examples_of_asymptotic_notation"><span class="tocnumber">5.5</span> <span class="toctext">A few examples of asymptotic notation</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Arrays"><span class="tocnumber">6</span> <span class="toctext">Arrays</span></a>
<ul>
<li class="toclevel-2"><a href="#Type"><span class="tocnumber">6.1</span> <span class="toctext">Type</span></a></li>
<li class="toclevel-2"><a href="#Bounds"><span class="tocnumber">6.2</span> <span class="toctext">Bounds</span></a></li>
<li class="toclevel-2"><a href="#Bounds_check"><span class="tocnumber">6.3</span> <span class="toctext">Bounds check</span></a></li>
<li class="toclevel-2"><a href="#Declaring_Array_Types"><span class="tocnumber">6.4</span> <span class="toctext">Declaring Array Types</span></a></li>
<li class="toclevel-2"><a href="#Array_Access"><span class="tocnumber">6.5</span> <span class="toctext">Array Access</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#List_Structures_and_Iterators"><span class="tocnumber">7</span> <span class="toctext">List Structures and Iterators</span></a>
<ul>
<li class="toclevel-2"><a href="#Syntactic_Sugar"><span class="tocnumber">7.1</span> <span class="toctext">Syntactic Sugar</span></a></li>
<li class="toclevel-2"><a href="#Implementations"><span class="tocnumber">7.2</span> <span class="toctext">Implementations</span></a>
<ul>
<li class="toclevel-3"><a href="#Singly_Linked_List"><span class="tocnumber">7.2.1</span> <span class="toctext">Singly Linked List</span></a></li>
<li class="toclevel-3"><a href="#Vector"><span class="tocnumber">7.2.2</span> <span class="toctext">Vector</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Bidirectional_Lists"><span class="tocnumber">7.3</span> <span class="toctext">Bidirectional Lists</span></a></li>
<li class="toclevel-2"><a href="#Doubly_Linked_List_Implementation"><span class="tocnumber">7.4</span> <span class="toctext">Doubly Linked List Implementation</span></a></li>
<li class="toclevel-2"><a href="#Vector_Implementation"><span class="tocnumber">7.5</span> <span class="toctext">Vector Implementation</span></a></li>
<li class="toclevel-2"><a href="#Tradeoffs"><span class="tocnumber">7.6</span> <span class="toctext">Tradeoffs</span></a></li>
<li class="toclevel-2"><a href="#Advantages_.2F_Disadvantages"><span class="tocnumber">7.7</span> <span class="toctext">Advantages / Disadvantages</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Stacks_and_Queues"><span class="tocnumber">8</span> <span class="toctext">Stacks and Queues</span></a>
<ul>
<li class="toclevel-2"><a href="#Stacks"><span class="tocnumber">8.1</span> <span class="toctext">Stacks</span></a>
<ul>
<li class="toclevel-3"><a href="#Linked_List_Implementation"><span class="tocnumber">8.1.1</span> <span class="toctext">Linked List Implementation</span></a>
<ul>
<li class="toclevel-4"><a href="#Performance_Analysis"><span class="tocnumber">8.1.1.1</span> <span class="toctext">Performance Analysis</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Applications_of_Stacks"><span class="tocnumber">8.2</span> <span class="toctext">Applications of Stacks</span></a>
<ul>
<li class="toclevel-3"><a href="#Converting_a_decimal_number_into_a_binary_number"><span class="tocnumber">8.2.1</span> <span class="toctext">Converting a decimal number into a binary number</span></a></li>
<li class="toclevel-3"><a href="#Towers_of_Hanoi"><span class="tocnumber">8.2.2</span> <span class="toctext">Towers of Hanoi</span></a>
<ul>
<li class="toclevel-4"><a href="#First_Implementation_.28Without_using_Stacks.29"><span class="tocnumber">8.2.2.1</span> <span class="toctext">First Implementation (Without using Stacks)</span></a></li>
<li class="toclevel-4"><a href="#Second_Implementation_.28Using_Stacks.29"><span class="tocnumber">8.2.2.2</span> <span class="toctext">Second Implementation (Using Stacks)</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Expression_evaluation_and_syntax_parsing"><span class="tocnumber">8.2.3</span> <span class="toctext">Expression evaluation and syntax parsing</span></a>
<ul>
<li class="toclevel-4"><a href="#Evaluation_of_an_Infix_Expression_that_is_Fully_Parenthesized"><span class="tocnumber">8.2.3.1</span> <span class="toctext">Evaluation of an Infix Expression that is Fully Parenthesized</span></a></li>
<li class="toclevel-4"><a href="#Evaluation_of_Infix_Expression_which_is_not_fully_parenthesized"><span class="tocnumber">8.2.3.2</span> <span class="toctext">Evaluation of Infix Expression which is not fully parenthesized</span></a></li>
<li class="toclevel-4"><a href="#Evaluation_of_Prefix_Expression"><span class="tocnumber">8.2.3.3</span> <span class="toctext">Evaluation of Prefix Expression</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Conversion_of_an_Infix_expression_that_is_fully_parenthesized_into_a_Postfix_expression"><span class="tocnumber">8.2.4</span> <span class="toctext">Conversion of an Infix expression that is fully parenthesized into a Postfix expression</span></a></li>
<li class="toclevel-3"><a href="#Rearranging_railroad_cars"><span class="tocnumber">8.2.5</span> <span class="toctext">Rearranging railroad cars</span></a>
<ul>
<li class="toclevel-4"><a href="#Problem_Description"><span class="tocnumber">8.2.5.1</span> <span class="toctext">Problem Description</span></a></li>
<li class="toclevel-4"><a href="#Solution_Strategy"><span class="tocnumber">8.2.5.2</span> <span class="toctext">Solution Strategy</span></a></li>
<li class="toclevel-4"><a href="#A_Three_Track_Example"><span class="tocnumber">8.2.5.3</span> <span class="toctext">A Three Track Example</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Quicksort"><span class="tocnumber">8.2.6</span> <span class="toctext">Quicksort</span></a></li>
<li class="toclevel-3"><a href="#The_Stock_Span_Problem"><span class="tocnumber">8.2.7</span> <span class="toctext">The Stock Span Problem</span></a>
<ul>
<li class="toclevel-4"><a href="#An_algorithm_which_has_Quadratic_Time_Complexity"><span class="tocnumber">8.2.7.1</span> <span class="toctext">An algorithm which has Quadratic Time Complexity</span></a></li>
<li class="toclevel-4"><a href="#An_algorithm_that_has_Linear_Time_Complexity"><span class="tocnumber">8.2.7.2</span> <span class="toctext">An algorithm that has Linear Time Complexity</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Related_Links"><span class="tocnumber">8.3</span> <span class="toctext">Related Links</span></a></li>
<li class="toclevel-2"><a href="#Queues"><span class="tocnumber">8.4</span> <span class="toctext">Queues</span></a>
<ul>
<li class="toclevel-3"><a href="#Linked_List_Implementation_2"><span class="tocnumber">8.4.1</span> <span class="toctext">Linked List Implementation</span></a>
<ul>
<li class="toclevel-4"><a href="#Performance_Analysis_2"><span class="tocnumber">8.4.1.1</span> <span class="toctext">Performance Analysis</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Circular_Array_Implementation"><span class="tocnumber">8.4.2</span> <span class="toctext">Circular Array Implementation</span></a>
<ul>
<li class="toclevel-4"><a href="#Performance_Analysis_3"><span class="tocnumber">8.4.2.1</span> <span class="toctext">Performance Analysis</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Priority_Queue_Implementation"><span class="tocnumber">8.4.3</span> <span class="toctext">Priority Queue Implementation</span></a></li>
<li class="toclevel-3"><a href="#Related_Links_2"><span class="tocnumber">8.4.4</span> <span class="toctext">Related Links</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Deques"><span class="tocnumber">8.5</span> <span class="toctext">Deques</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#References"><span class="tocnumber">9</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1"><a href="#Trees"><span class="tocnumber">10</span> <span class="toctext">Trees</span></a>
<ul>
<li class="toclevel-2"><a href="#Traversal"><span class="tocnumber">10.1</span> <span class="toctext">Traversal</span></a></li>
<li class="toclevel-2"><a href="#Sample_implementations_for_Tree_Traversal"><span class="tocnumber">10.2</span> <span class="toctext">Sample implementations for Tree Traversal</span></a></li>
<li class="toclevel-2"><a href="#Examples_of_Tree_Traversals"><span class="tocnumber">10.3</span> <span class="toctext">Examples of Tree Traversals</span></a></li>
<li class="toclevel-2"><a href="#Balancing"><span class="tocnumber">10.4</span> <span class="toctext">Balancing</span></a></li>
<li class="toclevel-2"><a href="#Binary_Search_Trees"><span class="tocnumber">10.5</span> <span class="toctext">Binary Search Trees</span></a>
<ul>
<li class="toclevel-3"><a href="#Terms"><span class="tocnumber">10.5.1</span> <span class="toctext">Terms</span></a></li>
<li class="toclevel-3"><a href="#Searching_through_a_binary_search_tree"><span class="tocnumber">10.5.2</span> <span class="toctext">Searching through a binary search tree</span></a>
<ul>
<li class="toclevel-4"><a href="#Example"><span class="tocnumber">10.5.2.1</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Adding_an_item_to_a_binary_search_tree"><span class="tocnumber">10.5.3</span> <span class="toctext">Adding an item to a binary search tree</span></a></li>
<li class="toclevel-3"><a href="#Deleting_an_item_from_a_binary_search_tree"><span class="tocnumber">10.5.4</span> <span class="toctext">Deleting an item from a binary search tree</span></a>
<ul>
<li class="toclevel-4"><a href="#Case_1:_The_node_you_want_to_delete_is_a_leaf"><span class="tocnumber">10.5.4.1</span> <span class="toctext">Case 1: The node you want to delete is a leaf</span></a></li>
<li class="toclevel-4"><a href="#Case_2:_The_node_you_want_to_delete_has_one_child"><span class="tocnumber">10.5.4.2</span> <span class="toctext">Case 2: The node you want to delete has one child</span></a></li>
<li class="toclevel-4"><a href="#Case_3:_The_node_you_want_to_delete_has_two_children"><span class="tocnumber">10.5.4.3</span> <span class="toctext">Case 3: The node you want to delete has two children</span></a>
<ul>
<li class="toclevel-5"><a href="#Case_1_of_two-children_case:_The_successor_is_the_right_child_of_the_node_being_deleted"><span class="tocnumber">10.5.4.3.1</span> <span class="toctext">Case 1 of two-children case: The successor is the right child of the node being deleted</span></a></li>
<li class="toclevel-5"><a href="#Case_2_of_two-children_case:_The_successor_isn.27t_the_right_child_of_the_node_being_deleted"><span class="tocnumber">10.5.4.3.2</span> <span class="toctext">Case 2 of two-children case: The successor isn't the right child of the node being deleted</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Example_extract_of_java_code_for_binary_tree_delete_operation"><span class="tocnumber">10.6</span> <span class="toctext">Example extract of java code for binary tree delete operation</span></a></li>
<li class="toclevel-2"><a href="#Red-Black_trees"><span class="tocnumber">10.7</span> <span class="toctext">Red-Black trees</span></a></li>
<li class="toclevel-2"><a href="#B_Trees"><span class="tocnumber">10.8</span> <span class="toctext">B Trees</span></a>
<ul>
<li class="toclevel-3"><a href="#Executive_Summary"><span class="tocnumber">10.8.1</span> <span class="toctext">Executive Summary</span></a></li>
<li class="toclevel-3"><a href="#A_B_tree_java_example"><span class="tocnumber">10.8.2</span> <span class="toctext">A B tree java example</span></a></li>
<li class="toclevel-3"><a href="#A_B.2B_tree_java_example"><span class="tocnumber">10.8.3</span> <span class="toctext">A B+ tree java example</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Treaps"><span class="tocnumber">10.9</span> <span class="toctext">Treaps</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#References_2"><span class="tocnumber">11</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1"><a href="#External_Links"><span class="tocnumber">12</span> <span class="toctext">External Links</span></a></li>
<li class="toclevel-1"><a href="#Compute_the_extreme_value"><span class="tocnumber">13</span> <span class="toctext">Compute the extreme value</span></a></li>
<li class="toclevel-1"><a href="#Removing_the_Extreme_Value"><span class="tocnumber">14</span> <span class="toctext">Removing the Extreme Value</span></a></li>
<li class="toclevel-1"><a href="#Inserting_a_value_into_the_heap"><span class="tocnumber">15</span> <span class="toctext">Inserting a value into the heap</span></a></li>
<li class="toclevel-1"><a href="#TODO"><span class="tocnumber">16</span> <span class="toctext">TODO</span></a></li>
<li class="toclevel-1"><a href="#Applications_of_Priority_Heaps"><span class="tocnumber">17</span> <span class="toctext">Applications of Priority Heaps</span></a></li>
<li class="toclevel-1"><a href="#Graphs"><span class="tocnumber">18</span> <span class="toctext">Graphs</span></a>
<ul>
<li class="toclevel-2"><a href="#Directed_Graphs"><span class="tocnumber">18.1</span> <span class="toctext">Directed Graphs</span></a></li>
<li class="toclevel-2"><a href="#Undirected_Graphs"><span class="tocnumber">18.2</span> <span class="toctext">Undirected Graphs</span></a></li>
<li class="toclevel-2"><a href="#Weighted_Graphs"><span class="tocnumber">18.3</span> <span class="toctext">Weighted Graphs</span></a></li>
<li class="toclevel-2"><a href="#Graph_Representations"><span class="tocnumber">18.4</span> <span class="toctext">Graph Representations</span></a>
<ul>
<li class="toclevel-3"><a href="#Adjacency_Matrix_Representation"><span class="tocnumber">18.4.1</span> <span class="toctext">Adjacency Matrix Representation</span></a></li>
<li class="toclevel-3"><a href="#Adjacency_List_Representation"><span class="tocnumber">18.4.2</span> <span class="toctext">Adjacency List Representation</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Graph_Traversals"><span class="tocnumber">18.5</span> <span class="toctext">Graph Traversals</span></a>
<ul>
<li class="toclevel-3"><a href="#Depth-First_Search"><span class="tocnumber">18.5.1</span> <span class="toctext">Depth-First Search</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Hash_Tables"><span class="tocnumber">19</span> <span class="toctext">Hash Tables</span></a>
<ul>
<li class="toclevel-2"><a href="#Time_complexity_and_common_uses_of_hash_tables"><span class="tocnumber">19.1</span> <span class="toctext">Time complexity and common uses of hash tables</span></a></li>
<li class="toclevel-2"><a href="#Choosing_a_good_hash_function"><span class="tocnumber">19.2</span> <span class="toctext">Choosing a good hash function</span></a></li>
<li class="toclevel-2"><a href="#Collision_resolution"><span class="tocnumber">19.3</span> <span class="toctext">Collision resolution</span></a>
<ul>
<li class="toclevel-3"><a href="#Chaining"><span class="tocnumber">19.3.1</span> <span class="toctext">Chaining</span></a></li>
<li class="toclevel-3"><a href="#Open_addressing"><span class="tocnumber">19.3.2</span> <span class="toctext">Open addressing</span></a>
<ul>
<li class="toclevel-4"><a href="#Example_pseudocode"><span class="tocnumber">19.3.2.1</span> <span class="toctext">Example pseudocode</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Open_addressing_versus_chaining"><span class="tocnumber">19.3.3</span> <span class="toctext">Open addressing versus chaining</span></a></li>
<li class="toclevel-3"><a href="#Coalesced_hashing"><span class="tocnumber">19.3.4</span> <span class="toctext">Coalesced hashing</span></a></li>
<li class="toclevel-3"><a href="#Perfect_hashing"><span class="tocnumber">19.3.5</span> <span class="toctext">Perfect hashing</span></a></li>
<li class="toclevel-3"><a href="#Probabilistic_hashing"><span class="tocnumber">19.3.6</span> <span class="toctext">Probabilistic hashing</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Table_resizing"><span class="tocnumber">19.4</span> <span class="toctext">Table resizing</span></a></li>
<li class="toclevel-2"><a href="#Ordered_retrieval_issue"><span class="tocnumber">19.5</span> <span class="toctext">Ordered retrieval issue</span></a></li>
<li class="toclevel-2"><a href="#Problems_with_hash_tables"><span class="tocnumber">19.6</span> <span class="toctext">Problems with hash tables</span></a></li>
<li class="toclevel-2"><a href="#Other_hash_table_algorithms"><span class="tocnumber">19.7</span> <span class="toctext">Other hash table algorithms</span></a>
<ul>
<li class="toclevel-3"><a href="#A_simple_inference_on_file_storage_mapping_of_linear_hashing_and_extendible_hashing"><span class="tocnumber">19.7.1</span> <span class="toctext">A simple inference on file storage mapping of linear hashing and extendible hashing</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Implementations_2"><span class="tocnumber">19.8</span> <span class="toctext">Implementations</span></a>
<ul>
<li class="toclevel-3"><a href="#A_python_implementation_of_extendible_hashing"><span class="tocnumber">19.8.1</span> <span class="toctext">A python implementation of extendible hashing</span></a></li>
<li class="toclevel-3"><a href="#A_Java_implementation_of_extendible_hashing"><span class="tocnumber">19.8.2</span> <span class="toctext">A Java implementation of extendible hashing</span></a></li>
<li class="toclevel-3"><a href="#A_Java_implementation_of_linear_hashing"><span class="tocnumber">19.8.3</span> <span class="toctext">A Java implementation of linear hashing</span></a>
<ul>
<li class="toclevel-4"><a href="#debugging_to_achieve_functionality"><span class="tocnumber">19.8.3.1</span> <span class="toctext">debugging to achieve functionality</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#List_implementation"><span class="tocnumber">20</span> <span class="toctext">List implementation</span></a></li>
<li class="toclevel-1"><a href="#Bit_array_implementation"><span class="tocnumber">21</span> <span class="toctext">Bit array implementation</span></a></li>
<li class="toclevel-1"><a href="#Associative_array_implementation"><span class="tocnumber">22</span> <span class="toctext">Associative array implementation</span></a></li>
<li class="toclevel-1 tocsection-1"><a href="#References_3"><span class="tocnumber">23</span> <span class="toctext">References</span></a></li>
</ul>
</div>
<p></p>
<center><small>This page shall be included in any copy of the Data Structures book.</small></center>
<table class="plainlinks imbox imbox-license licensetpl" style="">
<tr>
<td class="mbox-image"><a href="/wiki/File:CC_some_rights_reserved.svg" class="image" title="CC"><img alt="CC" src="//upload.wikimedia.org/wikipedia/commons/thumb/7/79/CC_some_rights_reserved.svg/90px-CC_some_rights_reserved.svg.png" width="90" height="36" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/7/79/CC_some_rights_reserved.svg/135px-CC_some_rights_reserved.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/7/79/CC_some_rights_reserved.svg/180px-CC_some_rights_reserved.svg.png 2x" data-file-width="744" data-file-height="300" /></a><br />
<a href="/wiki/File:Cc-by_new_white.svg" class="image" title="BY"><img alt="BY" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/11/Cc-by_new_white.svg/24px-Cc-by_new_white.svg.png" width="24" height="24" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/11/Cc-by_new_white.svg/36px-Cc-by_new_white.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/11/Cc-by_new_white.svg/48px-Cc-by_new_white.svg.png 2x" data-file-width="64" data-file-height="64" /></a><a href="/wiki/File:Cc-sa_white.svg" class="image" title="&#160;SA"><img alt="&#160;SA" src="//upload.wikimedia.org/wikipedia/commons/thumb/d/df/Cc-sa_white.svg/24px-Cc-sa_white.svg.png" width="24" height="24" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/d/df/Cc-sa_white.svg/36px-Cc-sa_white.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/d/df/Cc-sa_white.svg/48px-Cc-sa_white.svg.png 2x" data-file-width="64" data-file-height="64" /></a></td>
<td class="mbox-text" style="">This work is licensed under the <a href="//en.wikipedia.org/wiki/Creative_Commons" class="extiw" title="w:Creative Commons">Creative&#160;Commons</a> <a rel="nofollow" class="external text" href="http://creativecommons.org/licenses/by-sa/3.0/">Attribution-Share Alike 3.0 Unported</a> license. In short: you are free to share and to make derivatives of this work under the conditions that you appropriately attribute it, and that you only distribute it under the same, similar or a <a rel="nofollow" class="external text" href="http://creativecommons.org/compatiblelicenses">compatible</a> license. Any of the above conditions can be waived if you get permission from the copyright holder.</td>
</tr>
</table>
<center><small>Any source code included if not bearing a different statement shall be considered under the public domain.</small></center>
<center><small>Images used have their own copyright status, specified in their respective repositories (en.wikibooks.org or at commons.wikimedia.org).</small></center>
<p>Acknowledgment is given for using some contents from <a href="//en.wikipedia.org/wiki/" class="extiw" title="w:">Wikipedia</a>.</p>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<p>Computers can store and process vast amounts of data. Formal data structures enable a programmer to mentally structure large amounts of data into conceptually manageable relationships.</p>
<p>Sometimes we use data structures to allow us to do more: for example, to accomplish fast searching or sorting of data. Other times, we use data structures so that we can do <i>less</i>: for example, the concept of the stack is a limited form of a more general data structure. These limitations provide us with guarantees that allow us to reason about our programs more easily. Data structures also provide guarantees about algorithmic complexity â€” choosing an appropriate data structure for a job is crucial for writing good software.</p>
<p>Because data structures are higher-level abstractions, they present to us operations on groups of data, such as adding an item to a list, or looking up the highest-priority item in a queue. When a data structure provides operations, we can call the data structure an <b>abstract data type</b> (sometimes abbreviated as ADT). Abstract data types can minimize dependencies in your code, which is important when your code needs to be changed. Because you are abstracted away from lower-level details, some of the higher-level commonalities one data structure shares with a different data structure can be used to replace one with the other.</p>
<p>Our programming languages come equipped with a set of built-in types, such as integers and floating-point numbers, that allow us to work with data objects for which the machine's processor has native support. These built-in types are abstractions of what the processor actually provides because built-in types hide details both about their execution and limitations.</p>
<p>For example, when we use a floating-point number we are primarily concerned with its value and the operations that can be applied to it. Consider computing the length of a hypotenuse:</p>
<pre>
  let <i>c</i> := sqrt(<i>a</i> * <i>a</i> + <i>b</i> * <i>b</i>)
</pre>
<p>The machine code generated from the above would use common patterns for computing these values and accumulating the result. In fact, these patterns are so repetitious that high-level languages were created to avoid this redundancy and to allow programmers to think about <i>what</i> value was computed instead of <i>how</i> it was computed.</p>
<p>Two useful and related concepts are at play here:</p>
<ul>
<li><b>Encapsulation</b> is when common patterns are grouped together under a single name and then parameterized, in order to achieve a higher-level understanding of that pattern. For example, the multiplication operation requires two source values and writes the product of those two values to a given destination. The operation is parameterized by both the two sources and the single destination.</li>
<li><b>Abstraction</b> is a mechanism to hide the implementation details of an abstraction away from the users of the abstraction. When we multiply numbers, for example, we don't need to know the technique actually used by the processor, we just need to know its properties.</li>
</ul>
<p>A programming language is both an abstraction of a machine and a tool to encapsulate-away the machine's inner details. For example, a program written in a programming language can be compiled to several different machine architectures when that programming language sufficiently encapsulates the user away from any one machine.</p>
<p>In this book, we take the abstraction and encapsulation that our programming languages provide a step further: When applications get to be more complex, the abstractions of programming languages become too low-level to effectively manage. Thus, we build our own abstractions on top of these lower-level constructs. We can even build further abstractions on top of those abstractions. Each time we build upwards, we lose access to the lower-level implementation details. While losing such access might sound like a bad trade off, it is actually quite a bargain: We are primarily concerned with solving the problem at hand rather than with any trivial decisions that could have just as arbitrarily been replaced with a different decision. When we can think on higher levels, we relieve ourselves of these burdens.</p>
<p>Each data structure that we cover in this book can be thought of as a single unit that has a set of values and a set of operations that can be performed to either access or change these values. The data structure itself can be understood as a set of the data structure's operations together with each operation's properties (i.e., what the operation does and how long we could expect it to take).</p>
<h3><span class="mw-headline" id="The_Node">The Node</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Introduction&amp;action=edit&amp;section=T-1" title="Data Structures/Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The first data structure we look at is the node structure. A node is simply a container for a value, plus a pointer to a "next" node (which may be <code>null</code>).</p>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 8px; width:85%" title="Node&lt;Element&gt; Operations">
<p><b>Node&lt;Element&gt; Operations</b><br /></p>
<p><tt><b>make-node</b>(Element <i>v</i>, Node <i>next</i>): Node</tt></p>
<dl>
<dd>Create a new node, with <i>v</i> as its contained value and <i>next</i> as the value of the next pointer</dd>
</dl>
<p><tt><b>get-value</b>(Node <i>n</i>): Element</tt></p>
<dl>
<dd>Returns the value contained in node <i>n</i></dd>
</dl>
<p><tt><b>get-next</b>(Node <i>n</i>): Node</tt></p>
<dl>
<dd>Returns the value of node <i>n</i>'s next pointer</dd>
</dl>
<p><tt><b>set-value</b>(Node <i>n</i>, Element <i>v</i>)</tt></p>
<dl>
<dd>Sets the contained value of <i>n</i> to be <i>v</i></dd>
</dl>
<p><tt><b>set-next</b>(Node <i>n</i>, Node <i>new-next</i>): Node</tt></p>
<dl>
<dd>Sets the value of node <i>n</i>'s next pointer to be <i>new-next</i></dd>
</dl>
<p>All operations can be performed in time that is <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" />.</p>
<p>Examples of the "Element" type can be: numbers, strings, objects, functions, or even other nodes. Essentially, any type that has values at all in the language.</p>
</div>
<p>The above is an abstraction of a <i>structure</i>:</p>
<pre>
  structure <b>node</b> {
    element value     <i>// holds the value</i>
    node next         <i>// pointer to the next node; possibly null</i>
  }
</pre>
<p>In some languages, structures are called <i>records</i> or <i>classes</i>. Some other languages provide no direct support for structures, but instead allow them to be built from other constructs (such as <i>tuples</i> or <i>lists</i>).</p>
<p>Here, we are only concerned that nodes contain values of some form, so we simply say its type is "element" because the type is not important. In some programming languages no type ever needs to be specified (as in dynamically typed languages, like Scheme, Smalltalk or Python). In other languages the type might need to be restricted to integer or string (as in statically typed languages like C). In still other languages, the decision of the type of the contained element can be delayed until the type is actually used (as in languages that support generic types, like C++ and Java). In any of these cases, translating the pseudocode into your own language should be relatively simple.</p>
<p>Each of the node operations specified can be implemented quite easily:</p>
<pre>
<i>// Create a new node, with v as its contained value and next as</i>
// the value of the next pointer
function <b>make-node</b>(<i>v</i>, node <i>next</i>): node
  let <i>result</i> := new node {<i>v</i>, <i>next</i>}
  return <i>result</i>
end

<i>// Returns the value contained in node n</i>
function <b>get-value</b>(node <i>n</i>): element
  return <i>n</i>.value
end

<i>// Returns the value of node n's next pointer</i>
function <b>get-next</b>(node <i>n</i>): node
  return <i>n</i>.next
end

<i>// Sets the contained value of n to be v</i>
function <b>set-value</b>(node <i>n</i>, <i>v</i>)
  <i>n</i>.value := <i>v</i>
end

<i>// Sets the value of node n's next pointer to be new-next</i>
function <b>set-next</b>(node <i>n</i>, <i>new-next</i>)
  <i>n</i>.next := <i>new-next</i>
  return <i>new-next</i>
end
</pre>
<p>Principally, we are more concerned with the operations and the implementation strategy than we are with the structure itself and the low-level implementation. For example, we are more concerned about the time requirement specified, which states that all operations take time that is <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" />. The above implementation meets this criteria, because the length of time each operation takes is constant. Another way to think of constant time operations is to think of them as operations whose analysis is not dependent on any variable. (The notation <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> is mathematically defined in the next chapter. For now, it is safe to assume it just means constant time.)</p>
<p>Because a node is just a container both for a value and container to a pointer to another node, it shouldn't be surprising how trivial the node data structure itself (and its implementation) is.</p>
<h3><span class="mw-headline" id="Building_a_Chain_from_Nodes">Building a Chain from Nodes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Introduction&amp;action=edit&amp;section=T-2" title="Data Structures/Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Although the node structure is simple, it actually allows us to compute things that we couldn't have computed with just fixed-size integers alone.</p>
<p>But first, we'll look at a program that doesn't need to use nodes. The following program will read in (from an input stream; which can either be from the user or a file) a series of numbers until the end-of-file is reached and then output what the largest number is and the average of all numbers:</p>
<pre>
program(input-stream <i>in</i>, output-stream <i>out</i>)
  let <i>total</i> := 0
  let <i>count</i> := 0
  let <i>largest</i> := <img class="mwe-math-fallback-image-inline tex" alt="-\infty" src="//upload.wikimedia.org/math/b/e/a/beab416080922c84a90ba092f7734fe5.png" />
  
  while has-next-integer(<i>in</i>):
    let <i>i</i> := read-integer(<i>in</i>)
    <i>total</i> := <i>total</i> + <i>i</i>
    <i>count</i> := <i>count</i> + 1
    <i>largest</i> := max(<i>largest</i>, <i>i</i>)
  repeat
   
  println <i>out</i> "Maximum: " <i>largest</i>
  
  if <i>count</i> != 0:
    println <i>out</i> "Average: " (<i>total</i> / <i>count</i>)
  fi
end
</pre>
<p>But now consider solving a similar task: read in a series of numbers until the end-of-file is reached, and output the largest number and the average of all numbers that evenly divide the largest number. This problem is different because it's possible the largest number will be the last one entered: if we are to compute the average of all numbers that divide that number, we'll need to somehow remember all of them. We could use variables to remember the previous numbers, but variables would only help us solve the problem when there aren't too many numbers entered.</p>
<p>For example, suppose we were to give ourselves 200 variables to hold the state input by the user. And further suppose that each of the 200 variables had 64-bits. Even if we were very clever with our program, it could only compute results for <img class="mwe-math-fallback-image-inline tex" alt="2^{64\cdot 200}" src="//upload.wikimedia.org/math/1/2/9/1290f404db5a752233fcc6be50ff58a4.png" /> different types of input. While this is a very large number of combinations, a list of 300 64-bit numbers would require even more combinations to be properly encoded. (In general, the problem is said to require <i>linear space</i>. All programs that need only a finite number of variables can be solved in <i>constant space</i>.)</p>
<p>Instead of building-in limitations that complicate coding (such as having only a constant number of variables), we can use the properties of the node abstraction to allow us to remember as many numbers as our computer can hold:</p>
<pre>
program(input-stream <i>in</i>, output-stream <i>out</i>)
  let <i>largest</i> := <img class="mwe-math-fallback-image-inline tex" alt="-\infty" src="//upload.wikimedia.org/math/b/e/a/beab416080922c84a90ba092f7734fe5.png" />
  let <i>nodes</i> := null
  
  while has-next-integer(<i>in</i>):
    let <i>i</i> := read-integer(<i>in</i>)
    <i>nodes</i> := <b>make-node</b>(<i>i</i>, <i>nodes</i>) <i>// contain the value i,</i>
                                 <i>// and remember the previous numbers too</i>
    <i>largest</i> := max(<i>largest</i>, <i>i</i>)
  repeat
  println <i>out</i> "Maximum: " <i>largest</i>

  <i>// now compute the averages of all factors of largest</i>
  let <i>total</i> := 0
  let <i>count</i> := 0
  while <i>nodes</i> != null:
    let <i>j</i> := <b>get-value</b>(<i>nodes</i>)
    if <i>j</i> divides <i>largest</i>:
      <i>total</i> := <i>total</i> + <i>j</i>
      <i>count</i> := <i>count</i> + 1
    fi
    <i>nodes</i> := <b>get-next</b>(<i>nodes</i>)
  repeat
  if <i>count</i> != 0:
    println <i>out</i> "Average: " (<i>total</i> / <i>count</i>)
  fi
end
</pre>
<p>Above, if <i>n</i> integers are successfully read there will be <i>n</i> calls made to <b>make-node</b>. This will require <i>n</i> nodes to be made (which require enough space to hold the <i>value</i> and <i>next</i> fields of each node, plus internal memory management overhead), so the memory requirements will be on the order of <img class="mwe-math-fallback-image-inline tex" alt="O(n)" src="//upload.wikimedia.org/math/7/b/a/7ba55e7c64a9405a0b39a1107e90ca94.png" />. Similarly, we construct this chain of nodes and then iterate over the chain again, which will require <img class="mwe-math-fallback-image-inline tex" alt="O(n)" src="//upload.wikimedia.org/math/7/b/a/7ba55e7c64a9405a0b39a1107e90ca94.png" /> steps to make the chain, and then another <img class="mwe-math-fallback-image-inline tex" alt="O(n)" src="//upload.wikimedia.org/math/7/b/a/7ba55e7c64a9405a0b39a1107e90ca94.png" /> steps to iterate over it.</p>
<p>Note that when we iterate the numbers in the chain, we are actually looking at them in reverse order. For example, assume the numbers input to our program are 4, 7, 6, 30, and 15. After EOF is reached, the <i>nodes</i> chain will look like this:</p>
<center><a href="/wiki/File:DataStructuresLinkedListofN.png" class="image"><img alt="DataStructuresLinkedListofN.png" src="//upload.wikimedia.org/wikibooks/en/d/d6/DataStructuresLinkedListofN.png" width="455" height="117" data-file-width="455" data-file-height="117" /></a></center>
<p>Such chains are more commonly referred to as <i>linked-lists</i>. However, we generally prefer to think in terms of <i>lists</i> or <i>sequences</i>, which aren't as low-level: the linking concept is just an implementation detail. While a list can be made with a chain, in this book we cover several other ways to make a list. For the moment, we care more about the abstraction capabilities of the node than we do about one of the ways it is used.</p>
<p>The above algorithm only uses the make-node, get-value, and get-next functions. If we use set-next we can change the algorithm to generate the chain so that it keeps the original ordering (instead of reversing it).</p>
<div style="clear: both"></div>
<table style="background: #ffd; border: 1px solid #aaaaaa; padding: 6pt; margin: 12pt 8%; width: 60%; margin: auto;" class="notice noprint notice-todo">
<tr>
<td style="width: 58px;">
<div class="floatleft"><img alt="Clipboard" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/45px-Clipboard.svg.png" width="45" height="45" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/68px-Clipboard.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/90px-Clipboard.svg.png 2x" data-file-width="48" data-file-height="48" /></div>
</td>
<td>
<p><b>To do:</b><br />
pseudocode to do so; also TODO; should probably think of compelling, but not too-advanced, use of set-value.</p>
</td>
</tr>
</table>
<div style="clear: both"></div>
<pre>
program (input-stream <i>in</i>, output-stream <i>out</i>)
  let <i>largest</i> := <img class="mwe-math-fallback-image-inline tex" alt="-\infty" src="//upload.wikimedia.org/math/b/e/a/beab416080922c84a90ba092f7734fe5.png" />
  let <i>nodes</i> := null
  let <i>tail_node</i> := null
  
  while has-next-integer (<i>in</i>):
    let <i>i</i> := read-integer (<i>in</i>)
    if (<i>nodes</i> == null)
      <i>nodes</i> := <b>make-node</b>(<i>i</i>, null) <i>// construct first node in the list</i>
      <i>tail_node</i> := <i>nodes</i> <i>//there is one node in the list=&gt; first and last are the same</i>
    else
      <i>tail_node</i> := <b>set-next</b> (<i>tail_node</i>, <b>make-node</b> (<i>i</i>, null)) <i>// append new node to the end of the list</i>
    <i>largest</i> := max(<i>largest</i>, <i>i</i>)
  repeat
  println <i>out</i> "Maximum: " <i>largest</i>

  <i>// now compute the averages of all factors of largest</i>
  let <i>total</i> := 0
  let <i>count</i> := 0
  while <i>nodes</i> != null:
    let <i>j</i> := <b>get-value</b>(<i>nodes</i>)
    if <i>j</i> divides <i>largest</i>:
      <i>total</i> := <i>total</i> + <i>j</i>
      <i>count</i> := <i>count</i> + 1
    fi
    <i>nodes</i> := <b>get-next</b>(<i>nodes</i>)
  repeat
  if <i>count</i> != 0:
    println <i>out</i> "Average: " (<i>total</i> / <i>count</i>)
  fi
end
</pre>
<h3><span class="mw-headline" id="The_Principle_of_Induction">The Principle of Induction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Introduction&amp;action=edit&amp;section=T-3" title="Data Structures/Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The chains we can build from nodes are a demonstration of the principle of mathematical induction:</p>
<table width="80%">
<tr>
<td style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em;" valign="top"><b>Mathematical Induction</b><br />
<ol>
<li>Suppose you have some property of numbers <img class="mwe-math-fallback-image-inline tex" alt="P(n)" src="//upload.wikimedia.org/math/8/1/a/81ae00dae536d425ed9f277d678f9f3c.png" /></li>
<li>If you can prove that when <img class="mwe-math-fallback-image-inline tex" alt="P(n)" src="//upload.wikimedia.org/math/8/1/a/81ae00dae536d425ed9f277d678f9f3c.png" /> holds that <img class="mwe-math-fallback-image-inline tex" alt="P(n+1)" src="//upload.wikimedia.org/math/d/9/f/d9f259a973d4ed34fb181011e34da3b9.png" /> must also hold, then</li>
<li>All you need to do is prove that <img class="mwe-math-fallback-image-inline tex" alt="P(1)" src="//upload.wikimedia.org/math/2/6/d/26d4e0bfb74c9e35e3da2bd2c88b8235.png" /> holds to show that <img class="mwe-math-fallback-image-inline tex" alt="P(n)" src="//upload.wikimedia.org/math/8/1/a/81ae00dae536d425ed9f277d678f9f3c.png" /> holds for all natural <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /></li>
</ol>
</td>
</tr>
</table>
<p>For example, let the property <img class="mwe-math-fallback-image-inline tex" alt="P(n)" src="//upload.wikimedia.org/math/8/1/a/81ae00dae536d425ed9f277d678f9f3c.png" /> be the statement that "you can make a chain that holds <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> numbers". This is a property of natural numbers, because the sentence makes sense for specific values of <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" />:</p>
<ul>
<li>you can make a chain that holds 5 numbers</li>
<li>you can make a chain that holds 100 numbers</li>
<li>you can make a chain that holds 1,000,000 numbers</li>
</ul>
<p>Instead of proving that we can make chains of length 5, 100, and one million, we'd rather prove the general statement <img class="mwe-math-fallback-image-inline tex" alt="P(n)" src="//upload.wikimedia.org/math/8/1/a/81ae00dae536d425ed9f277d678f9f3c.png" /> instead. Step 2 above is called the <b>Inductive Hypothesis</b>; let's show that we can prove it:</p>
<ul>
<li>Assume that <img class="mwe-math-fallback-image-inline tex" alt="P(n)" src="//upload.wikimedia.org/math/8/1/a/81ae00dae536d425ed9f277d678f9f3c.png" /> holds. That is, that we can make a chain of <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> elements. Now we must show that <img class="mwe-math-fallback-image-inline tex" alt="P(n+1)" src="//upload.wikimedia.org/math/d/9/f/d9f259a973d4ed34fb181011e34da3b9.png" /> holds.</li>
<li>Assume <code><i>chain</i></code> is the first node of the <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" />-element chain. Assume <code><i>i</i></code> is some number that we'd like to add to the chain to make an <img class="mwe-math-fallback-image-inline tex" alt="n+1" src="//upload.wikimedia.org/math/4/0/b/40b85027598d87611b1c8d5d11e46812.png" /> length chain.</li>
<li>The following code can accomplish this for us:</li>
</ul>
<pre>
let <i>bigger-chain</i> := <b>make-node</b>(<i>i</i>, <i>chain</i>)
</pre>
<ul>
<li>Here, we have the new number <code><i>i</i></code> that is now the contained value of the first link of the <code><i>bigger-chain</i></code>. If <code><i>chain</i></code> had <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> elements, then <code><i>bigger-chain</i></code> must have <img class="mwe-math-fallback-image-inline tex" alt="n+1" src="//upload.wikimedia.org/math/4/0/b/40b85027598d87611b1c8d5d11e46812.png" /> elements.</li>
</ul>
<p>Step 3 above is called the <b>Base Case</b>, let's show that we can prove it:</p>
<ul>
<li>We must show that <img class="mwe-math-fallback-image-inline tex" alt="P(1)" src="//upload.wikimedia.org/math/2/6/d/26d4e0bfb74c9e35e3da2bd2c88b8235.png" /> holds. That is, that we can make a chain of one element.</li>
<li>The following code can accomplish this for us:</li>
</ul>
<pre>
let <i>chain</i> := <b>make-node</b>(<i>i</i>, null)
</pre>
<p>The principle of induction says, then, that we have proven that we can make a chain of <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> elements for all value of <img class="mwe-math-fallback-image-inline tex" alt="n\ge 1" src="//upload.wikimedia.org/math/f/e/3/fe37f48a6bb040c06c5e7ccaac63bc66.png" />. How is this so? Probably the best way to think of induction is that it's actually a way of creating a formula to describe an infinite number of proofs. After we prove that the statement is true for <img class="mwe-math-fallback-image-inline tex" alt="P(1)" src="//upload.wikimedia.org/math/2/6/d/26d4e0bfb74c9e35e3da2bd2c88b8235.png" />, the base case, we can apply the inductive hypothesis to that fact to show that <img class="mwe-math-fallback-image-inline tex" alt="P(2)" src="//upload.wikimedia.org/math/f/3/2/f32a7ad52c42fc33f66908de508010b6.png" /> holds. Since we now know that <img class="mwe-math-fallback-image-inline tex" alt="P(2)" src="//upload.wikimedia.org/math/f/3/2/f32a7ad52c42fc33f66908de508010b6.png" /> holds, we can apply the inductive hypothesis again to show that <img class="mwe-math-fallback-image-inline tex" alt="P(3)" src="//upload.wikimedia.org/math/4/7/7/477587847940b260791246d61d3923fd.png" /> must hold. The principle says that there is nothing to stop us from doing this repeatedly, so we should assume it holds for all cases.</p>
<p>Induction may sound like a strange way to prove things, but it's a very useful technique. What makes the technique so useful is that it can take a hard sounding statement like "prove <img class="mwe-math-fallback-image-inline tex" alt="P(n)" src="//upload.wikimedia.org/math/8/1/a/81ae00dae536d425ed9f277d678f9f3c.png" /> holds for all <img class="mwe-math-fallback-image-inline tex" alt="n\ge 1" src="//upload.wikimedia.org/math/f/e/3/fe37f48a6bb040c06c5e7ccaac63bc66.png" />" and break it into two smaller, easier to prove statements. Typically base cases are easy to prove because they are not general statements at all. Most of the proof work is usually in the inductive hypothesis, which can often require clever ways of reformulating the statement to "attach on" a proof of the <img class="mwe-math-fallback-image-inline tex" alt="n+1" src="//upload.wikimedia.org/math/4/0/b/40b85027598d87611b1c8d5d11e46812.png" /> case.</p>
<p>You can think of the contained value of a node as a base case, while the next pointer of the node as the inductive hypothesis. Just as in mathematical induction, we can break the hard problem of storing an arbitrary number of elements into an easier problem of just storing one element and then having a mechanism to attach on further elements.</p>
<h3><span class="mw-headline" id="Induction_on_a_Summation">Induction on a Summation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Introduction&amp;action=edit&amp;section=T-4" title="Data Structures/Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The next example of induction we consider is more algebraic in nature:</p>
<p>Let's say we are given the formula <img class="mwe-math-fallback-image-inline tex" alt="\frac{(n)(n+1)}{2}" src="//upload.wikimedia.org/math/6/7/0/670496f5340562a3b40addeeb672e0e8.png" /> and we want to prove that this formula gives us the sum of the first <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> numbers. As a first attempt, we might try to just show that this is true for 1</p>
<dl>
<dd><img class="mwe-math-fallback-image-inline tex" alt="\frac{(1)(1+1)}{2} = 1 = 1" src="//upload.wikimedia.org/math/7/e/2/7e225b2c5422c3524168ff012e6a82f0.png" />,</dd>
</dl>
<p>for 2</p>
<dl>
<dd><img class="mwe-math-fallback-image-inline tex" alt="\frac{(2)(2+1)}{2} = 3 = 1 + 2" src="//upload.wikimedia.org/math/d/3/a/d3affa47cd8fa2c741f52d21d4ec6140.png" />,</dd>
</dl>
<p>for 3</p>
<dl>
<dd><img class="mwe-math-fallback-image-inline tex" alt="\frac{(3)(3+1)}{2} = 6 = 1 + 2 + 3" src="//upload.wikimedia.org/math/b/5/4/b543cc4383418e21198b0c5ce970a36f.png" /></dd>
</dl>
<p>and so on, however we'd quickly realize that our so called proof would take infinitely long to write out! Even if you carried out this proof and showed it to be true for the first billion numbers, that doesn't nescessarily mean that it would be true for one billion and one or even a hundred billion. This is a strong hint that maybe induction would be useful here.</p>
<p>Let's say we want to prove that the given formula really does give the sum of the first n numbers using induction. The first step is to prove the base case; i.e. we have to show that it is true when n = 1. This is relatively easy; we just substitute 1 for the variable n and we get (<img class="mwe-math-fallback-image-inline tex" alt="\frac{(1)(1+1)}{2} = 1" src="//upload.wikimedia.org/math/c/c/a/cca982654e819b5d3c437c69cbab0976.png" />), which shows that the formula is correct when n = 1.</p>
<p>Now for the inductive step. We have to show that if the formula is true for j, it is also true for j + 1. To phrase it another way, assuming we've already proven that the sum from 1 to (j) is <img class="mwe-math-fallback-image-inline tex" alt="\frac{((j))((j)+1)}{2}" src="//upload.wikimedia.org/math/d/7/c/d7ccc252f4758a7205e94a3aaca1a905.png" />, we want to prove that the sum from 1 to (j+1) is <img class="mwe-math-fallback-image-inline tex" alt="\frac{((j+1))((j+1)+1)}{2}" src="//upload.wikimedia.org/math/c/2/2/c22267ca0699b942fcd7c98daa4db26a.png" />. Note that those two formulas came about just by replacing n with (j) and (j+1) respectively.</p>
<p>To prove this inductive step, first note that to calculate the sum from 1 to j+1, you can just calculate the sum from 1 to j, then add j+1 to it. We already have a formula for the sum from 1 to j, and when we add j+1 to that formula, we get this new formula: <img class="mwe-math-fallback-image-inline tex" alt="\frac{((j))((j)+1)}{2}+(j+1)" src="//upload.wikimedia.org/math/1/2/c/12ccbcb5e26468af11fbf55d4945ecdc.png" />. So to actually complete the proof, all we'd need to do is show that <img class="mwe-math-fallback-image-inline tex" alt="\frac{((j))((j)+1)}{2}+(j+1) = \frac{((j+1))((j+1)+1)}{2}" src="//upload.wikimedia.org/math/f/e/f/fef84fc327b13a111394390327c52208.png" />.</p>
<p>We can show the above equation is true via a few simplification steps:</p>
<p><br />
<img class="mwe-math-fallback-image-inline tex" alt="\frac{((j))((j)+1)}{2}+(j+1) = \frac{((j+1))((j+1)+1)}{2}" src="//upload.wikimedia.org/math/f/e/f/fef84fc327b13a111394390327c52208.png" /></p>
<p><br />
<img class="mwe-math-fallback-image-inline tex" alt="\frac{(j)(j+1)}{2}+j+1 = \frac{(j+1)(j+1+1)}{2}" src="//upload.wikimedia.org/math/2/8/3/283c130eb9ea48858a86f1c72e5d54f1.png" /></p>
<p><br />
<img class="mwe-math-fallback-image-inline tex" alt="\frac{(j)(j+1)}{2}+\frac{2(j+1)}{2} = \frac{(j+1)(j+2)}{2}" src="//upload.wikimedia.org/math/4/1/c/41c7d25c11f9a8e8a62631579c2fb8e9.png" /></p>
<p><br />
<img class="mwe-math-fallback-image-inline tex" alt="\frac{(j)(j+1)+2(j+1)}{2} = \frac{(j+1)(j+2)}{2}" src="//upload.wikimedia.org/math/3/2/3/3238712721bc2469f93a686560e3d660.png" /></p>
<p><br />
<img class="mwe-math-fallback-image-inline tex" alt="\frac{j^2+j+2j+2}{2} = \frac{(j+1)(j+2)}{2}" src="//upload.wikimedia.org/math/c/b/0/cb0c41359e16c8f146a70d4ae293f5b7.png" /></p>
<p><br />
<img class="mwe-math-fallback-image-inline tex" alt="\frac{j^2+3j+2}{2} = \frac{(j+1)(j+2)}{2}" src="//upload.wikimedia.org/math/8/b/a/8ba95b8ae2a92341c31196205436b552.png" /></p>
<p><br />
<img class="mwe-math-fallback-image-inline tex" alt="\frac{(j+1)(j+2)}{2} = \frac{(j+1)(j+2)}{2}" src="//upload.wikimedia.org/math/d/b/4/db4c8287c18b04b284abc3191d1f45d7.png" /></p>
<p><br /></p>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<h2><span class="mw-headline" id="Asymptotic_Notation">Asymptotic Notation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-1" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-2" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A problem may have numerous solutions. In order to choose the best algorithm for a particular task, you need to be able to judge how long a particular solution will take to run. Or, more accurately, you need to be able to judge how long two solutions will take to run, and choose the better of the two. You don't need to know how many minutes and seconds they will take, but you do need some way to compare algorithms against one another.</p>
<p><i>Asymptotic complexity</i> is a way of expressing the <i>main component</i> of the cost of an algorithm, using idealized (not comparable) units of computational work. Consider, for example, the algorithm for sorting a deck of cards, which proceeds by repeatedly searching through the deck for the lowest card. The asymptotic complexity of this algorithm is the <i>square</i> of the number of cards in the deck. This quadratic behavior is the main term in the complexity formula, it says, e.g., if you double the size of the deck, then the work is roughly quadrupled.</p>
<p>The exact formula for the cost is more complex, and contains more details than are needed to understand the essential complexity of the algorithm. With our deck of cards, in the worst case, the deck would start out reverse-sorted, so our scans would have to go all the way to the end. The first scan would involve scanning 52 cards, the next would take 51, etc. So the cost formula is 52 + 51 + ..... + 2. generally, letting N be the number of cards, the formula is 2 + ... + N, which equals <img class="mwe-math-fallback-image-inline tex" alt="((N) \times (N + 1) / 2) - 1 = ((N^2 + N) / 2) - 1 = (1/2)N^2 + (1/2)N - 1" src="//upload.wikimedia.org/math/8/e/8/8e8605d013b1bb772dffbbc04682d184.png" />. But the <img class="mwe-math-fallback-image-inline tex" alt="N^2" src="//upload.wikimedia.org/math/6/8/2/6828feb224035a25980fcbdb76126b02.png" /> term dominates the expression, and this is what is key for comparing algorithm costs. (This is in fact an <i>expensive</i> algorithm; the best sorting algorithms run in sub-quadratic time.)</p>
<p>Asymptotically speaking, in the limit as N tends towards infinity, 2 + 3 + .,,,.. + N gets closer and closer to the pure quadratic function (1/2)N^2. And what difference does the constant factor of 1/2 make, at this level of abstraction? So the behavior is said to be <img class="mwe-math-fallback-image-inline tex" alt="O(n^2)" src="//upload.wikimedia.org/math/1/8/9/189317b4b935a745fcfaf95940d2b4f0.png" />.</p>
<p>Now let us consider how we would go about <i>comparing</i> the complexity of two algorithms. Let f(n) be the cost, in the worst case, of one algorithm, expressed as a function of the input size n, and g(n) be the cost function for the other algorithm. E.g., for sorting algorithms, f(10) and g(10) would be the maximum number of steps that the algorithms would take on a list of 10 items. If, for all values of n&#160;&gt;=&#160;0, f(n) is less than or equal to g(n), then the algorithm with complexity function f is strictly faster. But, generally speaking, our concern for computational cost is for the cases with large inputs; so the comparison of f(n) and g(n) for small values of n is less significant than the "long term" comparison of f(n) and g(n), for n larger than some threshold.</p>
<p>Note that we have been speaking about <i>bounds</i> on the performance of algorithms, rather than giving exact speeds. The actual number of steps required to sort our deck of cards (with our naive quadratic algorithm) will depend upon the order in which the cards begin. The actual time to perform each of our steps will depend upon our processor speed, the condition of our processor cache, etc., etc. It's all very complicated in the concrete details, and moreover not relevant to the essence of the algorithm.</p>
<hr />
<h3><span class="mw-headline" id="The_O_Notation">The O Notation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-3" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Definition">Definition</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-4" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The O (pronounced <i>big-oh</i>) is the formal method of expressing the upper bound of an algorithm's running time. It's a measure of the longest amount of time it could possibly take for the algorithm to complete.</p>
<p>More formally, for non-negative functions, <i>f(n)</i> and <i>g(n)</i>, if there exists an integer <img class="mwe-math-fallback-image-inline tex" alt="n_{0}" src="//upload.wikimedia.org/math/a/3/9/a39353c589fbad6357213e4568a9c977.png" /> and a constant <i>c</i>&#160;&gt;&#160;0 such that for all integers <img class="mwe-math-fallback-image-inline tex" alt="n&gt;n_{0}" src="//upload.wikimedia.org/math/0/2/7/02763b779b4a6fedabeb72c5b09b9c85.png" />, <i>f(n)</i>&#160;â‰¤&#160;<i>cg(n)</i>, then <i>f(n)</i> is Big O of <i>g(n)</i>. This is denoted as "<i>f(n)</i>&#160;=&#160;<i>O(g(n))</i>". If graphed, <i>g(n)</i> serves as an upper bound to the curve you are analyzing, <i>f(n)</i>.</p>
<p>Note that if <i>f</i> can take on finite values only (as it should happen normally) then this definition implies that there exists some constant <i>C</i> (potentially larger than <i>c</i>) such that for all values of <i>n</i>, <i>f(n)</i>&#160;â‰¤&#160;<i>Cg(n)</i>. An appropriate value for <i>C</i> is the maximum of <i>c</i> and <img class="mwe-math-fallback-image-inline tex" alt=" \max_{1\le n\le n_0} f(n)/g(n)" src="//upload.wikimedia.org/math/1/9/9/199dc8d59ccceb082b98087e6d1783f6.png" />.</p>
<h4><span class="mw-headline" id="Theory_Examples">Theory Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-5" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>So, let's take an example of Big-O. Say that f(n) = 2n + 8, and g(n) = <img class="mwe-math-fallback-image-inline tex" alt="n^2" src="//upload.wikimedia.org/math/b/0/8/b08b1c6ec09f20907eb1d6f1392c01c6.png" />. Can we find a constant <img class="mwe-math-fallback-image-inline tex" alt="n_{0}" src="//upload.wikimedia.org/math/a/3/9/a39353c589fbad6357213e4568a9c977.png" />, so that 2n + 8 &lt;= <img class="mwe-math-fallback-image-inline tex" alt="n^2" src="//upload.wikimedia.org/math/b/0/8/b08b1c6ec09f20907eb1d6f1392c01c6.png" />? The number 4 works here, giving us 16 &lt;= 16. For any number n greater than 4, this will still work. Since we're trying to generalize this for large values of n, and small values (1, 2, 3) aren't that important, we can say that f(n) is generally faster than g(n); that is, f(n) is bound by g(n), and will always be less than it.</p>
<p>It could then be said that f(n) runs in O(<img class="mwe-math-fallback-image-inline tex" alt="n^2" src="//upload.wikimedia.org/math/b/0/8/b08b1c6ec09f20907eb1d6f1392c01c6.png" />) time: "f-of-n runs in Big-O of n-squared time".</p>
<p>To find the upper bound - the Big-O time - assuming we know that f(n) is equal to (exactly) 2n + 8, we can take a few shortcuts. For example, we can remove all constants from the runtime; eventually, at some value of c, they become irrelevant. This makes f(n) = 2n. Also, for convenience of comparison, we remove constant multipliers; in this case, the 2. This makes f(n) = n. It could also be said that f(n) runs in O(n) time; that lets us put a tighter (closer) upper bound onto the estimate.</p>
<h4><span class="mw-headline" id="Practical_Examples">Practical Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-6" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>O(n): printing a list of n items to the screen, looking at each item once.</p>
<p>O(ln n): also "log n", taking a list of items, cutting it in half repeatedly until there's only one item left.</p>
<p>O(<img class="mwe-math-fallback-image-inline tex" alt="n^2" src="//upload.wikimedia.org/math/b/0/8/b08b1c6ec09f20907eb1d6f1392c01c6.png" />): taking a list of n items, and comparing every item to every other item.</p>
<hr />
<h3><span class="mw-headline" id="Big-Omega_Notation"><i>Big-Omega Notation</i></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-7" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>For non-negative functions, <i>f(n)</i> and <i>g(n)</i>, if there exists an integer <img class="mwe-math-fallback-image-inline tex" alt="n_{0}" src="//upload.wikimedia.org/math/a/3/9/a39353c589fbad6357213e4568a9c977.png" /> and a constant <i>c</i>&#160;&gt;&#160;0 such that for all integers <img class="mwe-math-fallback-image-inline tex" alt="n&gt;n_{0}" src="//upload.wikimedia.org/math/0/2/7/02763b779b4a6fedabeb72c5b09b9c85.png" />, <i>f(n)</i>&#160;â‰¥&#160;<i>cg(n)</i>, then <i>f(n)</i> is omega of <i>g(n)</i>. This is denoted as "<i>f(n)</i>&#160;=&#160;<i>Î©(g(n))</i>".</p>
<p>This is almost the same definition as Big Oh, except that "<i>f(n)</i>&#160;â‰¥&#160;<i>cg(n)</i>", this makes <i>g(n)</i> a lower bound function, instead of an upper bound function. It describes the <b>best that can happen</b> for a given data size.</p>
<hr />
<h4><span class="mw-headline" id="Theta_Notation">Theta Notation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-8" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>For non-negative functions, <i>f(n)</i> and <i>g(n)</i>, <i>f(n)</i> is theta of <i>g(n)</i> if and only if <i>f(n)</i>&#160;=&#160;<i>O(g(n))</i> and <i>f(n)</i>&#160;=&#160;<i>Î©(g(n))</i>. This is denoted as "<i>f(n)</i>&#160;=&#160;<i>Î˜(g(n))</i>".</p>
<p>This is basically saying that the function, <i>f(n)</i> is bounded both from the top and bottom by the same function, <i>g(n)</i>.</p>
<hr />
<p>The theta notation is denoted by Q.</p>
<h4><span class="mw-headline" id="Little-O_Notation">Little-O Notation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-9" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>For non-negative functions, <i>f(n)</i> and <i>g(n)</i>, <i>f(n)</i> is little o of <i>g(n)</i> if and only if <i>f(n)</i>&#160;=&#160;<i>O(g(n))</i>, but <i>f(n)</i>&#160;â‰ &#160;<i>Î˜(g(n))</i>. This is denoted as "<i>f(n)</i>&#160;=&#160;<i>o(g(n))</i>".</p>
<p>This represents a loose bounding version of Big O. <i>g(n)</i> bounds from the top, but it does not bound the bottom.</p>
<hr />
<h4><span class="mw-headline" id="Little_Omega_Notation">Little Omega Notation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-10" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>For non-negative functions, <i>f(n)</i> and <i>g(n)</i>, <i>f(n)</i> is little omega of <i>g(n)</i> if and only if <i>f(n)</i>&#160;=&#160;<i>Î©(g(n))</i>, but <i>f(n)</i>&#160;â‰ &#160;<i>Î˜(g(n))</i>. This is denoted as "<i>f(n)</i>&#160;=&#160;<i>Ï‰(g(n))</i>".</p>
<p>Much like Little Oh, this is the equivalent for Big Omega. <i>g(n)</i> is a loose lower boundary of the function <i>f(n)</i>; it bounds from the bottom, but not from the top.</p>
<hr />
<h3><span class="mw-headline" id="How_asymptotic_notation_relates_to_analyzing_complexity">How asymptotic notation relates to analyzing complexity</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-11" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Temporal comparison is not the only issue in algorithms. There are space issues as well. Generally, a trade off between time and space is noticed in algorithms. Asymptotic notation empowers you to make that trade off. If you think of the amount of time and space your algorithm uses as a function of your data over time or space (time and space are usually analyzed separately), you can analyze how the time and space is handled when you introduce more data to your program.</p>
<p>This is important in data structures because you want a structure that behaves efficiently as you increase the amount of data it handles. Keep in mind though that algorithms that are efficient with large amounts of data are not always simple and efficient for small amounts of data. So if you know you are working with only a small amount of data and you have concerns for speed and code space, a trade off can be made for a function that does not behave well for large amounts of data.</p>
<h3><span class="mw-headline" id="A_few_examples_of_asymptotic_notation">A few examples of asymptotic notation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Asymptotic_Notation&amp;action=edit&amp;section=T-12" title="Data Structures/Asymptotic Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Generally, we use asymptotic notation as a convenient way to examine what can happen in a function in the worst case or in the best case. For example, if you want to write a function that searches through an array of numbers and returns the smallest one:</p>
<pre>
function <b>find-min</b>(array <i>a</i>[1..<i>n</i>])
  let <i>j</i> := <img class="mwe-math-fallback-image-inline tex" alt="\infty" src="//upload.wikimedia.org/math/d/2/4/d245777abca64ece2d5d7ca0d19fddb6.png" />
  for <i>i</i> := 1 to <i>n</i>:
    <i>j</i> := min(<i>j</i>, <i>a</i>[<i>i</i>])
  repeat
  return <i>j</i>
end
</pre>
<p>Regardless of how big or small the array is, every time we run <b>find-min</b>, we have to initialize the <i>i</i> and <i>j</i> integer variables and return <i>j</i> at the end. Therefore, we can just think of those parts of the function as constant and ignore them.</p>
<p>So, how can we use asymptotic notation to discuss the <b>find-min</b> function? If we search through an array with 87 elements, then the <i>for</i> loop iterates 87 times, even if the very first element we hit turns out to be the minimum. Likewise, for <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> elements, the for loop iterates <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> times. Therefore we say the function runs in time <img class="mwe-math-fallback-image-inline tex" alt="O(n)" src="//upload.wikimedia.org/math/7/b/a/7ba55e7c64a9405a0b39a1107e90ca94.png" />.</p>
<p>What about this function:</p>
<pre>
function <b>find-min-plus-max</b>(array <i>a</i>[1..<i>n</i>])
  <i>// First, find the smallest element in the array</i>
  let <i>j</i> := <img class="mwe-math-fallback-image-inline tex" alt="\infty" src="//upload.wikimedia.org/math/d/2/4/d245777abca64ece2d5d7ca0d19fddb6.png" />;
  for <i>i</i> := 1 to <i>n</i>:
    <i>j</i> := min(<i>j</i>, <i>a</i>[<i>i</i>])
  repeat
  let <i>minim</i> := <i>j</i>
  
  <i>// Now, find the biggest element, add it to the smallest and</i>
  j := <img class="mwe-math-fallback-image-inline tex" alt="-\infty" src="//upload.wikimedia.org/math/b/e/a/beab416080922c84a90ba092f7734fe5.png" />;
  for <i>i</i> := 1 to <i>n</i>:
    <i>j</i> := max(<i>j</i>, <i>a</i>[<i>i</i>])
  repeat
  let <i>maxim</i> := <i>j</i>
  
  <i>// return the sum of the two</i>
  return <i>minim</i> + <i>maxim</i>;
end
</pre>
<p>What's the running time for <b>find-min-plus-max</b>? There are two <i>for</i> loops, that each iterate <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> times, so the running time is clearly <img class="mwe-math-fallback-image-inline tex" alt="O(2n)" src="//upload.wikimedia.org/math/1/6/0/160ac93d06be5f477817712a4d3431fc.png" />. Because 2 is a constant, we throw it away and write the running time as <img class="mwe-math-fallback-image-inline tex" alt="O(n)" src="//upload.wikimedia.org/math/7/b/a/7ba55e7c64a9405a0b39a1107e90ca94.png" />. Why can you do this? If you recall the definition of Big-O notation, the function whose bound you're testing can be multiplied by some constant. If <i>f(x)</i>&#160;=&#160;<i>2x</i>, we can see that if <i>g(x)</i>&#160;=&#160;<i>x</i>, then the Big-O condition holds. Thus <img class="mwe-math-fallback-image-inline tex" alt="O(2n) = O(n)" src="//upload.wikimedia.org/math/f/3/6/f3645bb291d6c2db911c19d8c81dd22b.png" />. This rule is general for the various asymptotic notations.</p>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<table class="metadata plainlinks ambox ambox-content" style="">
<tr>
<td class="mbox-image">
<div style="width: 52px;"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/9/91/Book_important2.svg/40px-Book_important2.svg.png" width="40" height="40" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/9/91/Book_important2.svg/60px-Book_important2.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/9/91/Book_important2.svg/80px-Book_important2.svg.png 2x" data-file-width="128" data-file-height="128" /></div>
</td>
<td class="mbox-text" style=""><b>A Wikibookian has nominated this page for cleanup.</b><br />
<small>You can <a class="external text" href="//en.wikibooks.org/w/index.php?title=Data_Structures/All_Chapters&amp;action=edit">help make it better</a>. Please review any <a href="/w/index.php?title=Talk:Data_Structures/All_Chapters&amp;action=edit&amp;redlink=1" class="new" title="Talk:Data Structures/All Chapters (does not exist)">relevant discussion</a>.</small></td>
</tr>
</table>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<h2><span class="mw-headline" id="Arrays">Arrays</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Arrays&amp;action=edit&amp;section=T-1" title="Data Structures/Arrays">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Array is a collection mainly using similar data types that are stored into a common variable, forming (at least conceptually that may even be replicated into the memory hardware) a linear data structure.</p>
<p>An array is a particular method of storing <b>elements</b> of indexed data. Elements of data are logically stored sequentially in blocks within the array. Each element is referenced by an <b>index</b>, or subscripts.</p>
<p>The index is usually a number used to address an element in the array. For example, if you were storing information about each day in August, you would create an array with an index capable of addressing 31 values -- one for each day of the month. Indexing rules are language dependent, however most languages use either 0 or 1 as the first element of an array.</p>
<p>The concept of an array can be daunting to the uninitiated, but it is really quite simple. Think of a notebook with pages numbered 1 through 12. Each page may or may not contain information on it. The notebook is an <i>array</i> of pages. Each page is an <i>element</i> of the array 'notebook'. Programmatically, you would retrieve information from a page by referring to its number or <i>subscript</i>, i.e., notebook(4) would refer to the contents of page 4 of the array notebook.</p>
<p><br /></p>
<center><a href="/wiki/File:SimpleArray.png" class="image"><img alt="SimpleArray.png" src="//upload.wikimedia.org/wikibooks/en/8/85/SimpleArray.png" width="385" height="25" data-file-width="385" data-file-height="25" /></a><br />
<i>The notebook (array) contains 12 pages (elements)</i></center>
<p><br />
Arrays can also be multidimensional - instead of accessing an element of a one-dimensional list, elements are accessed by two or more indices, as from a matrix or tensor.</p>
<p>Multidimensional arrays are as simple as our notebook example above. To envision a multidimensional array, think of a calendar. Each page of the calendar, 1 through 12, is an element, representing a month, which contains approximately 30 elements, which represent days. Each day may or may not have information in it. Programmatically then, calendar(4,15) would refer to the 4th month, 15th day. Thus we have a two-dimensional array. To envision a three-dimensional array, break each day up into 24 hours. Now calendar(4,15,9) would refer to 4th month, 15th day, 9th hour.</p>
<p><br /></p>
<center><a href="/wiki/File:MultidimensionalArray.png" class="image"><img alt="MultidimensionalArray.png" src="//upload.wikimedia.org/wikibooks/en/1/16/MultidimensionalArray.png" width="169" height="131" data-file-width="169" data-file-height="131" /></a><br />
<i>A simple 6 element by 4 element array</i></center>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 8px; width:85%" title="Array&lt;Element&gt; Operations">
<p><b>Array&lt;Element&gt; Operations</b><br /></p>
<p><tt>make-array(integer <i>n</i>): Array</tt></p>
<dl>
<dd>Create an array of elements indexed from <img class="mwe-math-fallback-image-inline tex" alt="0" src="//upload.wikimedia.org/math/c/f/c/cfcd208495d565ef66e7dff9f98764da.png" /> to <img class="mwe-math-fallback-image-inline tex" alt="n-1" src="//upload.wikimedia.org/math/a/4/3/a438673491daae8148eae77373b6a467.png" />, inclusive. The number of elements in the array, also known as the size of the array, is <i>n</i>.</dd>
</dl>
<p><tt>get-value-at(Array <i>a</i>, integer <i>index</i>): Element</tt></p>
<dl>
<dd>Returns the value of the element at the given <i>index</i>. The value of <i>index</i> must be in bounds: <i>0 &lt;= index &lt;= (n - 1)</i>. This operation is also known as <b>subscripting</b>.</dd>
</dl>
<p><tt>set-value-at(Array <i>a</i>, integer <i>index</i>, Element <i>new-value</i>)</tt></p>
<dl>
<dd>Sets the element of the array at the given <i>index</i> to be equal to <i>new-value</i>.</dd>
</dl>
</div>
<p>Arrays guarantee <b>constant</b> time read and write access, <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" />, however many lookup operations (find_min, find_max, find_index) of an instance of an element are <b>linear</b> time, <img class="mwe-math-fallback-image-inline tex" alt="O(n)" src="//upload.wikimedia.org/math/7/b/a/7ba55e7c64a9405a0b39a1107e90ca94.png" />. Arrays are very efficient in most languages, as operations compute the address of an element via a simple formula based on the base address element of the array.</p>
<p>The implementation of arrays differ greatly between languages: some languages allow arrays to be resized automatically, or to even contain elements of differing types (such as Perl). Other languages are very strict and require the type and length information of an array to be known at run time (such as C).</p>
<p>Arrays typically map directly to contiguous storage locations within your computer's memory and are therefore the "natural" storage structure for most higher level languages.</p>
<p>Simple linear arrays are the basis for most of the other data structures. Many languages do not allow you to allocate any structure except an array, everything else must be implemented on top of the array. The exception is the linked list, that is typically implemented as individually allocated objects, but it is possible to implement a linked list within an array.</p>
<h3><span class="mw-headline" id="Type">Type</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Arrays&amp;action=edit&amp;section=T-2" title="Data Structures/Arrays">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The array index needs to be of some type. Usually, the standard integer type of that language is used, but there are also languages such as <a href="//en.wikipedia.org/wiki/Ada_programming_language" class="extiw" title="w:Ada programming language">Ada</a> and <a href="//en.wikipedia.org/wiki/Pascal_programming_language" class="extiw" title="w:Pascal programming language">Pascal</a> which allow any discrete type as an array index. Scripting languages often allow any type as an index (associative array).</p>
<h3><span class="mw-headline" id="Bounds">Bounds</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Arrays&amp;action=edit&amp;section=T-3" title="Data Structures/Arrays">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The array index consists of a range of values with a lower bound and an upper bound.</p>
<p>In some programming languages only the upper bound can be chosen while the lower bound is fixed to be either 0 <small>(<a href="//en.wikipedia.org/wiki/C_programming_language" class="extiw" title="w:C programming language">C</a>, <a href="//en.wikipedia.org/wiki/C_plus_plus" class="extiw" title="w:C plus plus">C++</a>, <a href="//en.wikipedia.org/wiki/C_Sharp_programming_language" class="extiw" title="w:C Sharp programming language">C#</a>, <a href="//en.wikipedia.org/wiki/Java_programming_language" class="extiw" title="w:Java programming language">Java</a>)</small> or 1 <small>(<a href="/w/index.php?title=FORTRAN_66&amp;action=edit&amp;redlink=1" class="new" title="FORTRAN 66 (does not exist)">FORTRAN 66</a>, <a href="//en.wikipedia.org/wiki/R_Programming" class="extiw" title="w:R Programming">R</a>)</small>.</p>
<p>In other programming languages <small>(<a href="//en.wikipedia.org/wiki/Ada_programming_language" class="extiw" title="w:Ada programming language">Ada</a>, <a href="//en.wikipedia.org/wiki/PL/I" class="extiw" title="w:PL/I">PL/I</a>, <a href="//en.wikipedia.org/wiki/Pascal_programming_language" class="extiw" title="w:Pascal programming language">Pascal</a>)</small> both the upper and lower bound can be freely chosen <small>(even negative)</small>.</p>
<h3><span class="mw-headline" id="Bounds_check">Bounds check</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Arrays&amp;action=edit&amp;section=T-4" title="Data Structures/Arrays">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The third aspect of an array index is the check for valid ranges and what happens when an invalid index is accessed. This is a very important point since the majority of <a href="//en.wikipedia.org/wiki/Computer_worm" class="extiw" title="w:Computer worm">computer worms</a> and <a href="//en.wikipedia.org/wiki/Computer_virus" class="extiw" title="w:Computer virus">computer viruses</a> attack by using invalid array bounds.</p>
<p>There are three options open:</p>
<ol>
<li>Most languages <small>(<a href="//en.wikipedia.org/wiki/Ada_programming_language" class="extiw" title="w:Ada programming language">Ada</a>, <a href="//en.wikipedia.org/wiki/PL/I" class="extiw" title="w:PL/I">PL/I</a>, <a href="//en.wikipedia.org/wiki/Pascal_programming_language" class="extiw" title="w:Pascal programming language">Pascal</a>, <a href="//en.wikipedia.org/wiki/Java_programming_language" class="extiw" title="w:Java programming language">Java</a>, <a href="//en.wikipedia.org/wiki/C_Sharp" class="extiw" title="w:C Sharp">C#</a>)</small> will check the bounds and raise some error condition when an element is accessed which does not exist.</li>
<li>A few languages <small>(<a href="//en.wikipedia.org/wiki/C_programming_language" class="extiw" title="w:C programming language">C</a>, <a href="//en.wikipedia.org/wiki/C_plus_plus" class="extiw" title="w:C plus plus">C++</a>)</small> will not check the bounds and return or set some arbitrary value when an element outside the valid range is accessed.</li>
<li>Scripting languages often automatically expand the array when data is written to an index which was not valid until then.</li>
</ol>
<h3><span class="mw-headline" id="Declaring_Array_Types">Declaring Array Types</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Arrays&amp;action=edit&amp;section=T-5" title="Data Structures/Arrays">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The declaration of array type depends on how many features the array in a particular language has.</p>
<p>The easiest declaration is when the language has a fixed lower bound and fixed index type. If you need an array to store the monthly income you could declare in <a href="/wiki/C_Programming" title="C Programming">C</a></p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="c source-c">
<pre class="de1">
<span class="kw4">typedef</span> <span class="kw4">double</span> Income<span class="br0">[</span><span class="nu0">12</span><span class="br0">]</span><span class="sy0">;</span>
</pre></div>
</div>
<p>This gives you an array with in the range of 0 to 11. For a full description of arrays in C see <a href="/wiki/C_Programming/Arrays" title="C Programming/Arrays">C Programming/Arrays</a>.</p>
<p>If you use a language where you can choose both the lower bound as well as the index type, the declaration is -- of course -- more complex. Here are two examples in <a href="/wiki/Ada_Programming" title="Ada Programming">Ada</a>:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="ada source-ada">
<pre class="de1">
<span class="kw3">type</span> Month <span class="kw1">is</span> <span class="kw3">range</span> <span class="nu0">1</span> .. <span class="nu0">12</span>;
<span class="kw3">type</span> Income <span class="kw1">is</span> <span class="kw3">array</span><span class="br0">(</span>Month<span class="br0">)</span> <span class="kw3">of</span> Float;
</pre></div>
</div>
<p>or shorter:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="ada source-ada">
<pre class="de1">
<span class="kw3">type</span> Income <span class="kw1">is</span> <span class="kw3">array</span><span class="br0">(</span><span class="nu0">1</span> .. <span class="nu0">12</span><span class="br0">)</span> <span class="kw3">of</span> Float;
</pre></div>
</div>
<p>For a full description of arrays in Ada see <a href="/wiki/Ada_Programming/Types/array" title="Ada Programming/Types/array">Ada Programming/Types/array</a>.</p>
<h3><span class="mw-headline" id="Array_Access">Array Access</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Arrays&amp;action=edit&amp;section=T-6" title="Data Structures/Arrays">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>We generally write arrays with a name, followed by the index in some brackets, square '[]' or round '()'. For example, <tt>august[3]</tt> is the method used in the C programming language to refer to a particular day in the month.</p>
<p>Because the C language starts the index at zero, <tt>august[3]</tt> is the 4th element in the array. <tt>august[0]</tt> actually refers to the first element of this array. Starting an index at zero is natural for computers, whose internal representations of numbers begin with zero, but for humans, this unnatural numbering system can lead to problems when accessing data in an array. When fetching an element in a language with zero-based indexes, keep in mind the <i>true</i> length of an array, lest you find yourself fetching the wrong data. This is the disadvantage of programming in languages with fixed lower bounds, the programmer must always remember that "[0]" means "1st" and, when appropriate, add or subtract one from the index. Languages with variable lower bounds will take that burden off the programmer's shoulder.</p>
<p>We use indexes to store <i>related</i> data. If our C language array is called <tt>august</tt>, and we wish to store that we're going to the supermarket on the 1st, we can say, for example</p>
<pre>
august[0] = "Going to the shops today"
</pre>
<p>In this way, we can go through the indexes from 0 to 30 and get the related tasks for each day in <tt>august</tt>.</p>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<p><br /></p>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<h2><span class="mw-headline" id="List_Structures_and_Iterators">List Structures and Iterators</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-1" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>We have seen now two different data structures that allow us to store an ordered sequence of elements. However, they have two very different interfaces. The array allows us to use <code>get-element()</code> and <code>set-element()</code> functions to access and change elements. The node chain requires us to use <code>get-next()</code> until we find the desired node, and then we can use <code>get-value()</code> and <code>set-value()</code> to access and modify its value. Now, what if you've written some code, and you realize that you should have been using the other sequence data structure? You have to go through all of the code you've already written and change one set of accessor functions into another. What a pain! Fortunately, there is a way to localize this change into only one place: by using the <b>List</b> Abstract Data Type (ADT).</p>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; width:80%" title="List&lt;item-type&gt; ADT">
<p><b><code>List&lt;item-type&gt;</code> ADT</b></p>
<dl>
<dt style="font-weight:normal"><code><b>get-begin</b>():List Iterator&lt;item-type&gt;</code></dt>
<dd>Returns the <i>list iterator</i> (we'll define this soon) that represents the first element of the list. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>get-end</b>():List Iterator&lt;item-type&gt;</code></dt>
<dd>Returns the list iterator that represents one element past the last element in the list. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>prepend</b>(<var>new-item</var>:item-type)</code></dt>
<dd>Adds a new element at the beginning of a list. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>insert-after</b>(<var>iter</var>:List Iterator&lt;item-type&gt;, <var>new-item</var>:item-type)</code></dt>
<dd>Adds a new element immediately after <var>iter</var>. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>remove-first</b>()</code></dt>
<dd>Removes the element at the beginning of a list. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>remove-after</b>(<var>iter</var>:List Iterator&lt;item-type&gt;)</code></dt>
<dd>Removes the element immediately after <var>iter</var>. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>is-empty</b>():Boolean</code></dt>
<dd>True if there are no elements in the list. Has a default implementation. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>get-size</b>():Integer</code></dt>
<dd>Returns the number of elements in the list. Has a default implementation. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>get-nth</b>(<var>n</var>:Integer):item-type</code></dt>
<dd>Returns the nth element in the list, counting from 0. Has a default implementation. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>set-nth</b>(<var>n</var>:Integer, <var>new-value</var>:item-type)</code></dt>
<dd>Assigns a new value to the nth element in the list, counting from 0. Has a default implementation. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
</dl>
</div>
<p>The <b>iterator</b> is another abstraction that encapsulates both access to a single element and incremental movement around the list. Its interface is very similar to the node interface presented in the introduction, but since it is an abstract type, different lists can implement it differently.</p>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; width:80%" title="List Iterator&lt;item-type&gt; ADT">
<p><b><code>List Iterator&lt;item-type&gt;</code> ADT</b></p>
<dl>
<dt style="font-weight:normal"><code><b>get-value</b>():item-type</code></dt>
<dd>Returns the value of the list element that this iterator refers to.</dd>
<dt style="font-weight:normal"><code><b>set-value</b>(<var>new-value</var>:item-type)</code></dt>
<dd>Assigns a new value to the list element that this iterator refers to.</dd>
<dt style="font-weight:normal"><code><b>move-next</b>()</code></dt>
<dd>Makes this iterator refer to the next element in the list.</dd>
<dt style="font-weight:normal"><code><b>equal</b>(<var>other-iter</var>:List Iterator&lt;item-type&gt;):Boolean</code></dt>
<dd>True if the other iterator refers to the same list element as this iterator.</dd>
</dl>
<p>All operations run in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</p>
</div>
<p>There are several other aspects of the List ADT's definition that need more explanation. First, notice that the <code>get-end()</code> operation returns an iterator that is "one past the end" of the list. This makes its implementation a little trickier, but allows you to write loops like:</p>
<pre>
var iter:List Iterator := list.get-begin()
while(not iter.equal(list.get-end()))
 # Do stuff with the iterator
 iter.move-next()
end while
</pre>
<p>Second, each operation gives a worst-case running time. Any implementation of the List ADT is guaranteed to be able to run these operation at least that fast. Most implementations will run most of the operations faster. For example, the node chain implementation of List can run <code>insert-after()</code> in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" />.</p>
<p>Third, some of the operations say that they have a default implementation. This means that these operations can be implemented in terms of other, more primitive operations. They're included in the ADT so that certain implementations can implement them faster. For example, the default implementation of <code>get-nth()</code> runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> because it has to traverse all of the elements before the nth. Yet the array implementation of List can implement it in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> using its <code>get-element()</code> operation. The other default implementations are:</p>
<pre>
abstract type List&lt;item-type&gt;
 method is-empty()
  return get-begin().equal(get-end())
 end method

 method get-size():Integer
  var size:Integer := 0
  var iter:List Iterator&lt;item-type&gt; := get-begin()
  while(not iter.equal(get-end()))
   size := size+1
   iter.move-next()
  end while
  return size
 end method

 helper method find-nth(n:Integer):List Iterator&lt;item-type&gt;
  if n &gt;= get-size()
   error "The index is past the end of the list"
  end if
  var iter:List Iterator&lt;item-type&gt; := get-begin()
  while(n &gt; 0)
   iter.move-next()
   n := n-1
  end while
  return iter
 end method

 method get-nth(n:Integer):item-type
  return find-nth(n).get-value()
 end method

 method set-nth(n:Integer, new-value:item-type)
  find-nth(n).set-value(new-value)
 end method
end type
</pre>
<h3><span class="mw-headline" id="Syntactic_Sugar">Syntactic Sugar</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-2" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Occasionally throughout this book we'll introduce an abbreviation that will allow us to write, and you to read, less pseudocode. For now, we'll introduce an easier way to compare iterators and a specialized loop for traversing sequences.</p>
<p>Instead of using the <code>equal()</code> method to compare iterators, we'll overload the <code>==</code> operator. To be precise, the following two expressions are equivalent:</p>
<pre>
<var>iter1</var>.equal(<var>iter2</var>)
<var>iter1</var> == <var>iter2</var>
</pre>
<p>Second, we'll use the <code>for</code> keyword to express list traversal. The following two blocks are equivalent:</p>
<pre>
var <var>iter</var>:List Iterator&lt;<var>item-type</var>&gt; := <var>list</var>.get-begin()
while(not <var>iter</var> == <var>list</var>.get-end())
 <var>operations on iter</var>
 <var>iter</var>.move-next()
end while
</pre>
<pre>
for <var>iter</var> in <var>list</var>
 <var>operations on iter</var>
end for
</pre>
<h3><span class="mw-headline" id="Implementations">Implementations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-3" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In order to actually use the List ADT, we need to write a <i>concrete</i> data type that implements its interface. There are two standard data types that naturally implement List: the node chain described in the Introduction, normally called a Singly Linked List; and an extension of the array type called a Vector, which automatically resizes itself to accommodate inserted nodes.</p>
<h4><span class="mw-headline" id="Singly_Linked_List">Singly Linked List</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-4" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<pre>
type Singly Linked List&lt;item-type&gt; implements List&lt;item-type&gt;
</pre>
<p><var>head</var> refers to the first node in the list. When it's null, the list is empty.</p>
<pre>
  data head:Node&lt;item-type&gt;
</pre>
<p>Initially, the list is empty.</p>
<pre>
  constructor()
    head := null
  end constructor

  method get-begin():Sll Iterator&lt;item-type&gt;
    return new Sll-Iterator(head)
  end method

</pre>
<p>The "one past the end" iterator is just a null node. To see why, think about what you get when you have an iterator for the last element in the list and you call <code>move-next()</code>.</p>
<pre>
  method get-end():Sll Iterator&lt;item-type&gt;
    return new Sll-Iterator(null)
  end method

  method prepend(new-item:item-type)
    head = make-node(new-item, head)
  end method

  method insert-after(iter:Sll Iterator&lt;item-type&gt;, new-item:item-type)
    var new-node:Node&lt;item-type&gt; := make-node(new-item, iter.node().get-next())
    iter.node.set-next(new-node)
  end method

  method remove-first()
    head = head.get-next()
  end method

</pre>
<p>This takes the node the iterator holds and makes it point to the node two nodes later.</p>
<pre>
  method remove-after(iter:Sll Iterator&lt;item-type&gt;)
    iter.node.set-next(iter.node.get-next().get-next())
  end method
end type
</pre>
<p>If we want to make <code>get-size()</code> be an <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> operation, we can add an Integer data member that keeps track of the list's size at all times. Otherwise, the default <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> implementation works fine.</p>
<p>An iterator for a singly linked list simply consists of a reference to a node.</p>
<pre>
type Sll Iterator&lt;item-type&gt;
  data node:Node&lt;item-type&gt;

  constructor(_node:Node&lt;item-type&gt;)
    node := _node
  end constructor
</pre>
<p>Most of the operations just pass through to the node.</p>
<pre>
  method get-value():item-type
    return node.get-value()
  end method

  method set-value(new-value:item-type)
    node.set-value(new-value)
  end method

  method move-next()
    node := node.get-next()
  end method
</pre>
<p>For equality testing, we assume that the underlying system knows how to compare nodes for equality. In nearly all languages, this would be a pointer comparison.</p>
<pre>
  method equal(other-iter:List Iterator&lt;item-type&gt;):Boolean
    return node == other-iter.node
  end method
end type
</pre>
<h4><span class="mw-headline" id="Vector">Vector</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-5" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Let's write the Vector's iterator first. It will make the Vector's implementation clearer.</p>
<pre>
type Vector Iterator&lt;item-type&gt;
  data array:Array&lt;item-type&gt;
  data index:Integer

  constructor(my_array:Array&lt;item-type&gt;, my_index:Integer)
    array := my_array
    index := my_index
  end constructor

  method get-value():item-type
    return array.get-element(index)
  end method

  method set-value(new-value:item-type)
    array.set-element(index, new-value)
  end method

  method move-next()
    index := index+1
  end method

  method equal(other-iter:List Iterator&lt;item-type&gt;):Boolean
    return array==other-iter.array and index==other-iter.index
  end method
end type
</pre>
<p>We implement the Vector in terms of the primitive Array data type. It is inefficient to always keep the array exactly the right size (think of how much resizing you'd have to do), so we store both a <code>size</code>, the number of logical elements in the Vector, and a <code>capacity</code>, the number of spaces in the array. The array's valid indices will <i>always</i> range from <code>0</code> to <code>capacity-1</code>.</p>
<pre>
type Vector&lt;item-type&gt;
  data array:Array&lt;item-type&gt;
  data size:Integer
  data capacity:Integer
</pre>
<p>We initialize the vector with a capacity of 10. Choosing 10 was fairly arbitrary. If we'd wanted to make it appear less arbitrary, we would have chosen a power of 2, and innocent readers like you would assume that there was some deep, binary-related reason for the choice.</p>
<pre>
  constructor()
    array := create-array(0, 9)
    size := 0
    capacity := 10
  end constructor

  method get-begin():Vector-Iterator&lt;item-type&gt;
    return new Vector-Iterator(array, 0)
  end method
</pre>
<p>The end iterator has an index of <code>size</code>. That's one more than the highest valid index.</p>
<pre>
  method get-end():List Iterator&lt;item-type&gt;
    return new Vector-Iterator(array, size)
  end method
</pre>
<p>We'll use this method to help us implement the insertion routines. After it is called, the <code>capacity</code> of the array is guaranteed to be at least <code>new-capacity</code>. A naive implementation would simply allocate a new array with exactly <code>new-capacity</code> elements and copy the old array over. To see why this is inefficient, think what would happen if we started appending elements in a loop. Once we exceeded the original capacity, each new element would require us to copy the entire array. That's why this implementation at least doubles the size of the underlying array any time it needs to grow.</p>
<pre>
  helper method ensure-capacity(new-capacity:Integer)
</pre>
<p>If the current capacity is already big enough, return quickly.</p>
<pre>
    if capacity &gt;= new-capacity
      return
    end if
</pre>
<p>Now, find the new capacity we'll need,</p>
<pre>
    var allocated-capacity:Integer := max(capacity*2, new-capacity)
    var new-array:Array&lt;item-type&gt; := create-array(0, allocated-capacity - 1)
</pre>
<p>copy over the old array,</p>
<pre>
    for i in 0..size-1
      new-array.set-element(i, array.get-element(i))
    end for
</pre>
<p>and update the Vector's state.</p>
<pre>
    array := new-array
    capacity := allocated-capacity
  end method
</pre>
<p>This method uses a normally-illegal iterator, which refers to the item one before the start of the Vector, to trick <code>insert-after()</code> into doing the right thing. By doing this, we avoid duplicating code.</p>
<pre>
  method prepend(new-item:item-type)
    insert-after(new Vector-Iterator(array, -1), new-item)
  end method
</pre>
<p><code>insert-after()</code> needs to copy all of the elements between <var>iter</var> and the end of the Vector. This means that in general, it runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time. However, in the special case where <var>iter</var> refers to the last element in the vector, we don't need to copy any elements to make room for the new one. An append operation can run in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time, plus the time needed for the <code>ensure-capacity()</code> call. <code>ensure-capacity()</code> will sometimes need to copy the whole array, which takes <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time. But much more often, it doesn't need to do anything at all.</p>
<div class="note" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; margin:0 2em" title="List&lt;item-type&gt; ADT">
<p><b>Amortized Analysis</b><br />
In fact, if you think of a series of append operations starting immediately after <code>ensure-capacity()</code> increases the Vector's capacity (call the capacity here <img class="mwe-math-fallback-image-inline tex" alt="C" src="//upload.wikimedia.org/math/0/d/6/0d61f8370cad1d412f80b84d143e1257.png" />), and ending immediately after the next increase in capacity, you can see that there will be exactly <img class="mwe-math-fallback-image-inline tex" alt="\frac{C}{2}=O(C)" src="//upload.wikimedia.org/math/3/8/a/38adc3da42c19e75b8975571d0800d7f.png" /> appends. At the later increase in capacity, it will need to copy <img class="mwe-math-fallback-image-inline tex" alt="C" src="//upload.wikimedia.org/math/0/d/6/0d61f8370cad1d412f80b84d143e1257.png" /> elements over to the new array. So this entire sequence of <img class="mwe-math-fallback-image-inline tex" alt="\frac{C}{2}" src="//upload.wikimedia.org/math/6/9/b/69b970e95b3d66d6bd5216568ef59b4e.png" /> function calls took <img class="mwe-math-fallback-image-inline tex" alt="\frac{3C}{2}=O(C)" src="//upload.wikimedia.org/math/4/8/5/485862e62daf288dff9b5c89530ac731.png" /> operations. We call this situation, where there are <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> operations for <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> function calls "<i>amortized</i> <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time".</p>
</div>
<pre>
  method insert-after(iter:Vector Iterator&lt;item-type&gt;, new-item:item-type)
    ensure-capacity(size+1)
</pre>
<p>This loop copies all of the elements in the vector into the spot one index up. We loop backwards in order to make room for each successive element just before we copy it.</p>
<pre>
    for i in size-1 .. iter.index+1 step -1
      array.set-element(i+1, array.get-element(i))
    end for
</pre>
<p>Now that there is an empty space in the middle of the array, we can put the new element there.</p>
<pre>
    array.set-element(iter.index+1, new-item)
</pre>
<p>And update the Vector's size.</p>
<pre>
    size := size+1
  end method

</pre>
<p>Again, cheats a little bit to avoid duplicate code.</p>
<pre>
  method remove-first()
   remove-after(new Vector-Iterator(array, -1))
  end method

</pre>
<p>Like <code>insert-after()</code>, <code>remove-after</code> needs to copy all of the elements between <var>iter</var> and the end of the Vector. So in general, it runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time. But in the special case where <var>iter</var> refers to the last element in the vector, we can simply decrement the Vector's size, without copying any elements. A remove-last operation runs in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</p>
<pre>
  method remove-after(iter:List Iterator&lt;item-type&gt;)
    for i in iter.index+1 .. size-2
      array.set-element(i, array.get-element(i+1))
    end for
    size := size-1
  end method

</pre>
<p>This method has a default implementation, but we're already storing the size, so we can implement it in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time, rather than the default's <img class="mwe-math-fallback-image-inline tex" alt="O(N)." src="//upload.wikimedia.org/math/e/4/7/e472b7d37456fd24e8f5f7208475262b.png" /></p>
<pre>
  method get-size():Integer
    return size
  end method
</pre>
<p>Because an array allows constant-time access to elements, we can implement <code>get-</code> and <code>set-nth()</code> in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" />, rather than the default implementation's <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /></p>
<pre>
  method get-nth(n:Integer):item-type
    return array.get-element(n)
  end method

  method set-nth(n:Integer, new-value:item-type)
    array.set-element(n, new-value)
  end method
end type
</pre>
<h3><span class="mw-headline" id="Bidirectional_Lists">Bidirectional Lists</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-6" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div style="clear: both"></div>
<table style="background: #ffd; border: 1px solid #aaaaaa; padding: 6pt; margin: 12pt 8%; width: 60%; margin: auto;" class="notice noprint notice-todo">
<tr>
<td style="width: 58px;">
<div class="floatleft"><img alt="Clipboard" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/45px-Clipboard.svg.png" width="45" height="45" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/68px-Clipboard.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/90px-Clipboard.svg.png 2x" data-file-width="48" data-file-height="48" /></div>
</td>
<td>
<p><b>To do:</b><br />
This is very terse. It should be fleshed out later.</p>
</td>
</tr>
</table>
<div style="clear: both"></div>
<p>Sometimes we want Data Structures/All Chaptersto move backward in a list too.</p>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; width:80%" title="Bidirectional List&lt;item-type&gt; ADT">
<p><b><code>Bidirectional List&lt;item-type&gt;</code> ADT</b></p>
<dl>
<dt style="font-weight:normal"><code><b>get-begin</b>():Bidirectional List Iterator&lt;item-type&gt;</code></dt>
<dd>Returns the <i>list iterator</i> (we'll define this soon) that represents the first element of the list. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>get-end</b>():Bidirectional List Iterator&lt;item-type&gt;</code></dt>
<dd>Returns the list iterator that represents one element past the last element in the list. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>insert</b>(<var>iter</var>:Bidirectional List Iterator&lt;item-type&gt;, <var>new-item</var>:item-type)</code></dt>
<dd>Adds a new element immediately before <var>iter</var>. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>remove</b>(<var>iter</var>:Bidirectional List Iterator&lt;item-type&gt;)</code></dt>
<dd>Removes the element immediately referred to by <var>iter</var>. After this call, <var>iter</var> will refer to the next element in the list. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>is-empty</b>():Boolean</code></dt>
<dd>True iff there are no elements in the list. Has a default implementation. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>get-size</b>():Integer</code></dt>
<dd>Returns the number of elements in the list. Has a default implementation. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>get-nth</b>(<var>n</var>:Integer):item-type</code></dt>
<dd>Returns the nth element in the list, counting from 0. Has a default implementation. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
<dt style="font-weight:normal"><code><b>set-nth</b>(<var>n</var>:Integer, <var>new-value</var>:item-type)</code></dt>
<dd>Assigns a new value to the nth element in the list, counting from 0. Has a default implementation. Runs in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</dd>
</dl>
</div>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; width:80%" title="Bidirectional List Iterator&lt;item-type&gt; ADT">
<p><b><code>Bidirectional List Iterator&lt;item-type&gt;</code> ADT</b></p>
<dl>
<dt style="font-weight:normal"><code><b>get-value</b>():item-type</code></dt>
<dd>Returns the value of the list element that this iterator refers to. Undefined if the iterator is past-the-end.</dd>
<dt style="font-weight:normal"><code><b>set-value</b>(<var>new-value</var>:item-type)</code></dt>
<dd>Assigns a new value to the list element that this iterator refers to. Undefined if the iterator is past-the-end.</dd>
<dt style="font-weight:normal"><code><b>move-next</b>()</code></dt>
<dd>Makes this iterator refer to the next element in the list. Undefined if the iterator is past-the-end.</dd>
<dt style="font-weight:normal"><code><b>move-previous</b>()</code></dt>
<dd>Makes this iterator refer to the previous element in the list. Undefined if the iterator refers to the first list element.</dd>
<dt style="font-weight:normal"><code><b>equal</b>(<var>other-iter</var>:List Iterator&lt;item-type&gt;):Boolean</code></dt>
<dd>True iff the other iterator refers to the same list element as this iterator.</dd>
</dl>
<p>All operations run in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time.</p>
</div>
<h3><span class="mw-headline" id="Doubly_Linked_List_Implementation">Doubly Linked List Implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-7" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div style="clear: both"></div>
<table style="background: #ffd; border: 1px solid #aaaaaa; padding: 6pt; margin: 12pt 8%; width: 60%; margin: auto;" class="notice noprint notice-todo">
<tr>
<td style="width: 58px;">
<div class="floatleft"><img alt="Clipboard" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/45px-Clipboard.svg.png" width="45" height="45" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/68px-Clipboard.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/90px-Clipboard.svg.png 2x" data-file-width="48" data-file-height="48" /></div>
</td>
<td>
<p><b>To do:</b><br />
Explain this: It is part of linked lists that can show the connectivity between the list.</p>
</td>
</tr>
</table>
<div style="clear: both"></div>
<h3><span class="mw-headline" id="Vector_Implementation">Vector Implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-8" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The vector we've already seen has a perfectly adequate implementation to be a Bidirectional List. All we need to do is add the extra member functions to it and its iterator; the old ones don't have to change.</p>
<pre>
type Vector&lt;item-type&gt;
  ... # already-existing data and methods
</pre>
<p>Implement this in terms of the original <code>insert-after()</code> method. After that runs, we have to adjust <var>iter</var>'s index so that it still refers to the same element.</p>
<pre>
  method insert(iter:Bidirectional List Iterator&lt;item-type&gt;, <var>new-item</var>:item-type)
    insert-after(new Vector-Iterator(iter.array, iter.index-1))
    iter.move-next()
  end method
</pre>
<p>Also implement this on in terms of an old function. After <code>remove-after()</code> runs, the index will already be correct.</p>
<pre>
  method remove(iter:Bidirectional List Iterator&lt;item-type&gt;)
    remove-after(new Vector-Iterator(iter.array, iter.index-1))
  end method
end type
</pre>
<h3><span class="mw-headline" id="Tradeoffs">Tradeoffs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-9" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div style="clear: both"></div>
<table style="background: #ffd; border: 1px solid #aaaaaa; padding: 6pt; margin: 12pt 8%; width: 60%; margin: auto;" class="notice noprint notice-todo">
<tr>
<td style="width: 58px;">
<div class="floatleft"><img alt="Clipboard" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/45px-Clipboard.svg.png" width="45" height="45" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/68px-Clipboard.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/90px-Clipboard.svg.png 2x" data-file-width="48" data-file-height="48" /></div>
</td>
<td>
<p><b>To do:</b><br />
Refactor useful information from below into above</p>
<pre>
following outline from talk page:
 Common list operations &amp; example
   set(pos, val), get(pos), remove(pos), append(val)
     [Perhaps discuss operations on Nodes, versus operations on the List
     itself: example, Nodes have a next operation, but the List itself has
     a pointer to the head and tail node, and an integer for the number of
     elements. This view would work well in both the Lisp and OO worlds.]
 Doubley linked list
 Vectors (resizeable arrays)
</pre></td>
</tr>
</table>
<div style="clear: both"></div>
<p>In order to choose the correct data structure for the job, we need to have some idea of what we're going to *do* with the data.</p>
<ul>
<li>Do we know that we'll never have more than 100 pieces of data at any one time, or do we need to occasionally handle gigabytes of data&#160;?</li>
<li>How will we read the data out&#160;? Always in chronological order&#160;? Always sorted by name&#160;? Randomly accessed by record number&#160;?</li>
<li>Will we always add/delete data to the end or to the beginning&#160;? Or will we be doing a lot of insertions and deletions in the middle&#160;?</li>
</ul>
<p>We must strike a balance between the various requirements. If we need to frequently read data out in 3 different ways, pick a data structure that allows us to do all 3 things not-too-slowly. Don't pick some data structure that's unbearably slow for *one* way, no matter how blazingly fast it is for the other ways.</p>
<p>Often the shortest, simplest programming solution for some task will use a linear (1D) array.</p>
<p>If we keep our data as an ADT, that makes it easier to temporarily switch to some other underlying data structure, and objectively measure whether it's faster or slower.</p>
<h3><span class="mw-headline" id="Advantages_.2F_Disadvantages">Advantages / Disadvantages</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/List_Structures&amp;action=edit&amp;section=T-10" title="Data Structures/List Structures">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>For the most part, an advantage of an array is a disadvantage of a linked-list, and vice versa.</p>
<ul>
<li>Array Advantages (vs. Link-Lists)</li>
</ul>
<ol>
<li><i>Index</i> - <b>Fast access to every element in the array using an index []</b>, not so with linked list where elements in beginning must be traversed to your desired element.</li>
<li><i>Faster</i> - In general, It is <b>faster to access an element in an array</b> than accessing an element in a linked-list.</li>
</ol>
<ul>
<li>Link-Lists Advantages (vs. Arrays)</li>
</ul>
<ol>
<li><i>Resize</i> - <b>Can easily resize the link-list by adding elements</b> without affecting the majority of the other elements in the link-list.</li>
<li><i>Insertion</i> - <b>Can easily insert an element in the middle of a linked-list,</b> (the element is created and then you code pointers to link this element to the other element(s) in the link-list).</li>
</ol>
<p>Side-note: - <b>How to insert an element in the middle of an array</b>. If an array is not full, you take all the elements <b>after</b> the spot or index in the array you want to insert, and move them forward by 1, then insert your element. If the array is already full and you want to insert an element, you would have to, in a sense, 'resize the array.' A new array would have to be made one size larger than the original array to insert your element, then all the elements of the original array are copied to the new array taking into consideration the spot or index to insert your element, then insert your element.</p>
<hr />
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<div style="clear: both"></div>
<table style="background: #ffd; border: 1px solid #aaaaaa; padding: 6pt; margin: 12pt 8%; width: 60%; margin: auto;" class="notice noprint notice-todo">
<tr>
<td style="width: 58px;">
<div class="floatleft"><img alt="Clipboard" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/45px-Clipboard.svg.png" width="45" height="45" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/68px-Clipboard.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/90px-Clipboard.svg.png 2x" data-file-width="48" data-file-height="48" /></div>
</td>
<td>
<p><b>To do:</b><br />
queue implemented as an array: circular and fixed-sized</p>
</td>
</tr>
</table>
<div style="clear: both"></div>
<h2><span class="mw-headline" id="Stacks_and_Queues">Stacks and Queues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-1" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Stacks">Stacks</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-2" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A stack is a basic data structure that can be logically thought as linear structure represented by a real physical stack or pile, a structure where insertion and deletion of items takes place at one end called top of the stack. The basic concept can be illustrated by thinking of your data set as a stack of plates or books where you can only take the top item off the stack in order to remove things from it. This structure is used all throughout programming.</p>
<p>The basic implementation of a stack is also called a LIFO (Last In First Out) to demonstrate the way it accesses data, since as we will see there are various variations of stack implementations.</p>
<p>There are basically three operations that can be performed on stacks . They are 1) inserting an item into a stack (push). 2) deleting an item from the stack (pop). 3) displaying the contents of the stack(pip).</p>
<div style="clear: both"></div>
<p><a href="/wiki/File:Data_stack.svg" class="image"><img alt="Data stack.svg" src="//upload.wikimedia.org/wikipedia/commons/thumb/2/29/Data_stack.svg/391px-Data_stack.svg.png" width="391" height="281" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/2/29/Data_stack.svg/587px-Data_stack.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/2/29/Data_stack.svg/782px-Data_stack.svg.png 2x" data-file-width="391" data-file-height="281" /></a></p>
<table class="notice notice-note noprint" style="background: #f2fff2; border: solid 1px #bfffbf; padding: 0.5em; width: 95%; margin: auto; vertical-align: top; -moz-border-radius:10px;">
<tr>
<td>
<p><b>Note:</b><br />
Depending on the language and implementation the data structure may share the name with an abstract data type that support all of the data structure characteristics.</p>
</td>
</tr>
</table>
<p>Below are some of operations a <b>stack data type</b> normally supports:</p>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; width:80%" title="Stack&lt;item-type&gt; Operations">
<p><b><code>Stack&lt;item-type&gt;</code> Operations</b></p>
<dl>
<dt style="font-weight:normal"><code><b>push</b>(<var>new-item</var>:item-type)</code></dt>
<dd>Adds an item onto the stack.</dd>
<dt style="font-weight:normal"><code><b>top</b>():item-type</code></dt>
<dd>Returns the last item pushed onto the stack.</dd>
<dt style="font-weight:normal"><code><b>pop</b>()</code></dt>
<dd>Removes the most-recently-pushed item from the stack.</dd>
<dt style="font-weight:normal"><code><b>is-empty</b>():Boolean</code></dt>
<dd>True if no more items can be popped and there is no top item.</dd>
<dt style="font-weight:normal"><code><b>is-full</b>():Boolean</code></dt>
<dd>True if no more items can be pushed.</dd>
<dt style="font-weight:normal"><code><b>get-size</b>():Integer</code></dt>
<dd>Returns the number of elements on the stack.</dd>
</dl>
<p>All operations except <code>get-size()</code> can be performed in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time. <code>get-size()</code> runs in at worst <img class="mwe-math-fallback-image-inline tex" alt="O(N)." src="//upload.wikimedia.org/math/e/4/7/e472b7d37456fd24e8f5f7208475262b.png" /></p>
</div>
<p><br /></p>
<h4><span class="mw-headline" id="Linked_List_Implementation">Linked List Implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-3" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The basic linked list implementation is one of the easiest linked list implementations you can do. Structurally it is a linked list.</p>
<pre>
type Stack&lt;item_type&gt;
  data list:Singly Linked List&lt;item_type&gt;

  constructor()
    list := new Singly-Linked-List()
  end constructor
</pre>
<p>Most operations are implemented by passing them through to the underlying linked list. When you want to <b>push</b> something onto the list, you simply add it to the front of the linked list. The previous top is then "next" from the item being added and the list's front pointer points to the new item.</p>
<pre>
  method push(new_item:item_type)
    list.prepend(new_item)
  end method
</pre>
<p>To look at the <b>top</b> item, you just examine the first item in the linked list.</p>
<pre>
  method top():item_type
    return list.get-begin().get-value()
  end method
</pre>
<p>When you want to <b>pop</b> something off the list, simply remove the first item from the linked list.</p>
<pre>
  method pop()
    list.remove-first()
  end method
</pre>
<p>A check for emptiness is easy. Just check if the list is empty.</p>
<pre>
  method is-empty():Boolean
    return list.is-empty()
  end method
</pre>
<p>A check for full is simple. Linked lists are considered to be limitless in size.</p>
<pre>
  method is-full():Boolean
    return False
  end method
</pre>
<p>A check for the size is again passed through to the list.</p>
<pre>
  method get-size():Integer
    return list.get-size()
  end method
end type
</pre>
<p>A real Stack implementation in a published library would probably re-implement the linked list in order to squeeze the last bit of performance out of the implementation by leaving out unneeded functionality. The above implementation gives you the ideas involved, and any optimization you need can be accomplished by inlining the linked list code.</p>
<p><br /></p>
<h5><span class="mw-headline" id="Performance_Analysis">Performance Analysis</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-4" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>In a linked list, accessing the first element is an <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> operation because the list contains a pointer that checks for empty/fullness as done here are also <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" />. depending on what time/space tradeoff is made. Most of the time, users of a Stack do not use the <code>getSize()</code> operation, and so a bit of space can be saved by not optimizing it.</p>
<p>Since all operations are at the top of the stack, the array implementation is now much, much better.</p>
<pre>
  public class StackArray implements Stack
  {
      protected int top;
      protected Object[] data;
      ...
  }
</pre>
<p>The array implementation keeps the bottom of the stack at the beginning of the array. It grows toward the end of the array. The only problem is if you attempt to push an element when the array is full. If so</p>
<pre>
   Assert.pre(!isFull(),"Stack is not full.");
</pre>
<p>will fail, raising an exception. Thus it makes more sense to implement with Vector (see StackVector) to allow unbounded growth (at cost of occasional O(n) delays).</p>
<p>Complexity:</p>
<p>All operations are O(1) with exception of occasional push and clear, which should replace all entries by null in order to let them be garbage-collected. Array implementation does not replace null entries. The Vector implementation does.</p>
<h3><span class="mw-headline" id="Applications_of_Stacks">Applications of Stacks</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-5" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="thumb tright">
<div class="thumbinner" style="width:222px;"><a href="/wiki/File:Stack_of_books.jpg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Stack_of_books.jpg/220px-Stack_of_books.jpg" width="220" height="165" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Stack_of_books.jpg/330px-Stack_of_books.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Stack_of_books.jpg/440px-Stack_of_books.jpg 2x" data-file-width="3264" data-file-height="2448" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Stack_of_books.jpg" class="internal" title="Enlarge"></a></div>
Stack of books</div>
</div>
</div>
<p>Using stacks, we can solve many applications, some of which are listed below.</p>
<p><br /></p>
<p><br /></p>
<p><br /></p>
<p><br /></p>
<p><br /></p>
<h4><span class="mw-headline" id="Converting_a_decimal_number_into_a_binary_number">Converting a decimal number into a binary number</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-6" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The logic for transforming a decimal number into a binary number is as follows:</p>
<pre>
    * Read a number
    * Iteration (while number is greater than zero)
              1. Find out the remainder after dividing the number by 2
              2. Print the remainder
              3. Divide the number by 2
    * End the iteration
</pre>
<p>However, there is a problem with this logic. Suppose the number, whose binary form we want to find is 23. Using this logic, we get the result as 11101, instead of getting 10111.</p>
<p>To solve this problem, we use a stack. We make use of the <i>LIFO</i> property of the stack. Initially we <i>push</i> the binary digit formed into the stack, instead of printing it directly. After the entire digit has been converted into the binary form, we <i>pop</i> one digit at a time from the stack and print it. Therefore we get the decimal number is converted into its proper binary form.</p>
<p><b>Algorithm:</b></p>
<pre>
   1. Create a stack
   2. Enter a decimal number, which has to be converted into its equivalent binary form.
   3. iteration1 (while number &gt; 0)
         3.1 digit = number % 2
         3.2 Push <i>digit</i> into the stack
         3.3 If the stack is full
              3.3.1 Print an error
              3.3.2 Stop the algorithm
         3.4 End the <i>if</i> condition
         3.5 Divide the number by 2
   4. End <i>iteration1</i>
   
   5. iteration2 (while stack is not empty)
         5.1 Pop <i>digit</i> from the stack
         5.2 Print the <i>digit</i>
   6. End iteration2
   7. STOP
</pre>
<h4><span class="mw-headline" id="Towers_of_Hanoi">Towers of Hanoi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-7" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<div class="thumb tright">
<div class="thumbinner" style="width:302px;"><a href="/wiki/File:Tower_of_Hanoi.jpeg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/07/Tower_of_Hanoi.jpeg/300px-Tower_of_Hanoi.jpeg" width="300" height="132" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/0/07/Tower_of_Hanoi.jpeg/450px-Tower_of_Hanoi.jpeg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/0/07/Tower_of_Hanoi.jpeg/600px-Tower_of_Hanoi.jpeg 2x" data-file-width="677" data-file-height="298" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Tower_of_Hanoi.jpeg" class="internal" title="Enlarge"></a></div>
Towers of Hanoi</div>
</div>
</div>
<p>One of the most interesting applications of stacks can be found in solving a puzzle called Tower of Hanoi. According to an old Brahmin story, the existence of the universe is calculated in terms of the time taken by a number of monks, who are working all the time, to move 64 disks from one pole to another. But there are some rules about how this should be done, which are:</p>
<ol>
<li>You can move only one disk at a time.</li>
<li>For temporary storage, a third pole may be used.</li>
<li>You cannot place a disk of larger diameter on a disk of smaller diameter.<sup id="cite_ref-Dromey_1-0" class="reference"><a href="#cite_note-Dromey-1">[1]</a></sup></li>
</ol>
<p>Here we assume that A is first tower, B is second tower &amp; C is third tower.</p>
<div class="thumb tleft">
<div class="thumbinner" style="width:377px;"><a href="/wiki/File:Towersofhanoi1.pdf" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/8/87/Towersofhanoi1.pdf/page1-375px-Towersofhanoi1.pdf.jpg" width="375" height="485" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/8/87/Towersofhanoi1.pdf/page1-563px-Towersofhanoi1.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/8/87/Towersofhanoi1.pdf/page1-750px-Towersofhanoi1.pdf.jpg 2x" data-file-width="1275" data-file-height="1650" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Towersofhanoi1.pdf" class="internal" title="Enlarge"></a></div>
Towers of Hanoi step 1</div>
</div>
</div>
<div class="center">
<div class="thumb tnone">
<div class="thumbinner" style="width:377px;"><a href="/wiki/File:Towersofhanoi2.pdf" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/19/Towersofhanoi2.pdf/page1-375px-Towersofhanoi2.pdf.jpg" width="375" height="485" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/19/Towersofhanoi2.pdf/page1-563px-Towersofhanoi2.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/19/Towersofhanoi2.pdf/page1-750px-Towersofhanoi2.pdf.jpg 2x" data-file-width="1275" data-file-height="1650" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Towersofhanoi2.pdf" class="internal" title="Enlarge"></a></div>
Towers of Hanoi step 2</div>
</div>
</div>
</div>
<div class="thumb tleft">
<div class="thumbinner" style="width:377px;"><a href="/wiki/File:Towersofhanoi3.pdf" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Towersofhanoi3.pdf/page1-375px-Towersofhanoi3.pdf.jpg" width="375" height="485" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Towersofhanoi3.pdf/page1-563px-Towersofhanoi3.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Towersofhanoi3.pdf/page1-750px-Towersofhanoi3.pdf.jpg 2x" data-file-width="1275" data-file-height="1650" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Towersofhanoi3.pdf" class="internal" title="Enlarge"></a></div>
Towers of Hanoi step 3</div>
</div>
</div>
<p><br /></p>
<div class="center">
<div class="thumb tnone">
<div class="thumbinner" style="width:377px;"><a href="/wiki/File:Towersofhanoi4.pdf" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Towersofhanoi4.pdf/page1-375px-Towersofhanoi4.pdf.jpg" width="375" height="485" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Towersofhanoi4.pdf/page1-563px-Towersofhanoi4.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Towersofhanoi4.pdf/page1-750px-Towersofhanoi4.pdf.jpg 2x" data-file-width="1275" data-file-height="1650" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Towersofhanoi4.pdf" class="internal" title="Enlarge"></a></div>
Towers of Hanoi step 4</div>
</div>
</div>
</div>
<p><br /></p>
<div class="thumb tright">
<div class="thumbinner" style="width:352px;"><a href="/wiki/File:Towerofhanoi.jpg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/3/31/Towerofhanoi.jpg/350px-Towerofhanoi.jpg" width="350" height="702" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/3/31/Towerofhanoi.jpg/525px-Towerofhanoi.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/3/31/Towerofhanoi.jpg/700px-Towerofhanoi.jpg 2x" data-file-width="1360" data-file-height="2726" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Towerofhanoi.jpg" class="internal" title="Enlarge"></a></div>
Tower of Hanoi</div>
</div>
</div>
<p><b>Output&#160;: (when there are 3 disks)</b></p>
<p>Let <i>1</i> be the smallest disk, <i>2</i> be the disk of medium size and <i>3</i> be the largest disk.</p>
<table class="wikitable sortable">
<tr>
<th>Move disk</th>
<th>From peg</th>
<th>To peg</th>
</tr>
<tr>
<td>1</td>
<td>A</td>
<td>C</td>
</tr>
<tr>
<td>2</td>
<td>A</td>
<td>B</td>
</tr>
<tr>
<td>1</td>
<td>C</td>
<td>B</td>
</tr>
<tr>
<td>3</td>
<td>A</td>
<td>C</td>
</tr>
<tr>
<td>1</td>
<td>B</td>
<td>A</td>
</tr>
<tr>
<td>2</td>
<td>B</td>
<td>C</td>
</tr>
<tr>
<td>1</td>
<td>A</td>
<td>C</td>
</tr>
</table>
<p><b>Output&#160;: (when there are 4 disks)</b></p>
<table class="wikitable sortable">
<tr>
<th>Move disk</th>
<th>From peg</th>
<th>To peg</th>
</tr>
<tr>
<td>1</td>
<td>A</td>
<td>B</td>
</tr>
<tr>
<td>2</td>
<td>A</td>
<td>C</td>
</tr>
<tr>
<td>1</td>
<td>B</td>
<td>C</td>
</tr>
<tr>
<td>3</td>
<td>A</td>
<td>B</td>
</tr>
<tr>
<td>1</td>
<td>C</td>
<td>A</td>
</tr>
<tr>
<td>2</td>
<td>C</td>
<td>B</td>
</tr>
<tr>
<td>1</td>
<td>A</td>
<td>B</td>
</tr>
<tr>
<td>4</td>
<td>A</td>
<td>C</td>
</tr>
<tr>
<td>1</td>
<td>B</td>
<td>C</td>
</tr>
<tr>
<td>2</td>
<td>B</td>
<td>A</td>
</tr>
<tr>
<td>1</td>
<td>C</td>
<td>A</td>
</tr>
<tr>
<td>3</td>
<td>B</td>
<td>C</td>
</tr>
<tr>
<td>1</td>
<td>A</td>
<td>B</td>
</tr>
<tr>
<td>2</td>
<td>A</td>
<td>C</td>
</tr>
<tr>
<td>1</td>
<td>B</td>
<td>C</td>
</tr>
</table>
<p>The C++ code for this solution can be implemented in two ways:</p>
<h5><span class="mw-headline" id="First_Implementation_.28Without_using_Stacks.29">First Implementation (Without using Stacks)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-8" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Here we assume that A is first tower, B is second tower &amp; C is third tower. (B is the intermediate)</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="c source-c">
<pre class="de1">
<span class="kw4">void</span> TowersofHanoi<span class="br0">(</span><span class="kw4">int</span> n<span class="sy0">,</span> <span class="kw4">int</span> a<span class="sy0">,</span> <span class="kw4">int</span> b<span class="sy0">,</span> <span class="kw4">int</span> c<span class="br0">)</span>
<span class="br0">{</span>
    <span class="co1">//Move top n disks from tower a to tower b, use tower c for intermediate storage.</span>
    <span class="kw1">if</span><span class="br0">(</span>n <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span>
    <span class="br0">{</span>
        TowersofHanoi<span class="br0">(</span>n<span class="sy0">-</span><span class="nu0">1</span><span class="sy0">,</span> a<span class="sy0">,</span> c<span class="sy0">,</span> b<span class="br0">)</span><span class="sy0">;</span>   <span class="co1">//recursion</span>
        cout <span class="sy0">&lt;&lt;</span> <span class="st0">" Move top disk from tower "</span> <span class="sy0">&lt;&lt;</span> a <span class="sy0">&lt;&lt;</span> <span class="st0">" to tower "</span> <span class="sy0">&lt;&lt;</span> b <span class="sy0">&lt;&lt;</span> endl <span class="sy0">;</span>
        <span class="co1">//Move n-1 disks from intermediate(b) to the source(a) back</span>
        TowersofHanoi<span class="br0">(</span>n<span class="sy0">-</span><span class="nu0">1</span><span class="sy0">,</span> c<span class="sy0">,</span> b<span class="sy0">,</span> a<span class="br0">)</span><span class="sy0">;</span>   <span class="co1">//recursion</span>
    <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<p><sup id="cite_ref-ReferenceA_2-0" class="reference"><a href="#cite_note-ReferenceA-2">[2]</a></sup></p>
<h5><span class="mw-headline" id="Second_Implementation_.28Using_Stacks.29">Second Implementation (Using Stacks)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-9" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="c source-c">
<pre class="de1">
<span class="co1">// Global variable , tower [1:3] are three towers</span>
arrayStack<span class="sy0">&lt;</span>int<span class="sy0">&gt;</span> tower<span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span><span class="sy0">;</span>
<span class="kw4">void</span> TowerofHanoi<span class="br0">(</span><span class="kw4">int</span> n<span class="br0">)</span>
<span class="br0">{</span>
    <span class="co1">// Preprocessor for moveAndShow.</span>
    <span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> d <span class="sy0">=</span> n<span class="sy0">;</span> d <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="sy0">;</span> d<span class="sy0">--</span><span class="br0">)</span>        <span class="co1">//initialize</span>
        tower<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>.<span class="me1">push</span><span class="br0">(</span>d<span class="br0">)</span><span class="sy0">;</span>              <span class="co1">//add disk d to tower 1</span>
    moveAndShow<span class="br0">(</span>n<span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span>           <span class="coMULTI">/*move n disks from tower 1 to tower 3 using 
                                       tower 2 as intermediate tower*/</span>  
<span class="br0">}</span>
 
<span class="kw4">void</span> moveAndShow<span class="br0">(</span><span class="kw4">int</span> n<span class="sy0">,</span> <span class="kw4">int</span> a<span class="sy0">,</span> <span class="kw4">int</span> b<span class="sy0">,</span> <span class="kw4">int</span> c<span class="br0">)</span>
<span class="br0">{</span>
    <span class="co1">// Move the top n disks from tower a to tower b showing states.</span>
    <span class="co1">// Use tower c for intermediate storage.</span>
    <span class="kw1">if</span><span class="br0">(</span>n <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span>
    <span class="br0">{</span>
        moveAndShow<span class="br0">(</span>n<span class="sy0">-</span><span class="nu0">1</span><span class="sy0">,</span> a<span class="sy0">,</span> c<span class="sy0">,</span> b<span class="br0">)</span><span class="sy0">;</span>     <span class="co1">//recursion</span>
        <span class="kw4">int</span> d <span class="sy0">=</span> tower<span class="br0">[</span>x<span class="br0">]</span>.<span class="me1">top</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>        <span class="co1">//move a disc from top of tower x to top of </span>
        tower<span class="br0">[</span>x<span class="br0">]</span>.<span class="me1">pop</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>                <span class="co1">//tower y</span>
        tower<span class="br0">[</span>y<span class="br0">]</span>.<span class="me1">push</span><span class="br0">(</span>d<span class="br0">)</span><span class="sy0">;</span>
        showState<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>                   <span class="co1">//show state of 3 towers</span>
        moveAndShow<span class="br0">(</span>n<span class="sy0">-</span><span class="nu0">1</span><span class="sy0">,</span> c<span class="sy0">,</span> b<span class="sy0">,</span> a<span class="br0">)</span><span class="sy0">;</span>     <span class="co1">//recursion</span>
    <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>However complexity for above written implementations is O(<img class="mwe-math-fallback-image-inline tex" alt="2^n" src="//upload.wikimedia.org/math/9/a/a/9aa0ec0374c89d2f7f3d9cd2e05a4bc5.png" />). So it's obvious that problem can only be solved for small values of n (generally n &lt;= 30). In case of the monks, the number of turns taken to transfer 64 disks, by following the above rules, will be 18,446,744,073,709,551,615; which will surely take a lot of time!!</p>
<p><sup id="cite_ref-Dromey_1-1" class="reference"><a href="#cite_note-Dromey-1">[1]</a></sup></p>
<p><sup id="cite_ref-ReferenceA_2-1" class="reference"><a href="#cite_note-ReferenceA-2">[2]</a></sup></p>
<h4><span class="mw-headline" id="Expression_evaluation_and_syntax_parsing">Expression evaluation and syntax parsing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-10" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Calculators employing <a href="//en.wikipedia.org/wiki/reverse_Polish_notation" class="extiw" title="w:reverse Polish notation">reverse Polish notation</a> use a stack structure to hold values. Expressions can be represented in prefix, postfix or infix notations. Conversion from one form of the expression to another form may be accomplished using a stack. Many compilers use a stack for parsing the syntax of expressions, program blocks etc. before translating into low level code. Most of the programming languages are <a href="//en.wikipedia.org/wiki/context-free_grammar" class="extiw" title="w:context-free grammar">context-free languages</a> allowing them to be parsed with stack based machines.</p>
<h5><span class="mw-headline" id="Evaluation_of_an_Infix_Expression_that_is_Fully_Parenthesized">Evaluation of an Infix Expression that is Fully Parenthesized</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-11" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p><b>Input:</b> (((2 * 5) - (1 * 2)) / (11 - 9))</p>
<p><b>Output:</b> 4</p>
<p><b>Analysis:</b> Five types of input characters</p>
<pre>
  * Opening bracket
  * Numbers
  * Operators
  * Closing bracket
  * New line character
</pre>
<p><b>Data structure requirement:</b> A character stack</p>
<p><b>Algorithm</b></p>
<pre>
  1. Read one input character
  2. Actions at end of each input
     Opening brackets              (2.1)  <i>Push</i> into stack and then Go to step (1)
     Number                        (2.2)  <i>Push</i> into stack and then Go to step (1)
     Operator                      (2.3)  <i>Push</i> into stack and then Go to step (1)
     Closing brackets              (2.4)  <i>Pop</i> it from character stack
                                   (2.4.1) if it is opening bracket, then discard it, Go to step (1)
                                   (2.4.2) <i>Pop</i> is used three times
                                           The first popped element is assigned to op2
                                           The second popped element is assigned to op
                                           The third popped element is assigned to op1
                                           Evaluate op1 op op2
                                           Convert the result into character and 
                                           <i>push</i> into the stack
                                           Go to step (2.4)
    New line character            (2.5)  <i>Pop</i> from stack and print the answer
                                         <i>STOP</i>
</pre>
<p><b>Result:</b> The evaluation of the fully parenthesized infix expression is printed on the monitor as follows:</p>
<p><b>Input String:</b> (((2 * 5) - (1 * 2)) / (11 - 9))</p>
<table class="wikitable sortable">
<tr>
<th>Input Symbol</th>
<th>Stack (from bottom to top)</th>
<th>Operation</th>
</tr>
<tr>
<td>(</td>
<td>(</td>
<td></td>
</tr>
<tr>
<td>(</td>
<td>( (</td>
<td></td>
</tr>
<tr>
<td>(</td>
<td>( ( (</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>( ( ( 2</td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>( ( ( 2 *</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td></td>
<td>( ( ( 2 * 5</td>
</tr>
<tr>
<td>)</td>
<td>( ( 10</td>
<td>2 * 5 = 10 and <i>push</i></td>
</tr>
<tr>
<td>-</td>
<td>( ( 10 -</td>
<td></td>
</tr>
<tr>
<td>(</td>
<td>( ( 10 - (</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>( ( 10 - ( 1</td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>( ( 10 - ( 1 *</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>( ( 10 - ( 1 * 2</td>
<td></td>
</tr>
<tr>
<td>)</td>
<td>( ( 10 - 2</td>
<td>1 * 2 = 2 &amp; <i>Push</i></td>
</tr>
<tr>
<td>)</td>
<td>( 8</td>
<td>10 - 2 = 8 &amp; <i>Push</i></td>
</tr>
<tr>
<td>/</td>
<td>( 8 /</td>
<td></td>
</tr>
<tr>
<td>(</td>
<td>( 8 / (</td>
<td></td>
</tr>
<tr>
<td>11</td>
<td>( 8 / ( 11</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>( 8 / ( 11 -</td>
<td></td>
</tr>
<tr>
<td>9</td>
<td>( 8 / ( 11 - 9</td>
<td></td>
</tr>
<tr>
<td>)</td>
<td>( 8 / 2</td>
<td>11 - 9 = 2 &amp; <i>Push</i></td>
</tr>
<tr>
<td>)</td>
<td>4</td>
<td>8 / 2 = 4 &amp; <i>Push</i></td>
</tr>
<tr>
<td>New line</td>
<td>Empty</td>
<td><i>Pop</i> &amp; Print</td>
</tr>
</table>
<p><b>C Program</b></p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="c source-c">
<pre class="de1">
<span class="kw4">int</span> main <span class="br0">(</span><span class="kw4">int</span> argc<span class="sy0">,</span> <span class="kw4">char</span> <span class="sy0">*</span>argv<span class="br0">[</span><span class="br0">]</span><span class="br0">)</span>
<span class="br0">{</span>
     <span class="kw4">struct</span> ch <span class="sy0">*</span>charactop<span class="sy0">;</span>
     <span class="kw4">struct</span> integer <span class="sy0">*</span>integertop<span class="sy0">;</span>
     <span class="kw4">char</span> rd<span class="sy0">,</span> op<span class="sy0">;</span>
     <span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> op1<span class="sy0">,</span> op2<span class="sy0">;</span>
     charactop <span class="sy0">=</span> cclearstack<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     integertop <span class="sy0">=</span> iclearstack<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     <span class="kw1">while</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>
     <span class="br0">{</span>
         rd <span class="sy0">=</span> argv<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span>i<span class="sy0">++</span><span class="br0">]</span><span class="sy0">;</span>
         <span class="kw1">switch</span><span class="br0">(</span>rd<span class="br0">)</span>
         <span class="br0">{</span>
             <span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span>
             <span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span>
             <span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span>
             <span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span>
             <span class="kw1">case</span> <span class="st0">'('</span><span class="sy0">:</span> charactop <span class="sy0">=</span> cpush<span class="br0">(</span>charactop<span class="sy0">,</span> rd<span class="br0">)</span><span class="sy0">;</span>
             <span class="kw2">break</span><span class="sy0">;</span>
             <span class="kw1">case</span> <span class="st0">')'</span><span class="sy0">:</span> integertop <span class="sy0">=</span> ipop <span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                       charactop <span class="sy0">=</span> cpop <span class="br0">(</span>charactop<span class="sy0">,</span> <span class="sy0">&amp;</span>op<span class="br0">)</span><span class="sy0">;</span>
                       <span class="kw1">while</span><span class="br0">(</span>op <span class="sy0">!=</span> <span class="st0">'('</span><span class="br0">)</span>
                       <span class="br0">{</span>
                           integertop <span class="sy0">=</span> ipush <span class="br0">(</span>integertop<span class="sy0">,</span> eval<span class="br0">(</span>op<span class="sy0">,</span> op1<span class="sy0">,</span> op2<span class="br0">)</span><span class="sy0">;</span>
                           charactop <span class="sy0">=</span> cpop <span class="br0">(</span>charactop<span class="sy0">,</span> <span class="sy0">&amp;</span>op<span class="br0">)</span><span class="sy0">;</span>
                           <span class="kw1">if</span> <span class="br0">(</span>op <span class="sy0">!=</span> <span class="st0">'('</span><span class="br0">)</span>
                           <span class="br0">{</span>
                               integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op2<span class="br0">)</span><span class="sy0">;</span>
                               integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                           <span class="br0">}</span>
                       <span class="br0">}</span>
                       <span class="kw2">break</span><span class="sy0">;</span>
            <span class="kw1">case</span> <span class="st0">'<span class="es5">\0</span>'</span><span class="sy0">:</span> <span class="kw1">while</span> <span class="br0">(</span><span class="sy0">!=</span> cemptystack<span class="br0">(</span>charactop<span class="br0">)</span><span class="br0">)</span>
                       <span class="br0">{</span>
                           charactop <span class="sy0">=</span> cpop<span class="br0">(</span>charactop<span class="sy0">,</span> <span class="sy0">&amp;</span>op<span class="br0">)</span><span class="sy0">;</span>
                           integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op2<span class="br0">)</span><span class="sy0">;</span>
                           integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                           integertop <span class="sy0">=</span> ipush<span class="br0">(</span>integertop<span class="sy0">,</span> eval<span class="br0">(</span>op<span class="sy0">,</span> op1<span class="sy0">,</span> op2<span class="br0">)</span><span class="sy0">;</span>
                       <span class="br0">}</span>
                       integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                       <span class="kw3">printf</span><span class="br0">(</span><span class="st0">"<span class="es1">\n</span> The final solution is: %d"</span><span class="sy0">,</span> op1<span class="br0">)</span><span class="sy0">;</span>
                       <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span>
           <span class="kw1">default</span><span class="sy0">:</span> integertop <span class="sy0">=</span> ipush<span class="br0">(</span>integertop<span class="sy0">,</span> rd <span class="sy0">-</span> <span class="st0">'0'</span><span class="br0">)</span><span class="sy0">;</span>
           <span class="br0">}</span>
      <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw4">int</span> eval<span class="br0">(</span><span class="kw4">char</span> op<span class="sy0">,</span> <span class="kw4">int</span> op1<span class="sy0">,</span> <span class="kw4">int</span> op2<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">switch</span> <span class="br0">(</span>op<span class="br0">)</span>
    <span class="br0">{</span>
         <span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">+</span> op2<span class="sy0">;</span>
         <span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">-</span> op2<span class="sy0">;</span>
         <span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">/</span> op2<span class="sy0">;</span>
         <span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">*</span> op2<span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<p><b>Output of the program:</b></p>
<p>Input entered at the command line: (((2 * 5) - (1 * 2) / (11 - 9)) <sup id="cite_ref-Gopal_3-0" class="reference"><a href="#cite_note-Gopal-3">[3]</a></sup></p>
<h5><span class="mw-headline" id="Evaluation_of_Infix_Expression_which_is_not_fully_parenthesized">Evaluation of Infix Expression which is not fully parenthesized</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-12" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p><b>Input:</b> (2 * 5 - 1 * 2) / (11 - 9)</p>
<p><b>Output:</b> 4</p>
<p><b>Analysis:</b> There are five types of input characters which are:</p>
<pre>
               * Opening brackets
               * Numbers
               * Operators
               * Closing brackets
               * New line character (\n)
</pre>
<p>We do not know what to do if an operator is read as an input character. By implementing the priority rule for operators, we have a solution to this problem.</p>
<p>The <i>Priority rule</i> we should perform comparative priority check if an operator is read, and then push it. If the stack <i>top</i> contains an operator of prioirty higher than or equal to the priority of the input operator, then we <i>pop</i> it and print it. We keep on perforrming the prioirty check until the <i>top</i> of stack either contains an operator of lower priority or if it does not contain an operator.</p>
<p><b>Data Structure Requirement for this problem:</b> A character stack and an integer stack</p>
<p><b>Algorithm:</b></p>
<pre>
   1. Read an input character
   2. Actions that will be performed at the end of each input
      Opening brackets              (2.1)  <i>Push</i> it into stack and then Go to step (1)  
      Digit                         (2.2)  <i>Push</i> into stack, Go to step (1)
      Operator                      (2.3)  Do the comparative priority check
                                    (2.3.1) if the character stack's <i>top</i> contains an operator with equal
                                             or higher priority, then <i>pop</i> it into op
                                             <i>Pop</i> a number from integer stack into op2
                                             <i>Pop</i> another number from integer stack into op1
                                           Calculate op1 op op2 and <i>push</i> the result into the integer
                                           stack
     Closing brackets              (2.4)  <i>Pop</i> from the character stack
                                   (2.4.1) if it is an opening bracket, then discard it and Go to
                                           step (1)
                                   (2.4.2) To op, assign the popped element
                                           <i>Pop</i> a number from integer stack and assign it op2
                                           <i>Pop</i> another number from integer stack and assign it
                                           to op1
                                           Calculate <i>op1</i> <i>op</i> <i>op2</i> and push the result into the integer
                                           stack
                                           Convert into character and <i>push</i> into stack
                                           Go to the step (2.4)
    New line character            (2.5)  Print the result after popping from the stack
                                         <i>STOP</i>
</pre>
<p><b>Result:</b> The evaluation of an infix expression that is not fully parenthesized is printed as follows:</p>
<p><b>Input String:</b> (2 * 5 - 1 * 2) / (11 - 9)</p>
<table class="wikitable sortable">
<tr>
<th>Input Symbol</th>
<th>Character Stack (from bottom to top)</th>
<th>Integer Stack (from bottom to top)</th>
<th>Operation performed</th>
</tr>
<tr>
<td>(</td>
<td>(</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>(</td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>( *</td>
<td></td>
<td><i>Push</i> as * has higher priority</td>
</tr>
<tr>
<td>5</td>
<td>( *</td>
<td>2 5</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>( *</td>
<td></td>
<td>Since '-' has less priority, we do 2 * 5 = 10</td>
</tr>
<tr>
<td></td>
<td>( -</td>
<td>10</td>
<td>We push 10 and then push '-'</td>
</tr>
<tr>
<td>1</td>
<td>( -</td>
<td>10 1</td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>( - *</td>
<td>10 1</td>
<td>Push * as it has higher priority</td>
</tr>
<tr>
<td>2</td>
<td>( - *</td>
<td>10 1 2</td>
<td></td>
</tr>
<tr>
<td>)</td>
<td>( -</td>
<td>10 2</td>
<td>Perform 1 * 2 = 2 and push it</td>
</tr>
<tr>
<td></td>
<td>(</td>
<td>8</td>
<td>Pop - and 10 - 2 = 8 and push, Pop (</td>
</tr>
<tr>
<td>/</td>
<td>/</td>
<td>8</td>
<td></td>
</tr>
<tr>
<td>(</td>
<td>/ (</td>
<td>8</td>
<td></td>
</tr>
<tr>
<td>11</td>
<td>/ (</td>
<td>8 11</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>/ ( -</td>
<td>8 11</td>
<td></td>
</tr>
<tr>
<td>9</td>
<td>/ ( -</td>
<td>8 11 9</td>
<td></td>
</tr>
<tr>
<td>)</td>
<td>/</td>
<td>8 2</td>
<td>Perform 11 - 9 = 2 and push it</td>
</tr>
<tr>
<td>New line</td>
<td></td>
<td>4</td>
<td>Perform 8 / 2 = 4 and push it</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>Print the output, which is 4</td>
</tr>
</table>
<p><b>C Program</b></p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="c source-c">
<pre class="de1">
<span class="kw4">int</span> main <span class="br0">(</span><span class="kw4">int</span> argc<span class="sy0">,</span> <span class="kw4">char</span> <span class="sy0">*</span>argv<span class="br0">[</span><span class="br0">]</span><span class="br0">)</span>
<span class="br0">{</span>
     <span class="kw4">struct</span> ch <span class="sy0">*</span>charactop<span class="sy0">;</span>
     <span class="kw4">struct</span> integer <span class="sy0">*</span>integertop<span class="sy0">;</span>
     <span class="kw4">char</span> rd<span class="sy0">,</span> op<span class="sy0">;</span>
     <span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> op1<span class="sy0">,</span> op2<span class="sy0">;</span>
     charactop <span class="sy0">=</span> cclearstack<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     integertop <span class="sy0">=</span> iclearstack<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     <span class="kw1">while</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>
     <span class="br0">{</span>
         rd <span class="sy0">=</span> argv<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span>i<span class="sy0">++</span><span class="br0">]</span><span class="sy0">;</span>
         <span class="kw1">switch</span><span class="br0">(</span>rd<span class="br0">)</span>
         <span class="br0">{</span>
             <span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span>
             <span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span>
             <span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span>
             <span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span> <span class="kw1">while</span> <span class="br0">(</span><span class="br0">(</span>charactop<span class="sy0">-&gt;</span>data <span class="sy0">!=</span> <span class="st0">'('</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="sy0">!</span>cemptystack<span class="br0">(</span>charactop<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
                       <span class="br0">{</span>
                            <span class="kw1">if</span><span class="br0">(</span>priority<span class="br0">(</span>rd<span class="br0">)</span> <span class="sy0">&gt;</span> <span class="br0">(</span>priority<span class="br0">(</span>charactop<span class="sy0">-&gt;</span>data<span class="br0">)</span><span class="br0">)</span>
                                <span class="kw2">break</span><span class="sy0">;</span>
                            <span class="kw1">else</span>
                            <span class="br0">{</span>
                                charactop <span class="sy0">=</span> cpop<span class="br0">(</span>charactop<span class="sy0">,</span> <span class="sy0">&amp;</span>op<span class="br0">)</span><span class="sy0">;</span>
                                integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op2<span class="br0">)</span><span class="sy0">;</span>
                                integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                                integertop <span class="sy0">=</span> ipush<span class="br0">(</span>integertop<span class="sy0">,</span> eval<span class="br0">(</span>op<span class="sy0">,</span> op1<span class="sy0">,</span> op2<span class="br0">)</span><span class="sy0">;</span>
                            <span class="br0">}</span>
                       <span class="br0">}</span>
                       charactop <span class="sy0">=</span> cpush<span class="br0">(</span>charactop<span class="sy0">,</span> rd<span class="br0">)</span><span class="sy0">;</span>
                       <span class="kw2">break</span><span class="sy0">;</span>
             <span class="kw1">case</span> <span class="st0">'('</span><span class="sy0">:</span> charactop <span class="sy0">=</span> cpush<span class="br0">(</span>charactop<span class="sy0">,</span> rd<span class="br0">)</span><span class="sy0">;</span>
             <span class="kw2">break</span><span class="sy0">;</span>
             <span class="kw1">case</span> <span class="st0">')'</span><span class="sy0">:</span> integertop <span class="sy0">=</span> ipop <span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op2<span class="br0">)</span><span class="sy0">;</span>
                       integertop <span class="sy0">=</span> ipop <span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                       charactop <span class="sy0">=</span> cpop <span class="br0">(</span>charactop<span class="sy0">,</span> <span class="sy0">&amp;</span>op<span class="br0">)</span><span class="sy0">;</span>
                       <span class="kw1">while</span><span class="br0">(</span>op <span class="sy0">!=</span> <span class="st0">'('</span><span class="br0">)</span>
                       <span class="br0">{</span>
                           integertop <span class="sy0">=</span> ipush <span class="br0">(</span>integertop<span class="sy0">,</span> eval<span class="br0">(</span>op<span class="sy0">,</span> op1<span class="sy0">,</span> op2<span class="br0">)</span><span class="sy0">;</span>
                           charactop <span class="sy0">=</span> cpop <span class="br0">(</span>charactop<span class="sy0">,</span> <span class="sy0">&amp;</span>op<span class="br0">)</span><span class="sy0">;</span>
                           <span class="kw1">if</span> <span class="br0">(</span>op <span class="sy0">!=</span> <span class="st0">'('</span><span class="br0">)</span>
                           <span class="br0">{</span>
                               integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op2<span class="br0">)</span><span class="sy0">;</span>
                               integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                           <span class="br0">}</span>
                       <span class="br0">}</span>
                       <span class="kw2">break</span><span class="sy0">;</span>
            <span class="kw1">case</span> <span class="st0">'<span class="es5">\0</span>'</span><span class="sy0">:</span> <span class="kw1">while</span> <span class="br0">(</span><span class="sy0">!=</span> cemptystack<span class="br0">(</span>charactop<span class="br0">)</span><span class="br0">)</span>
                       <span class="br0">{</span>
                           charactop <span class="sy0">=</span> cpop<span class="br0">(</span>charactop<span class="sy0">,</span> <span class="sy0">&amp;</span>op<span class="br0">)</span><span class="sy0">;</span>
                           integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op2<span class="br0">)</span><span class="sy0">;</span>
                           integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                           integertop <span class="sy0">=</span> ipush<span class="br0">(</span>integertop<span class="sy0">,</span> eval<span class="br0">(</span>op<span class="sy0">,</span> op1<span class="sy0">,</span> op2<span class="br0">)</span><span class="sy0">;</span>
                       <span class="br0">}</span>
                       integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                       <span class="kw3">printf</span><span class="br0">(</span><span class="st0">"<span class="es1">\n</span> The final solution is: %d"</span><span class="sy0">,</span> op1<span class="br0">)</span><span class="sy0">;</span>
                       <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span>
           <span class="kw1">default</span><span class="sy0">:</span> integertop <span class="sy0">=</span> ipush<span class="br0">(</span>integertop<span class="sy0">,</span> rd <span class="sy0">-</span> <span class="st0">'0'</span><span class="br0">)</span><span class="sy0">;</span>
           <span class="br0">}</span>
      <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw4">int</span> eval<span class="br0">(</span><span class="kw4">char</span> op<span class="sy0">,</span> <span class="kw4">int</span> op1<span class="sy0">,</span> <span class="kw4">int</span> op2<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">switch</span> <span class="br0">(</span>op<span class="br0">)</span>
    <span class="br0">{</span>
         <span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">+</span> op2<span class="sy0">;</span>
         <span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">-</span> op2<span class="sy0">;</span>
         <span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">/</span> op2<span class="sy0">;</span>
         <span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">*</span> op2<span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw4">int</span> priority <span class="br0">(</span><span class="kw4">char</span> op<span class="br0">)</span>
<span class="br0">{</span>
   <span class="kw1">switch</span><span class="br0">(</span>op<span class="br0">)</span>
  <span class="br0">{</span>
      <span class="kw1">case</span> <span class="st0">'^'</span><span class="sy0">:</span>
      <span class="kw1">case</span> <span class="st0">'$'</span><span class="sy0">:</span>  <span class="kw1">return</span> <span class="nu0">3</span><span class="sy0">;</span>
      <span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span>
      <span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span>  <span class="kw1">return</span> <span class="nu0">2</span><span class="sy0">;</span>
      <span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span>
      <span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span> <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<p><b>Output of the program:</b></p>
<p><i>Input entered at the command line:</i> (2 * 5 - 1 * 2) / (11 - 9)</p>
<p><i>Output:</i> 4 <sup id="cite_ref-Gopal_3-1" class="reference"><a href="#cite_note-Gopal-3">[3]</a></sup></p>
<h5><span class="mw-headline" id="Evaluation_of_Prefix_Expression">Evaluation of Prefix Expression</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-13" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p><b>Input:</b> x + 6 * ( y + z ) ^ 3</p>
<p><br />
<i>Output:'</i> 4</p>
<p><b>Analysis:</b> There are three types of input characters</p>
<pre>
               * Numbers
               * Operators
               * New line character (\n)
</pre>
<p><b>Data structure requirement:</b> A character stack and an integer stack</p>
<p><b>Algorithm:</b></p>
<pre>
   1. Read one character input at a time and keep pushing it into the character stack until the new
      line character is reached
   2. Perform <i>pop</i> from the character stack. If the stack is empty, go to step (3)
      Number                        (2.1) <i>Push</i> in to the integer stack and then go to step (1) 
      Operator                      (2.2)  Assign the operator to op
                                           <i>Pop</i> a number from  integer stack and assign it to op1
                                           <i>Pop</i> another number from integer stack
                                           and assign it to op2                               
                                           Calculate op1 op op2 and push the output into the integer
                                           stack. Go to step (2)                                       
   3. <i>Pop</i> the result from the integer stack and display the result
                       
</pre>
<p><b>Result:</b> The evaluation of prefix expression is printed as follows:</p>
<p><b>Input String:</b> / - * 2 5 * 1 2 - 11 9</p>
<table class="wikitable sortable">
<tr>
<th>Input Symbol</th>
<th>Character Stack (from bottom to top)</th>
<th>Integer Stack (from bottom to top)</th>
<th>Operation performed</th>
</tr>
<tr>
<td>/</td>
<td>/</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>/</td>
<td></td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>/ - *</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>/ - * 2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>/ - * 2 5</td>
<td></td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>/ - * 2 5 *</td>
<td></td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>/ - * 2 5 * 1</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>/ - * 2 5 * 1 2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>/ - * 2 5 * 1 2 -</td>
<td></td>
<td></td>
</tr>
<tr>
<td>11</td>
<td>/ - * 2 5 * 1 2 - 11</td>
<td></td>
<td></td>
</tr>
<tr>
<td>9</td>
<td>/ - * 2 5 * 1 2 - 11 9</td>
<td></td>
<td></td>
</tr>
<tr>
<td>\n</td>
<td>/ - * 2 5 * 1 2 - 11</td>
<td>9</td>
<td></td>
</tr>
<tr>
<td></td>
<td>/ - * 2 5 * 1 2 -</td>
<td>9 11</td>
<td></td>
</tr>
<tr>
<td></td>
<td>/ - * 2 5 * 1 2</td>
<td>2</td>
<td>11 - 9 = 2</td>
</tr>
<tr>
<td></td>
<td>/ - * 2 5 * 1</td>
<td>2 2</td>
<td></td>
</tr>
<tr>
<td></td>
<td>/ - * 2 5 *</td>
<td>2 2 1</td>
<td></td>
</tr>
<tr>
<td></td>
<td>/ - * 2 5</td>
<td>2 2</td>
<td>1 * 2 = 2</td>
</tr>
<tr>
<td></td>
<td>/ - * 2</td>
<td>2 2 5</td>
<td></td>
</tr>
<tr>
<td></td>
<td>/ - *</td>
<td>2 2 5 2</td>
<td></td>
</tr>
<tr>
<td></td>
<td>/ -</td>
<td>2 2 10</td>
<td>5 * 2 = 10</td>
</tr>
<tr>
<td></td>
<td>/</td>
<td>2 8</td>
<td>10 - 2 = 8</td>
</tr>
<tr>
<td></td>
<td>Stack is empty</td>
<td>4</td>
<td>8 / 2 = 4</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Stack is empty</td>
<td>Print 4</td>
</tr>
</table>
<p><b>C Program</b></p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="c source-c">
<pre class="de1">
<span class="kw4">int</span> main <span class="br0">(</span><span class="kw4">int</span> argc<span class="sy0">,</span> <span class="kw4">char</span> <span class="sy0">*</span>argv<span class="br0">[</span><span class="br0">]</span><span class="br0">)</span>
<span class="br0">{</span>
     <span class="kw4">struct</span> ch <span class="sy0">*</span>charactop <span class="sy0">=</span> NULL<span class="sy0">;</span>
     <span class="kw4">struct</span> integer <span class="sy0">*</span>integertop <span class="sy0">=</span> NULL<span class="sy0">;</span>
     <span class="kw4">char</span> rd<span class="sy0">,</span> op<span class="sy0">;</span>
     <span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> op1<span class="sy0">,</span> op2<span class="sy0">;</span>
     charactop <span class="sy0">=</span> cclearstack<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     integertop <span class="sy0">=</span> iclearstack<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     rd <span class="sy0">=</span> argv<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span>
     <span class="kw1">while</span><span class="br0">(</span>rd <span class="sy0">!=</span> <span class="st0">'<span class="es5">\0</span>'</span><span class="br0">)</span>
     <span class="br0">{</span>
         charactop <span class="sy0">=</span> cpush<span class="br0">(</span>charactop<span class="sy0">,</span> rd<span class="br0">)</span><span class="sy0">;</span>
         rd <span class="sy0">=</span> argv<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span>i<span class="sy0">++</span><span class="br0">]</span><span class="sy0">;</span>
      <span class="br0">}</span>
      <span class="kw1">while</span><span class="br0">(</span><span class="sy0">!</span>emptystack<span class="br0">(</span>charactop<span class="br0">)</span><span class="br0">)</span>
      <span class="br0">{</span>
           charactop <span class="sy0">=</span> cpop<span class="br0">(</span>charactop<span class="sy0">,</span> rd<span class="br0">)</span><span class="sy0">;</span>
           <span class="kw1">switch</span><span class="br0">(</span>rd<span class="br0">)</span>
           <span class="br0">{</span>
              <span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span>
              <span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span>
              <span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span>
              <span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span> 
                            op <span class="sy0">=</span> rd<span class="sy0">;</span>
                            integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op2<span class="br0">)</span><span class="sy0">;</span>
                            integertop <span class="sy0">=</span> ipop<span class="br0">(</span>integertop<span class="sy0">,</span> <span class="sy0">&amp;</span>op1<span class="br0">)</span><span class="sy0">;</span>
                            integertop <span class="sy0">=</span> ipush<span class="br0">(</span>integertop<span class="sy0">,</span> eval<span class="br0">(</span>op<span class="sy0">,</span> op1<span class="sy0">,</span> op2<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
              <span class="kw2">break</span><span class="sy0">;</span>
 
              <span class="kw1">default</span><span class="sy0">:</span>      integertop <span class="sy0">=</span> ipush<span class="br0">(</span>integertop<span class="sy0">,</span> rd <span class="sy0">-</span> <span class="st0">'0'</span><span class="br0">)</span><span class="sy0">;</span>
           <span class="br0">}</span>
       <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw4">int</span> eval<span class="br0">(</span><span class="kw4">char</span> op<span class="sy0">,</span> <span class="kw4">int</span> op1<span class="sy0">,</span> <span class="kw4">int</span> op2<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">switch</span> <span class="br0">(</span>op<span class="br0">)</span>
    <span class="br0">{</span>
         <span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">+</span> op2<span class="sy0">;</span>
         <span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">-</span> op2<span class="sy0">;</span>
         <span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">/</span> op2<span class="sy0">;</span>
         <span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span> <span class="kw1">return</span> op1 <span class="sy0">*</span> op2<span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw4">int</span> priority <span class="br0">(</span><span class="kw4">char</span> op<span class="br0">)</span>
<span class="br0">{</span>
   <span class="kw1">switch</span><span class="br0">(</span>op<span class="br0">)</span>
  <span class="br0">{</span>
      <span class="kw1">case</span> <span class="st0">'^'</span><span class="sy0">:</span>
      <span class="kw1">case</span> <span class="st0">'$'</span><span class="sy0">:</span>  <span class="kw1">return</span> <span class="nu0">3</span><span class="sy0">;</span>
      <span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span>
      <span class="kw1">case</span> <span class="st0">'/'</span><span class="sy0">:</span>  <span class="kw1">return</span> <span class="nu0">2</span><span class="sy0">;</span>
      <span class="kw1">case</span> <span class="st0">'+'</span><span class="sy0">:</span>
      <span class="kw1">case</span> <span class="st0">'-'</span><span class="sy0">:</span> <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<p><b>Output of the program:</b></p>
<p>Input entered at the command line: / - * 2 5 * 1 2 - 11 9</p>
<p>Output: 4 <sup id="cite_ref-Gopal_3-2" class="reference"><a href="#cite_note-Gopal-3">[3]</a></sup></p>
<h4><span class="mw-headline" id="Conversion_of_an_Infix_expression_that_is_fully_parenthesized_into_a_Postfix_expression">Conversion of an Infix expression that is fully parenthesized into a Postfix expression</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-14" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>Input:</b> (((8 + 1) - (7 - 4)) / (11 - 9))</p>
<p><b>Output:</b> 8 1 + 7 4 - - 11 9 - /</p>
<p><b>Analysis:</b> There are five types of input characters which are:</p>
<pre>
               * Opening brackets
               * Numbers
               * Operators
               * Closing brackets
               * New line character (\n)
</pre>
<p><b>Requirement:</b> A character stack</p>
<p><b>Algorithm:</b></p>
<pre>
   1. Read an character input
   2. Actions to be performed at end of each input
     Opening brackets              (2.1)  <i>Push</i> into stack and then Go to step (1)
     Number                        (2.2)  Print and then Go to step (1)
     Operator                      (2.3)  <i>Push</i> into stack and then Go to step (1)
     Closing brackets              (2.4)  <i>Pop</i> it from the stack
                                   (2.4.1) If it is an operator, print it, Go to step (1)
                                   (2.4.2) If the popped element is an opening bracket,
                                           discard it and go to step (1)           
     New line character            (2.5)  <i>STOP</i>
</pre>
<p>Therefore, the final output after conversion of an infix expression to a postfix expression is as follows:</p>
<p><br /></p>
<table class="wikitable sortable">
<tr>
<th>Input</th>
<th>Operation</th>
<th>Stack (after op)</th>
<th>Output on monitor</th>
</tr>
<tr>
<td>(</td>
<td>(2.1) Push operand into stack</td>
<td>(</td>
<td></td>
</tr>
<tr>
<td>(</td>
<td>(2.1) Push operand into stack</td>
<td>( (</td>
<td></td>
</tr>
<tr>
<td>(</td>
<td>(2.1) Push operand into stack</td>
<td>( ( (</td>
<td></td>
</tr>
<tr>
<td>8</td>
<td>(2.2) Print it</td>
<td></td>
<td>8</td>
</tr>
<tr>
<td>+</td>
<td>(2.3) Push operator into stack</td>
<td>( ( ( +</td>
<td>8</td>
</tr>
<tr>
<td>1</td>
<td>(2.2) Print it</td>
<td></td>
<td>8 1</td>
</tr>
<tr>
<td>)</td>
<td>(2.4) Pop from the stack: Since popped element is '+' print it</td>
<td>( ( (</td>
<td>8 1 +</td>
</tr>
<tr>
<td></td>
<td>(2.4) Pop from the stack: Since popped element is '(' we ignore it and read next character</td>
<td>( (</td>
<td>8 1 +</td>
</tr>
<tr>
<td>-</td>
<td>(2.3) Push operator into stack</td>
<td>( ( -</td>
<td></td>
</tr>
<tr>
<td>(</td>
<td>(2.1) Push operand into stack</td>
<td>( ( - (</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>(2.2) Print it</td>
<td></td>
<td>8 1 + 7</td>
</tr>
<tr>
<td>-</td>
<td>(2.3) Push the operator in the stack</td>
<td>( ( - ( -</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>(2.2) Print it</td>
<td></td>
<td>8 1 + 7 4</td>
</tr>
<tr>
<td>)</td>
<td>(2.4) Pop from the stack: Since popped element is '-' print it</td>
<td>( ( - (</td>
<td>8 1 + 7 4 -</td>
</tr>
<tr>
<td></td>
<td>(2.4) Pop from the stack: Since popped element is '(' we ignore it and read next character</td>
<td>( ( -</td>
</tr>
<tr>
<td>)</td>
<td>(2.4) Pop from the stack: Since popped element is '-' print it</td>
<td>( (</td>
<td>8 1 + 7 4 - -</td>
</tr>
<tr>
<td></td>
<td>(2.4) Pop from the stack: Since popped element is '(' we ignore it and read next character</td>
<td>(</td>
<td></td>
</tr>
<tr>
<td>/</td>
<td>(2.3) Push the operand into the stack</td>
<td>( /</td>
<td></td>
</tr>
<tr>
<td>(</td>
<td>(2.1) Push into the stack</td>
<td>( / (</td>
<td></td>
</tr>
<tr>
<td>11</td>
<td>(2.2) Print it</td>
<td></td>
<td>8 1 + 7 4 - - 11</td>
</tr>
<tr>
<td>-</td>
<td>(2.3) Push the operand into the stack</td>
<td>( / ( -</td>
<td></td>
</tr>
<tr>
<td>9</td>
<td>(2.2) Print it</td>
<td></td>
<td>8 1 + 7 4 - - 11 9</td>
</tr>
<tr>
<td>)</td>
<td>(2.4) Pop from the stack: Since popped element is '-' print it</td>
<td>( / (</td>
<td>8 1 + 7 4 - - 11 9 -</td>
</tr>
<tr>
<td></td>
<td>(2.4) Pop from the stack: Since popped element is '(' we ignore it and read next character</td>
<td>( /</td>
<td></td>
</tr>
<tr>
<td>)</td>
<td>(2.4) Pop from the stack: Since popped element is '/' print it</td>
<td>(</td>
<td>8 1 + 7 4 - - 11 9 - /</td>
</tr>
<tr>
<td></td>
<td>(2.4) Pop from the stack: Since popped element is '(' we ignore it and read next character</td>
<td>Stack is empty</td>
<td></td>
</tr>
<tr>
<td>New line character</td>
<td>(2.5) STOP</td>
<td></td>
<td></td>
</tr>
</table>
<h4><span class="mw-headline" id="Rearranging_railroad_cars">Rearranging railroad cars</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-15" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<h5><span class="mw-headline" id="Problem_Description">Problem Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-16" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>It's a very nice application of stacks. Consider that a freight train has <i><b>n</b></i> railroad cars. Each to be left at different station. They're numbered 1 through n &amp; freight train visits these stations in order n through 1. Obviously, the railroad cars are labeled by their destination.To facilitate removal of the cars from the train, we must rearrange them in ascending order of their number(i.e. 1 through n). When cars are in this order , they can be detached at each station. We rearrange cars at a shunting yard that has <i><b>input track</b></i>, <i><b>output track</b></i> &amp; <i><b>k</b></i> holding tracks between input &amp; output tracks(i.e. <i><b>holding track</b></i>).</p>
<h5><span class="mw-headline" id="Solution_Strategy">Solution Strategy</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-17" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>To rearrange cars, we examine the cars on the the input from front to back. If the car being examined is next one in the output arrangement , we move it directly to <i><b>output track</b></i>. If not , we move it to the <i><b>holding track</b></i> &amp; leave it there until it's time to place it to the <i><b>output track</b></i>. The holding tracks operate in a LIFO manner as the cars enter &amp; leave these tracks from top. When rearranging cars only following moves are permitted:</p>
<ul>
<li>A car may be moved from front (i.e. right end) of the input track to the top of one of the <i><b>holding tracks</b></i> or to the left end of the output track.</li>
<li>A car may be moved from the top of <i><b>holding track</b></i> to left end of the <i><b>output track</b></i>.</li>
</ul>
<p>The figure shows a shunting yard with <i><b>k</b></i> = 3, holding tracks <i><b>H1</b></i>, <i><b>H2</b></i> &amp; <i><b>H3</b></i>, also <i><b>n</b></i> = 9. The <i><b>n</b></i> cars of freight train begin in the input track &amp; are to end up in the output track in order 1 through <i><b>n</b></i> from right to left. The cars initially are in the order 5,8,1,7,4,2,9,6,3 from back to front. Later cars are rearranged in desired order.</p>
<h5><span class="mw-headline" id="A_Three_Track_Example">A Three Track Example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-18" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<div class="thumb tright">
<div class="thumbinner" style="width:222px;"><a href="/wiki/File:Railroadcars2.png" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/f/f5/Railroadcars2.png/220px-Railroadcars2.png" width="220" height="250" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/f/f5/Railroadcars2.png/330px-Railroadcars2.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/f/f5/Railroadcars2.png/440px-Railroadcars2.png 2x" data-file-width="1034" data-file-height="1177" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Railroadcars2.png" class="internal" title="Enlarge"></a></div>
Railroad cars example</div>
</div>
</div>
<ul>
<li>Consider the input arrangement from figure , here we note that the car 3 is at the front, so it can't be output yet, as it to be preceded by cars 1 &amp; 2. So car 3 is detached &amp; moved to holding track <i><b>H1</b></i>.</li>
<li>The next car 6 can't be output &amp; it is moved to holding track <i><b>H2</b></i>. Because we have to output car 3 before car 6 &amp; this will not possible if we move car 6 to holding track <i><b>H1</b></i>.</li>
<li>Now it's obvious that we move car 9 to <i><b>H3</b></i>.</li>
</ul>
<p>The requirement of rearrangement of cars on any holding track is that the cars should be preferred to arrange in ascending order from top to bottom.</p>
<ul>
<li>So car 2 is now moved to holding track H1 so that it satisfies the previous statement. If we move car 2 to H2 or H3, then we've no place to move cars 4,5,7,8.<i><b>The least restrictions on future car placement arise when the new car Î» is moved to the holding track that has a car at its top with smallest label Î¨ such that Î» &lt; Î¨. We may call it an assignment rule to decide whether a particular car belongs to a specific holding track.</b></i></li>
<li>When car 4 is considered, there are three places to move the car H1,H2,H3. The top of these tracks are 2,6,9.So using above mentioned Assignment rule, we move car 4 to H2.</li>
<li>The car 7 is moved to H3.</li>
<li>The next car 1 has the least label, so it's moved to output track.</li>
<li>Now it's time for car 2 &amp; 3 to output which are from H1(in short all the cars from H1 are appended to car 1 on output track).</li>
</ul>
<p>The car 4 is moved to output track. No other cars can be moved to output track at this time.</p>
<ul>
<li>The next car 8 is moved to holding track H1.</li>
<li>Car 5 is output from input track. Car 6 is moved to output track from H2, so is the 7 from H3,8 from H1 &amp; 9 from H3.</li>
</ul>
<p><br /></p>
<h4><span class="mw-headline" id="Quicksort">Quicksort</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-19" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Sorting means arranging a group of elements in a particular order. Be it ascending or descending, by cardinality or alphabetical order or variations thereof. The resulting ordering possibilities will only be limited by the type of the source elements.</p>
<p>Quicksort is an algorithm of the <i>divide and conquer</i> type. In this method, to sort a set of numbers, we reduce it to two smaller sets, and then sort these smaller sets.</p>
<p>This can be explained with the help of the following example:</p>
<p>Suppose <b>A</b> is a list of the following numbers:</p>
<p><a href="/wiki/File:Quicksort1.pdf" class="image"><img alt="Quicksort1.pdf" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0a/Quicksort1.pdf/page1-500px-Quicksort1.pdf.jpg" width="500" height="118" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/0/0a/Quicksort1.pdf/page1-750px-Quicksort1.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/0/0a/Quicksort1.pdf/page1-1000px-Quicksort1.pdf.jpg 2x" data-file-width="1275" data-file-height="300" /></a></p>
<p>In the reduction step, we find the final position of one of the numbers. In this case, let us assume that we have to find the final position of 48, which is the first number in the list.</p>
<p>To accomplish this, we adopt the following method. Begin with the last number, and move from right to left. Compare each number with 48. If the number is smaller than 48, we stop at that number and swap it with 48.</p>
<p><br />
In our case, the number is 24. Hence, we swap 24 and 48.</p>
<p><a href="/wiki/File:Quicksort2.pdf" class="image"><img alt="Quicksort2.pdf" src="//upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Quicksort2.pdf/page1-500px-Quicksort2.pdf.jpg" width="500" height="118" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Quicksort2.pdf/page1-750px-Quicksort2.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Quicksort2.pdf/page1-1000px-Quicksort2.pdf.jpg 2x" data-file-width="1275" data-file-height="300" /></a></p>
<p>The numbers 96 and 72 to the right of 48, are greater than 48. Now beginning with 24, scan the numbers in the opposite direction, that is from left to right. Compare every number with 48 until you find a number that is greater than 48.</p>
<p>In this case, it is 60. Therefore we swap 48 and 60.</p>
<p><a href="/wiki/File:Quicksort3.pdf" class="image"><img alt="Quicksort3.pdf" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/15/Quicksort3.pdf/page1-500px-Quicksort3.pdf.jpg" width="500" height="118" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/15/Quicksort3.pdf/page1-750px-Quicksort3.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/15/Quicksort3.pdf/page1-1000px-Quicksort3.pdf.jpg 2x" data-file-width="1275" data-file-height="300" /></a></p>
<p>Note that the numbers 12, 24 and 36 to the left of 48 are all smaller than 48. Now, start scanning numbers from 60, in the right to left direction. As soon as you find lesser number, swap it with 48.</p>
<p>In this case, it is 44. Swap it with 48. The final result is:</p>
<p><a href="/wiki/File:Quicksort4.pdf" class="image"><img alt="Quicksort4.pdf" src="//upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Quicksort4.pdf/page1-500px-Quicksort4.pdf.jpg" width="500" height="118" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Quicksort4.pdf/page1-750px-Quicksort4.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Quicksort4.pdf/page1-1000px-Quicksort4.pdf.jpg 2x" data-file-width="1275" data-file-height="300" /></a></p>
<p>Now, beginning with 44, scan the list from left to right, until you find a number greater than 48.</p>
<p>Such a number is 84. Swap it with 48. The final result is:</p>
<p><a href="/wiki/File:Quicksort5.pdf" class="image"><img alt="Quicksort5.pdf" src="//upload.wikimedia.org/wikipedia/commons/thumb/3/30/Quicksort5.pdf/page1-500px-Quicksort5.pdf.jpg" width="500" height="118" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/3/30/Quicksort5.pdf/page1-750px-Quicksort5.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/3/30/Quicksort5.pdf/page1-1000px-Quicksort5.pdf.jpg 2x" data-file-width="1275" data-file-height="300" /></a></p>
<p>Now, beginning with 84, traverse the list from right to left, until you reach a number lesser than 48. We do not find such a number before reaching 48. This means that all the numbers in the list have been scanned and compared with 48. Also, we notice that all numbers less than 48 are to the left of it, and all numbers greater than 48, are to it's right.</p>
<p>The final partitions look as follows:</p>
<p><a href="/wiki/File:Quicksort6.pdf" class="image"><img alt="Quicksort6.pdf" src="//upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Quicksort6.pdf/page1-500px-Quicksort6.pdf.jpg" width="500" height="132" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Quicksort6.pdf/page1-750px-Quicksort6.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Quicksort6.pdf/page1-1000px-Quicksort6.pdf.jpg 2x" data-file-width="1275" data-file-height="337" /></a></p>
<p>Therefore, 48 has been placed in it's proper position and now our task is reduced to sorting the two partitions. This above step of creating partitions can be repeated with every partition containing 2 or more elements. As we can process only a single partition at a time, we should be able to keep track of the other partitions, for future processing.</p>
<p>This is done by using two <b>stacks</b> called LOWERBOUND and UPPERBOUND, to temporarily store these partitions. The addresses of the first and last elements of the partitions are pushed into the LOWERBOUND and UPPERBOUND stacks respectively. Now, the above reduction step is applied to the partitions only after it's boundary values are <i>popped</i> from the stack.</p>
<p>We can understand this from the following example:</p>
<p>Take the above list A with 12 elements. The algorithm starts by pushing the boundary values of A, that is 1 and 12 into the LOWERBOUND and UPPERBOUND stacks respectively. Therefore the stacks look as follows:</p>
<pre>
    LOWERBOUND:  1                   UPPERBOUND:  12
</pre>
<p>To perform the reduction step, the values of the stack top are popped from the stack. Therefore, both the stacks become empty.</p>
<pre>
    LOWERBOUND:  {empty}                UPPERBOUND: {empty}
</pre>
<p>Now, the reduction step causes 48 to be fixed to the 5th position and creates two partitions, one from position 1 to 4 and the other from position 6 to 12. Hence, the values 1 and 6 are pushed into the LOWERBOUND stack and 4 and 12 are pushed into the UPPERBOUND stack.</p>
<pre>
    LOWERBOUND:  1, 6                   UPPERBOUND: 4, 12
</pre>
<p>For applying the reduction step again, the values at the stack top are popped. Therefore, the values 6 and 12 are popped. Therefore the stacks look like:</p>
<pre>
    LOWERBOUND:  1                      UPPERBOUND: 4
</pre>
<p>The reduction step is now applied to the second partition, that is from the 6th to 12th element.</p>
<p><a href="/wiki/File:Quicksort7.pdf" class="image"><img alt="Quicksort7.pdf" src="//upload.wikimedia.org/wikipedia/commons/thumb/5/55/Quicksort7.pdf/page1-500px-Quicksort7.pdf.jpg" width="500" height="270" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/5/55/Quicksort7.pdf/page1-750px-Quicksort7.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/5/55/Quicksort7.pdf/page1-1000px-Quicksort7.pdf.jpg 2x" data-file-width="1275" data-file-height="689" /></a></p>
<p>After the reduction step, 98 is fixed in the 11th position. So, the second partition has only one element. Therefore, we push the upper and lower boundary values of the first partition onto the stack. So, the stacks are as follows:</p>
<pre>
    LOWERBOUND:  1, 6                   UPPERBOUND:  4, 10
</pre>
<p>The processing proceeds in the following way and ends when the stacks do not contain any upper and lower bounds of the partition to be processed, and the list gets sorted.</p>
<h4><span class="mw-headline" id="The_Stock_Span_Problem">The Stock Span Problem</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-20" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<div class="thumb tright">
<div class="thumbinner" style="width:327px;"><a href="/wiki/File:Stockspan.pdf" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/3/33/Stockspan.pdf/page1-325px-Stockspan.pdf.jpg" width="325" height="162" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/3/33/Stockspan.pdf/page1-488px-Stockspan.pdf.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/3/33/Stockspan.pdf/page1-650px-Stockspan.pdf.jpg 2x" data-file-width="1275" data-file-height="637" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Stockspan.pdf" class="internal" title="Enlarge"></a></div>
The Stockspan Problem</div>
</div>
</div>
<p>In the stock span problem, we will solve a financial problem with the help of stacks.</p>
<p>Suppose, for a stock, we have a series of <i>n</i> daily price quotes, the <i>span</i> of the stock's price on a particular day is defined as the maximum number of consecutive days for which the price of the stock on the current day is less than or equal to its price on that day.</p>
<h5><span class="mw-headline" id="An_algorithm_which_has_Quadratic_Time_Complexity">An algorithm which has Quadratic Time Complexity</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-21" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p><b>Input:</b> An array <i>P</i> with <i>n</i> elements</p>
<p><b>Output:</b> An array <i>S</i> of <i>n</i> elements such that P[i] is the largest integer k such that k &lt;= i + 1 and P[y] &lt;= P[i] for j = i - k + 1,.....,i</p>
<p><b>Algorithm:</b></p>
<pre>
       1. Initialize an array P which contains the daily prices of the stocks
       2. Initialize an array S which will store the span of the stock
       3. <b>for</b> i = 0 to i = n - 1
               3.1 Initialize k to zero
               3.2 Done with a <i>false</i> condition
               3.3 <b>repeat</b>
                     3.3.1 if ( P[i - k] &lt;= P[i)] then
                               Increment k by 1
                     3.3.2 else
                               Done with <i>true</i> condition
               3.4 Till (k &gt; i) or done with processing
                     Assign value of k to S[i] to get the span of the stock
       4. Return array S
</pre>
<p>Now, analyzing this algorithm for running time, we observe:</p>
<ul>
<li>We have initialized the array S at the beginning and returned it at the end. This is a constant time operation, hence takes <i>O</i>(n) time</li>
</ul>
<ul>
<li>The <i>repeat</i> loop is nested within the <i>for</i> loop. The <i>for</i> loop, whose counter is <i>i</i> is executed n times. The statements which are not in the repeat loop, but in the for loop are executed <i>n</i> times. Therefore these statements and the incrementing and condition testing of i take <i>O</i>(n) time.</li>
</ul>
<ul>
<li>In repetition of i for the outer for loop, the body of the inner <i>repeat</i> loop is executed maximum i + 1 times. In the worst case, element S[i] is greater than all the previous elements. So, testing for the if condition, the statement after that, as well as testing the until condition, will be performed i + 1 times during iteration i for the outer for loop. Hence, the total time taken by the inner loop is <i>O</i>(n(n + 1)/2), which is <i>O</i>(<img class="mwe-math-fallback-image-inline tex" alt="n^2 " src="//upload.wikimedia.org/math/b/0/8/b08b1c6ec09f20907eb1d6f1392c01c6.png" />)</li>
</ul>
<p>The running time of all these steps is calculated by adding the time taken by all these three steps. The first two terms are <i>O</i>(<img class="mwe-math-fallback-image-inline tex" alt=" n " src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" />) while the last term is <i>O</i>(<img class="mwe-math-fallback-image-inline tex" alt="n^2 " src="//upload.wikimedia.org/math/b/0/8/b08b1c6ec09f20907eb1d6f1392c01c6.png" />). Therefore the total running time of the algorithm is <i>O</i>(<img class="mwe-math-fallback-image-inline tex" alt="n^2 " src="//upload.wikimedia.org/math/b/0/8/b08b1c6ec09f20907eb1d6f1392c01c6.png" />).</p>
<h5><span class="mw-headline" id="An_algorithm_that_has_Linear_Time_Complexity">An algorithm that has Linear Time Complexity</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-22" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>In order to calculate the span more efficiently, we see that the span on a particular day can be easily calculated if we know the closest day before <i>i</i> , such that the price of the stocks on that day was higher than the price of the stocks on the present day. If there exists such a day, we can represent it by h(i) and initialize h(i) to be -1.</p>
<p>Therefore the span of a particular day is given by the formula, s = i - h(i).</p>
<p>To implement this logic, we use a stack as an abstract data type to store the days i, h(i), h(h(i)) and so on. When we go from day i-1 to i, we pop the days when the price of the stock was less than or equal to p(i) and then push the value of day <i>i</i> back into the stack.</p>
<p>Here, we assume that the stack is implemented by operations that take <i>O</i>(1) that is constant time. The algorithm is as follows:</p>
<p><b>Input:</b> An array P with <i>n</i> elements and an empty stack N</p>
<p><b>Output:</b> An array <i>S</i> of <i>n</i> elements such that P[i] is the largest integer k such that k &lt;= i + 1 and P[y] &lt;= P[i] for j = i - k + 1,.....,i</p>
<p><b>Algorithm:</b></p>
<pre>
       1. Initialize an array P which contains the daily prices of the stocks
       2. Initialize an array S which will store the span of the stock
       3. <b>for</b> i = 0 to i = n - 1
               3.1 Initialize k to zero
               3.2 Done with a <i>false</i> condition
               3.3 <b>while not</b> (Stack N is empty or done with processing)
                     3.3.1 if ( P[i] &gt;= P[N.top())] then
                               Pop a value from stack N
                     3.3.2 else
                               Done with <i>true</i> condition
               3.4 if Stack N is empty
                        3.4.1 Initialize h to -1
               3.5 else
                        3.5.1 Initialize stack top to h
                        3.5.2 Put the value of h - i in S[i]
                        3.5.3 Push the value of i in N 
       4. Return array S
</pre>
<p>Now, analyzing this algorithm for running time, we observe:</p>
<ul>
<li>We have initialized the array S at the beginning and returned it at the end. This is a constant time operation, hence takes <i>O</i>(n) time</li>
</ul>
<ul>
<li>The <i>while</i> loop is nested within the <i>for</i> loop. The <i>for</i> loop, whose counter is <i>i</i> is executed n times. The statements which are not in the repeat loop, but in the for loop are executed <i>n</i> times. Therefore these statements and the incrementing and condition testing of i take <i>O</i>(n) time.</li>
</ul>
<ul>
<li>Now, observe the inner while loop during <i>i</i> repetitions of the for loop. The statement <i>done with a true condition</i> is done at most once, since it causes an exit from the loop. Let us say that t(i) is the number of times statement <i>Pop a value from stack N</i> is executed. So it becomes clear that <i>while not (Stack N is empty or done with processing)</i> is tested maximum t(i) + 1 times.</li>
</ul>
<ul>
<li>Adding the running time of all the operations in the while loop, we get:</li>
</ul>
<p><br /></p>
<dl>
<dd><img class="mwe-math-fallback-image-inline tex" alt="\sum_{i=0}^{n-1}t(i) +  1" src="//upload.wikimedia.org/math/2/8/a/28a6e52ddd01f1a1bfb11dd97b5aa26a.png" /></dd>
</dl>
<ul>
<li>An element once popped from the stack N is never pushed back into it. Therefore,</li>
</ul>
<p><br /></p>
<dl>
<dd><img class="mwe-math-fallback-image-inline tex" alt="\sum_{i=1}^{n-1}t(i)" src="//upload.wikimedia.org/math/1/4/2/14215870cc4d0596009a903b89234f78.png" /></dd>
</dl>
<p>So, the running time of all the statements in the while loop is <i>O</i>(<img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" />)</p>
<p>The running time of all the steps in the algorithm is calculated by adding the time taken by all these steps. The run time of each step is <i>O</i>(<img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" />). Hence the running time complexity of this algorithm is <i>O</i>(<img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" />).</p>
<h3><span class="mw-headline" id="Related_Links">Related Links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-23" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul>
<li><a href="//en.wikipedia.org/wiki/Stack_(data_structure)" class="extiw" title="wikipedia:Stack (data structure)">Stack (Wikipedia)</a></li>
</ul>
<h3><span class="mw-headline" id="Queues">Queues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-24" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A queue is a basic data structure that is used throughout programming. You can think of it as a line in a grocery store. The first one in the line is the first one to be served.Just like a queue.</p>
<p>A queue is also called a FIFO (First In First Out) to demonstrate the way it accesses data.</p>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; width:80%" title="Queue&lt;item-type&gt; Operations">
<p><b><code>Queue&lt;item-type&gt;</code> Operations</b></p>
<dl>
<dt style="font-weight:normal"><code><b>enqueue</b>(<var>new-item</var>:item-type)</code></dt>
<dd>Adds an item onto the end of the queue.</dd>
<dt style="font-weight:normal"><code><b>front</b>():item-type</code></dt>
<dd>Returns the item at the front of the queue.</dd>
<dt style="font-weight:normal"><code><b>dequeue</b>()</code></dt>
<dd>Removes the item from the front of the queue.</dd>
<dt style="font-weight:normal"><code><b>is-empty</b>():Boolean</code></dt>
<dd>True if no more items can be dequeued and there is no front item.</dd>
<dt style="font-weight:normal"><code><b>is-full</b>():Boolean</code></dt>
<dd>True if no more items can be enqueued.</dd>
<dt style="font-weight:normal"><code><b>get-size</b>():Integer</code></dt>
<dd>Returns the number of elements in the queue.</dd>
</dl>
<p>All operations except <code>get-size()</code> can be performed in <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> time. <code>get-size()</code> runs in at worst <img class="mwe-math-fallback-image-inline tex" alt="O(N)." src="//upload.wikimedia.org/math/e/4/7/e472b7d37456fd24e8f5f7208475262b.png" /></p>
</div>
<p><br /></p>
<h4><span class="mw-headline" id="Linked_List_Implementation_2">Linked List Implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-25" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The basic linked list implementation uses a singly-linked list with a tail pointer to keep track of the back of the queue.</p>
<pre>
type Queue&lt;item_type&gt;
  data list:Singly Linked List&lt;item_type&gt;
  data tail:List Iterator&lt;item_type&gt;

  constructor()
    list := new Singly-Linked-List()
    tail := list.get-begin() # null
  end constructor
</pre>
<p>When you want to <b>enqueue</b> something, you simply add it to the back of the item pointed to by the tail pointer. So the previous tail is considered next compared to the item being added and the tail pointer points to the new item. If the list was empty, this doesn't work, since the tail iterator doesn't refer to anything</p>
<pre>
 method enqueue(new_item:item_type)
   if is-empty()
     list.prepend(new_item)
     tail := list.get-begin()
   else
     list.insert_after(new_item, tail)
     tail.move-next()
   end if
 end method
</pre>
<p>The <b>front</b> item on the queue is just the one referred to by the linked list's head pointer</p>
<pre>
  method front():item_type
    return list.get-begin().get-value()
  end method
</pre>
<p>When you want to <b>dequeue</b> something off the list, simply point the head pointer to the previous from head item. The old head item is the one you removed of the list. If the list is now empty, we have to fix the tail iterator.</p>
<pre>
  method dequeue()
    list.remove-first()
    if is-empty()
      tail := list.get-begin()
    end if
  end method
</pre>
<p>A check for emptiness is easy. Just check if the list is empty.</p>
<pre>
  method is-empty():Boolean
    return list.is-empty()
  end method
</pre>
<p>A check for full is simple. Linked lists are considered to be limitless in size.</p>
<pre>
  method is-full():Boolean
    return False
  end method
</pre>
<p>A check for the size is again passed through to the list.</p>
<pre>
  method get-size():Integer
    return list.get-size()
  end method
end type
</pre>
<p><br /></p>
<h5><span class="mw-headline" id="Performance_Analysis_2">Performance Analysis</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-26" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>In a linked list, accessing the first element is an <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> operation because the list contains a pointer directly to it. Therefore, enqueue, front, and dequeue are a quick <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> operations.</p>
<p>The checks for empty/fullness as done here are also <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" />.</p>
<p>The performance of <code>getSize()</code> depends on the performance of the corresponding operation in the linked list implementation. It could be either <img class="mwe-math-fallback-image-inline tex" alt="O(n)" src="//upload.wikimedia.org/math/7/b/a/7ba55e7c64a9405a0b39a1107e90ca94.png" />, or <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" />, depending on what time/space tradeoff is made. Most of the time, users of a Queue do not use the <code>getSize()</code> operation, and so a bit of space can be saved by not optimizing it.</p>
<h4><span class="mw-headline" id="Circular_Array_Implementation">Circular Array Implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-27" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<h5><span class="mw-headline" id="Performance_Analysis_3">Performance Analysis</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-28" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<h4><span class="mw-headline" id="Priority_Queue_Implementation">Priority Queue Implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-29" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<div style="clear: both"></div>
<table style="background: #ffd; border: 1px solid #aaaaaa; padding: 6pt; margin: 12pt 8%; width: 60%; margin: auto;" class="notice noprint notice-todo">
<tr>
<td style="width: 58px;">
<div class="floatleft"><img alt="Clipboard" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/45px-Clipboard.svg.png" width="45" height="45" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/68px-Clipboard.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/90px-Clipboard.svg.png 2x" data-file-width="48" data-file-height="48" /></div>
</td>
<td>
<p><b>To do:</b><br />
Discuss priority queues and implementations including sorted lists and various heaps.</p>
</td>
</tr>
</table>
<div style="clear: both"></div>
<h4><span class="mw-headline" id="Related_Links_2">Related Links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-30" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul>
<li><a href="//en.wikipedia.org/wiki/queue_(data_structure)" class="extiw" title="wikipedia:queue (data structure)">Queue (Wikipedia)</a></li>
</ul>
<h3><span class="mw-headline" id="Deques">Deques</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-31" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A Deque is a homogeneous list of elements in which insertions and deletion operations are performed on both the ends.<br />
Because of this property it is known as double ended queue i.e. Deque<br />
Deque has two types:<br /></p>
<ol>
<li>Input restricted queue: It allows insertion at only one end<br /></li>
<li>Output restricted queue: It allows deletion at only one end</li>
</ol>
<ul>
<li><a href="//en.wikipedia.org/wiki/deque" class="extiw" title="wikipedia:deque">Deque (Double-Ended QUEue)</a></li>
</ul>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<h2><span class="mw-headline" id="References">References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Stacks_and_Queues&amp;action=edit&amp;section=T-32" title="Data Structures/Stacks and Queues">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="reflist references" style="">
<ol class="references">
<li id="cite_note-Dromey-1"><span class="mw-cite-backlink">â†‘ <sup><a href="#cite_ref-Dromey_1-0"><i><b>a</b></i></a></sup> <sup><a href="#cite_ref-Dromey_1-1"><i><b>b</b></i></a></sup></span> <span class="reference-text"><span class="citation book">Dromey, R.G. <i>How to Solve it by Computer</i>. Prentice Hall of India.</span><span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=How+to+Solve+it+by+Computer&amp;rft.aulast=Dromey&amp;rft.aufirst=R.G&amp;rft.au=Dromey%2C%26%2332%3BR.G&amp;rft.pub=Prentice+Hall+of+India&amp;rfr_id=info:sid/en.wikibooks.org:Data_Structures/All_Chapters"><span style="display: none;">&#160;</span></span></span></li>
<li id="cite_note-ReferenceA-2"><span class="mw-cite-backlink">â†‘ <sup><a href="#cite_ref-ReferenceA_2-0"><i><b>a</b></i></a></sup> <sup><a href="#cite_ref-ReferenceA_2-1"><i><b>b</b></i></a></sup></span> <span class="reference-text">Data structures, Algorithms and Applications in C++ by Sartaj Sahni</span></li>
<li id="cite_note-Gopal-3"><span class="mw-cite-backlink">â†‘ <sup><a href="#cite_ref-Gopal_3-0"><i><b>a</b></i></a></sup> <sup><a href="#cite_ref-Gopal_3-1"><i><b>b</b></i></a></sup> <sup><a href="#cite_ref-Gopal_3-2"><i><b>c</b></i></a></sup></span> <span class="reference-text"><span class="citation book">Gopal, Arpita. <i>Magnifying Data Structures</i>. PHI.</span><span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Magnifying+Data+Structures&amp;rft.aulast=Gopal&amp;rft.aufirst=Arpita&amp;rft.au=Gopal%2C%26%2332%3BArpita&amp;rft.pub=PHI&amp;rfr_id=info:sid/en.wikibooks.org:Data_Structures/All_Chapters"><span style="display: none;">&#160;</span></span></span></li>
</ol>
</div>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<p><br /></p>
<h2><span class="mw-headline" id="Trees">Trees</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-1" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A <b>tree</b> is a non-empty set one element of which is designated the root of the tree while the remaining elements are partitioned into non-empty sets each of which is a subtree of the root.</p>
<p>Tree nodes have many useful properties. The <b>depth</b> of a node is the length of the path (or the number of edges) from the root to that node. The <b>height</b> of a node is the longest path from that node to its leaves. The height of a tree is the height of the root. A <b>leaf node</b> has no children -- its only path is up to its parent.</p>
<p>See the <a href="/wiki/Data_Structures/Tree_Axioms" title="Data Structures/Tree Axioms">axiomatic development of trees</a> and its consequences for more information.</p>
<p>Types of trees:</p>
<p><b>Binary:</b> Each node has zero, one, or two children. This assertion makes many tree operations simple and efficient.</p>
<p><b>Binary Search:</b> A binary tree where any left child node has a value less than its parent node and any right child node has a value greater than or equal to that of its parent node.</p>
<h3><span class="mw-headline" id="Traversal">Traversal</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-2" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Many problems require we visit the nodes of a tree in a systematic way: tasks such as counting how many nodes exist or finding the maximum element. Three different methods are possible for binary trees: <i>preorder</i>, <i>postorder</i>, and <i>in-order</i>, which all do the same three things: recursively traverse both the left and right subtrees and visit the current node. The difference is when the algorithm visits the current node:</p>
<p><b>preorder</b>: Current node, left subtree, right subtree (DLR)</p>
<p><b>postorder</b>: Left subtree, right subtree, current node (LRD)</p>
<p><b>in-order</b>: Left subtree, current node, right subtree (LDR)</p>
<p><b>levelorder</b>: Level by level, from left to right, starting from the root node.</p>
<p>* Visit means performing some operation involving the current node of a tree, like incrementing a counter or checking if the value of the current node is greater than any other recorded.</p>
<h3><span class="mw-headline" id="Sample_implementations_for_Tree_Traversal">Sample implementations for Tree Traversal</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-3" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>
<b>preorder</b>(node)
  visit(node)
  <b>if</b> node.left  â‰  <b>null then</b> preorder(node.left)
  <b>if</b> node.right â‰  <b>null then</b> preorder(node.right)
</pre>
<pre>
<b>inorder</b>(node)
  <b>if</b> node.left  â‰  <b>null then</b> inorder(node.left)
  visit(node)
  <b>if</b> node.right â‰  <b>null then</b> inorder(node.right)
</pre>
<pre>
<b>postorder</b>(node)
  <b>if</b> node.left  â‰  <b>null then</b> postorder(node.left)
  <b>if</b> node.right â‰  <b>null then</b> postorder(node.right)
  visit(node)
</pre>
<pre>
<b>levelorder</b>(root)
  queue&lt;node&gt; q
  q.push(root)
  <b>while</b> not q.empty <b>do</b>
     node = q.pop
     visit(node)
     <b>if</b> node.left  â‰  <b>null then</b> q.push(node.left)
     <b>if</b> node.right â‰  <b>null then</b> q.push(node.right)
</pre>
<p>For an algorithm that is less taxing on the stack, see Threaded Trees.</p>
<div class="center">
<div class="thumb tnone">
<div class="thumbinner" style="width:182px;"><a href="//commons.wikimedia.org/wiki/Special:UploadWizard?wpDestFile=Huma" class="new" title="File:Huma">File:Huma</a>
<div class="thumbcaption">huma</div>
</div>
</div>
</div>
<h3><span class="mw-headline" id="Examples_of_Tree_Traversals">Examples of Tree Traversals</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-4" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><a href="/wiki/File:Bstreesample.jpg" class="image"><img alt="Bstreesample.jpg" src="//upload.wikimedia.org/wikipedia/commons/1/10/Bstreesample.jpg" width="342" height="153" data-file-width="342" data-file-height="153" /></a></p>
<pre>
<b>preorder:</b>  50,30, 20, 40, 90, 100
<b>inorder:</b> 20,30,40,50, 90, 100
</pre>
<h3><span class="mw-headline" id="Balancing">Balancing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-5" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>When entries that are already <i>sorted</i> are stored in a tree, all new records will go the same route, and the tree will look more like a list (such a tree is called a degenerate tree). Therefore the tree needs balancing routines, making sure that under all branches are an equal number of records. This will keep searching in the tree at optimal speed. Specifically, if a tree with <i>n</i> nodes is a degenerate tree, the longest path through the tree will be n nodes; if it is a balanced tree, the longest path will be <i>log n</i> nodes.</p>
<p><a href="/wiki/Algorithms/Left_rotation" title="Algorithms/Left rotation">Algorithms/Left_rotation</a>: This shows how balancing is applied to establish a priority heap invariant in a <a href="//en.wikipedia.org/wiki/Treap" class="extiw" title="w:Treap">Treap</a>, a data structure which has the queueing performance of a heap, and the key lookup performance of a tree. A balancing operation can change the tree structure while maintaining another order, which is binary tree sort order. The binary tree order is left to right, with left nodes' keys less than right nodes' keys, whereas the priority order is up and down, with higher nodes' priorities greater than lower nodes' priorities. Alternatively, the priority can be viewed as another ordering key, except that finding a specific key is more involved.</p>
<p>The balancing operation can move nodes up and down a tree without affecting the left right ordering.</p>
<p><b><a href="//en.wikipedia.org/wiki/AVL_tree" class="extiw" title="w:AVL tree">AVL</a>:</b> A balanced binary search tree according to the following specification: the heights of the two child subtrees of any node differ by at most one.</p>
<p><b><a href="//en.wikipedia.org/wiki/Red_black_tree" class="extiw" title="w:Red black tree">Red-Black Tree</a>:</b> A balanced binary search tree using a balancing algorithm based on colors assigned to a node, and the colors of nearby nodes.</p>
<p><b><a href="//en.wikipedia.org/wiki/AA_tree" class="extiw" title="w:AA tree">AA Tree</a>:</b> A balanced tree, in fact a more restrictive variation of a red-black tree.</p>
<h3><span class="mw-headline" id="Binary_Search_Trees">Binary Search Trees</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-6" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A typical binary search tree looks like this:</p>
<p><a href="/wiki/File:Bstreesample.jpg" class="image"><img alt="Bstreesample.jpg" src="//upload.wikimedia.org/wikipedia/commons/1/10/Bstreesample.jpg" width="342" height="153" data-file-width="342" data-file-height="153" /></a></p>
<h4><span class="mw-headline" id="Terms">Terms</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-7" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>Node</b> Any item that is stored in the tree. <b>Root</b> The top item in the tree. (50 in the tree above) <b>Child</b> Node(s) under the current node. (20 and 40 are children of 30 in the tree above) <b>Parent</b> The node directly above the current node. (90 is the parent of 100 in the tree above) <b>Leaf</b> A node which has no children. (20 is a leaf in the tree above)</p>
<h4><span class="mw-headline" id="Searching_through_a_binary_search_tree">Searching through a binary search tree</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-8" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>To search for an item in a binary tree:</p>
<ol>
<li>Start at the root node</li>
<li>If the item that you are searching for is less than the root node, move to the left child of the root node, if the item that you are searching for is more than the root node, move to the right child of the root node and if it is equal to the root node, then you have found the item that you are looking for.</li>
<li>Now check to see if the item that you are searching for is equal to, less than or more than the new node that you are on. Again if the item that you are searching for is less than the current node, move to the left child, and if the item that you are searching for is greater than the current node, move to the right child.</li>
<li>Repeat this process until you find the item that you are looking for or until the node does not have a child on the correct branch, in which case the tree doesn't contain the item which you are looking for.</li>
</ol>
<h5><span class="mw-headline" id="Example">Example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-9" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p><a href="/wiki/File:Bstreesearchexample.jpg" class="image"><img alt="Bstreesearchexample.jpg" src="//upload.wikimedia.org/wikipedia/commons/f/fa/Bstreesearchexample.jpg" width="342" height="153" data-file-width="342" data-file-height="153" /></a></p>
<p><b>For example, to find the node 40...</b></p>
<ol>
<li>The root node is 50, which is greater than 40, so you go to 50's left child.</li>
<li>50's left child is 30, which is less than 40, so you next go to 30's right child.</li>
<li>30's right child is 40, so you have found the item that you are looking for&#160;:)</li>
</ol>
<p>.........</p>
<h4><span class="mw-headline" id="Adding_an_item_to_a_binary_search_tree">Adding an item to a binary search tree</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-10" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ol>
<li>To add an item, you first must search through the tree to find the position that you should put it in. You do this following the steps above.</li>
<li>When you reach a node which doesn't contain a child on the correct branch, add the new node there.</li>
</ol>
<p><br /></p>
<p><b>For example, to add the node 25...</b></p>
<ol>
<li>The root node is 50, which is greater than 25, so you go to 50's left child.</li>
<li>50's left child is 30, which is greater than 25, so you go to 30's left child.</li>
<li>30's left child is 20, which is less than 25, so you go to 20's right child.</li>
<li>20's right child doesn't exist, so you add 25 there&#160;:)</li>
</ol>
<h4><span class="mw-headline" id="Deleting_an_item_from_a_binary_search_tree">Deleting an item from a binary search tree</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-11" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><i>It is assumed that you have already found the node that you want to delete, using the search technique described above.</i></p>
<h5><span class="mw-headline" id="Case_1:_The_node_you_want_to_delete_is_a_leaf">Case 1: The node you want to delete is a leaf</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-12" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p><a href="/wiki/File:Bstreedeleteleafexample.jpg" class="image"><img alt="Bstreedeleteleafexample.jpg" src="//upload.wikimedia.org/wikipedia/commons/6/6c/Bstreedeleteleafexample.jpg" width="342" height="153" data-file-width="342" data-file-height="153" /></a></p>
<p><b>For example, to delete 40...</b></p>
<ul>
<li>Simply delete the node!</li>
</ul>
<h5><span class="mw-headline" id="Case_2:_The_node_you_want_to_delete_has_one_child">Case 2: The node you want to delete has one child</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-13" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<ol>
<li>Directly connect the child of the node that you want to delete, to the parent of the node that you want to delete.</li>
</ol>
<p><a href="/wiki/File:Bstreedeleteonechildexample.jpg" class="image"><img alt="Bstreedeleteonechildexample.jpg" src="//upload.wikimedia.org/wikipedia/commons/6/6a/Bstreedeleteonechildexample.jpg" width="701" height="153" data-file-width="701" data-file-height="153" /></a></p>
<p><b>For example, to delete 90...</b></p>
<ul>
<li>Delete 90, then make 100 the child node of 50.</li>
</ul>
<h5><span class="mw-headline" id="Case_3:_The_node_you_want_to_delete_has_two_children">Case 3: The node you want to delete has two children</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-14" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>One <i>non-standard</i> way, is to <u>rotate</u> the node into a chosen subtree, and attempt to delete the key again from that subtree, recursively, until Case 1 or Case 2 occurs. This could unbalance a tree, so randomly choosing whether to right or left rotate may help.</p>
<p>The <i>standard</i> way is to pick either the left or right child, say the right, then get the right's leftmost descendent by following left ,starting from the right child, until the next left is null. Then remove this leftmost descendant of the right child, replacing it with its right sub-tree ( it has a left child of null). Then use the contents of this former leftmost descendant of the right child, as replacement for the key and value of the node being deleted , so that its values now are in the deleted node, the parent of the right child. This still maintains the key ordering for all nodes. Example java code is below in the treap example code.</p>
<p>The following examples use the standard algorithm, that is, the successor is the left-most node in the right subtree of the node to be deleted.</p>
<p><a href="/wiki/File:Bstreefindsuccessorexample.jpg" class="image"><img alt="Bstreefindsuccessorexample.jpg" src="//upload.wikimedia.org/wikibooks/en/c/ce/Bstreefindsuccessorexample.jpg" width="283" height="267" data-file-width="283" data-file-height="267" /></a></p>
<p><b>For example, to delete 30</b></p>
<ol>
<li>The right node of the node which is being deleted is 40.</li>
<li>(From now on, we continually go to the left node until there isn't another one...) The first left node of 40, is 35.</li>
<li>35 has no left node, therefore 35 is the successor!</li>
<li>35 replaces 30, at the original right node, and the node with 35 is deleted, replacing it with the right sub-tree, which has the root node 37.</li>
</ol>
<h6><span class="mw-headline" id="Case_1_of_two-children_case:_The_successor_is_the_right_child_of_the_node_being_deleted">Case 1 of two-children case: The successor is the right child of the node being deleted</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-15" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<ol>
<li>Directly move the child to the right of the node being deleted into the position of the node being deleted.</li>
<li>As the new node has no left children, you can connect the deleted node's left subtree's root as it's left child.</li>
</ol>
<p><a href="/wiki/File:Bstreedeleterightchildexample.jpg" class="image"><img alt="Bstreedeleterightchildexample.jpg" src="//upload.wikimedia.org/wikibooks/en/b/b4/Bstreedeleterightchildexample.jpg" width="634" height="210" data-file-width="634" data-file-height="210" /></a></p>
<p><b>For example, to delete 30</b></p>
<ol>
<li>replace the contents to be deleted (30), with the successor's contents( 40).</li>
<li>delete the successor node (contents 40), replacing it with its right subtree (head contents 45).</li>
</ol>
<h6><span class="mw-headline" id="Case_2_of_two-children_case:_The_successor_isn.27t_the_right_child_of_the_node_being_deleted">Case 2 of two-children case: The successor isn't the right child of the node being deleted</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-16" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p><i>This is best shown with an example</i></p>
<p><a href="/wiki/File:Bstreedeletenotrightchildexample.jpg" class="image"><img alt="Bstreedeletenotrightchildexample.jpg" src="//upload.wikimedia.org/wikipedia/commons/1/15/Bstreedeletenotrightchildexample.jpg" width="632" height="255" data-file-width="632" data-file-height="255" /></a></p>
<p><b>To delete 30...</b></p>
<ol>
<li>Replace the contents to be deleted (30) with the successor's contents (35).</li>
<li>replace the successor (35) with it's right subtree (37). There is no left subtree because the successor is leftmost.</li>
</ol>
<h3><span class="mw-headline" id="Example_extract_of_java_code_for_binary_tree_delete_operation">Example extract of java code for binary tree delete operation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-17" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="java source-java">
<pre class="de1">
<span class="kw1">private</span> Treap1<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span>.<span class="me1">TreapNode</span> deleteNode<span class="br0">(</span>K k, Treap1<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span>.<span class="me1">TreapNode</span> node, Deleted del<span class="br0">)</span> <span class="br0">{</span>
 
		<span class="kw1">if</span> <span class="br0">(</span>node <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>k.<span class="me1">compareTo</span><span class="br0">(</span>node.<span class="me1">k</span><span class="br0">)</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
			 node.<span class="me1">left</span> <span class="sy0">=</span> deleteNode<span class="br0">(</span>k, node.<span class="me1">left</span>, del<span class="br0">)</span> <span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>k.<span class="me1">compareTo</span><span class="br0">(</span>node.<span class="me1">k</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
			node.<span class="me1">right</span> <span class="sy0">=</span>  deleteNode<span class="br0">(</span>k, node.<span class="me1">right</span>, del<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="co1">// k.compareTo(node.k) == 0</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span> node.<span class="me1">left</span> <span class="sy0">==</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span>
				del.<span class="me1">success</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
				<span class="kw1">return</span> node.<span class="me1">right</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span> node.<span class="me1">right</span> <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
			    del.<span class="me1">success</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
				<span class="kw1">return</span>  node.<span class="me1">left</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span>  <span class="kw1">if</span> <span class="br0">(</span>node.<span class="me1">left</span> <span class="sy0">!=</span><span class="kw2">null</span> <span class="sy0">&amp;&amp;</span> node.<span class="me1">right</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span><span class="br0">{</span>
		<span class="coMULTI">/*
                //  non-standard method,
		// left rotate and all delete on left subtree
 
			TreapNode tmp = node.right;
			node.right = node.right.left;
		        tmp.left = node;
		        node = tmp;			
			node.left = deleteNode(k , node.left, del);
 
                 */</span>
 
	        <span class="co1">// more standard method ? doesn't disturb tree structure as much</span>
	        <span class="co1">// find leftmost descendant of the right child node and replace contents</span>
 
			TreapNode n2  <span class="sy0">=</span> node.<span class="me1">right</span><span class="sy0">;</span>
			TreapNode previous2 <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
			<span class="kw1">while</span> <span class="br0">(</span>n2.<span class="me1">left</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				previous2 <span class="sy0">=</span> n2<span class="sy0">;</span>
				n2 <span class="sy0">=</span> n2.<span class="me1">left</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>previous2 <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				previous2.<span class="me1">left</span> <span class="sy0">=</span> n2.<span class="me1">right</span><span class="sy0">;</span>
                                <span class="co1">//n2 has no parent link, orphaned</span>
			<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
				node.<span class="me1">right</span> <span class="sy0">=</span> n2.<span class="me1">right</span><span class="sy0">;</span>
                               <span class="co1">//n2 has no parent link, orphaned</span>
			<span class="br0">}</span>
 
			node.<span class="me1">k</span> <span class="sy0">=</span> n2.<span class="me1">k</span><span class="sy0">;</span>
			node.<span class="me1">val</span> <span class="sy0">=</span> n2.<span class="me1">val</span><span class="sy0">;</span>
			del.<span class="me1">success</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
                        <span class="co1">// once n2 out of scope, the orphaned node at n2 will be garbage collected, </span>
		<span class="br0">}</span>
 
		<span class="kw1">return</span> node<span class="sy0">;</span>
	<span class="br0">}</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="Red-Black_trees">Red-Black trees</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-18" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A red-black tree is a self-balancing tree structure that applies a color to each of it's nodes. The structure of a red-black tree must adhere to a set of rules which dictate how nodes of a certain color can be arranged. The application of these rules is performed when the tree is modified in some way, causing the rotation and recolouring of certain nodes when a new node is inserted or an old node is deleted. This keeps the red-black tree balanced, guaranteeing a search complexity of O(log <i>n</i>).</p>
<p>The rules that a red-black tree must adhere to are as follows:</p>
<ol>
<li>Each node must be either red or black.</li>
<li>The root is always black.</li>
<li>All leaves within the tree are black (leaves do not contain data and can be modelled as <i>null</i> or <i>nil</i> references in most programming languages).</li>
<li>Every red node must have two black child nodes.</li>
<li>Every path from a given node to any of its descendant leaves must contain the same number of black nodes.</li>
</ol>
<p>A red-black tree can be modelled as 2-3-4 tree , which is a sub-class of B tree (below). A black node with one red node can be seen as linked together as a 3-node , and a black node with 2 red child nodes can be seen as a 4-node.</p>
<p>4-nodes are <b>split</b> , producing a two node, and the middle node made red, which turns a parent of the middle node which has no red child from a 2-node to a 3-node, and turns a parent with one red child into a 4-node (but this doesn't occur with always left red nodes).</p>
<p>A in-line arrangement of two red nodes, is <b>rotated</b> into a parent with two red children, a 4-node, which is later <b>split</b>, as described before.</p>
<pre>
      A  <small>right rotate</small>            <small>'split 4-node'</small>   |<small>red</small>
  <small>red</small> / \    --&gt;        B           ---&gt;    B
    B               <small>red</small>/ \<small>red</small>               / \
<small>red</small> / \               C   A               C   A
  C   D                 /                   /
                       D                   D
</pre>
<p>An optimization mentioned by Sedgewick is that all right inserted red nodes are left rotated to become left red nodes, so that only inline left red nodes ever have to be rotated right before splitting. AA-trees (above) by Arne Anderson , described in a paper in 1993 , seem an earlier exposition of the simplification, however he suggested right-leaning 'red marking' instead of left leaning , as suggested by Sedgewick, but AA trees seem to have precedence over left leaning red black trees. It would be quite a shock if the Linux CFS scheduler was described in the future as 'AA based'.</p>
<p>In summary, red-black trees are a way of detecting two insertions into the same side, and levelling out the tree before things get worse . Two left sided insertions will be rotated, and the two right sided insertions, would look like two left sided insertions after left rotation to remove right leaning red nodes. Two balanced insertions for the same parent could result in a 4-node split without rotation, so the question arises as to whether a red black tree could be attacked with serial insertions of one sided triads of a &lt; P &lt; b , and then the next triad's P' &lt; a.</p>
<p>Python illustrative code follows</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="python source-python">
<pre class="de1">
RED <span class="sy0">=</span> <span class="nu0">1</span>
BLACK <span class="sy0">=</span> <span class="nu0">0</span>
<span class="kw1">class</span> Node:
  <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> k<span class="sy0">,</span> v<span class="br0">)</span>:
   <span class="co1"># all newly inserted node's are RED </span>
   <span class="kw2">self</span>.<span class="me1">color</span> <span class="sy0">=</span> RED
   <span class="kw2">self</span>.<span class="me1">k</span> <span class="sy0">=</span> k
   <span class="kw2">self</span>.<span class="me1">v</span> <span class="sy0">=</span> v
   <span class="kw2">self</span>.<span class="me1">left</span> <span class="sy0">=</span> <span class="kw2">None</span>
   <span class="kw2">self</span>.<span class="me1">right</span> <span class="sy0">=</span> <span class="kw2">None</span>
 
<span class="kw1">class</span> RBTree:
  <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:
    <span class="kw2">self</span>.<span class="me1">root</span> <span class="sy0">=</span> <span class="kw2">None</span>
 
  <span class="kw1">def</span> insert<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> k<span class="sy0">,</span> v<span class="br0">)</span> :
    <span class="kw2">self</span>.<span class="me1">root</span> <span class="sy0">=</span> <span class="kw2">self</span>._insert<span class="br0">(</span><span class="kw2">self</span>.<span class="me1">root</span><span class="sy0">,</span> k<span class="sy0">,</span>v<span class="br0">)</span>
 
  <span class="kw1">def</span> _insert<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span>  n <span class="sy0">,</span> k<span class="sy0">,</span> v<span class="br0">)</span>:
	<span class="kw1">if</span> n <span class="kw1">is</span> <span class="kw2">None</span>:
		<span class="kw1">return</span> Node<span class="br0">(</span>k<span class="sy0">,</span>v<span class="br0">)</span>
	<span class="kw1">if</span> k <span class="sy0">&lt;</span> n.<span class="me1">k</span> :
		n.<span class="me1">left</span> <span class="sy0">=</span> <span class="kw2">self</span>._insert<span class="br0">(</span>n.<span class="me1">left</span><span class="sy0">,</span> k <span class="sy0">,</span> v<span class="br0">)</span>
        <span class="kw1">elif</span> k <span class="sy0">&gt;</span> n.<span class="me1">k</span> :
		n.<span class="me1">right</span> <span class="sy0">=</span> <span class="kw2">self</span>._insert<span class="br0">(</span>n.<span class="me1">right</span><span class="sy0">,</span> k<span class="sy0">,</span> v<span class="br0">)</span>
                <span class="kw1">if</span> n.<span class="me1">right</span>.<span class="me1">color</span> <span class="kw1">is</span> RED:
			<span class="co1">#always on the left red's</span>
			<span class="co1">#left rotate</span>
			tmp <span class="sy0">=</span> n.<span class="me1">right</span>
			n.<span class="me1">right</span> <span class="sy0">=</span> tmp.<span class="me1">left</span>
			tmp.<span class="me1">left</span> <span class="sy0">=</span> n
			n <span class="sy0">=</span> tmp
 
                        <span class="co1">#color rotation is actually a swap</span>
			tmpcolor <span class="sy0">=</span> n.<span class="me1">color</span>
			n.<span class="me1">color</span> <span class="sy0">=</span> n.<span class="me1">left</span>.<span class="me1">color</span>
			n.<span class="me1">left</span>.<span class="me1">color</span> <span class="sy0">=</span> tmpcolor
 
	<span class="kw1">if</span> n.<span class="me1">left</span> <span class="sy0">&lt;&gt;</span> <span class="kw2">None</span> <span class="kw1">and</span> n.<span class="me1">left</span>.<span class="me1">left</span> <span class="sy0">&lt;&gt;</span> <span class="kw2">None</span> <span class="kw1">and</span> n.<span class="me1">left</span>.<span class="me1">left</span>.<span class="me1">color</span> <span class="sy0">==</span> RED <span class="kw1">and</span> n.<span class="me1">left</span>.<span class="me1">color</span> <span class="sy0">==</span> RED:
		<span class="co1"># right rotate in-line reds</span>
		<span class="kw1">print</span> <span class="st0">"right rotate"</span>
		tmp <span class="sy0">=</span> n.<span class="me1">left</span>
		n.<span class="me1">left</span> <span class="sy0">=</span> tmp.<span class="me1">right</span>
		tmp.<span class="me1">right</span> <span class="sy0">=</span> n
		n <span class="sy0">=</span> tmp
 
                <span class="co1">#color rotation is actually a swap</span>
		tmpcolor <span class="sy0">=</span> n.<span class="me1">color</span>
		n.<span class="me1">color</span> <span class="sy0">=</span> n.<span class="me1">right</span>.<span class="me1">color</span>
		n.<span class="me1">right</span>.<span class="me1">color</span> <span class="sy0">=</span> tmpcolor
 
		<span class="kw1">if</span> n.<span class="me1">left</span> <span class="sy0">&lt;&gt;</span> <span class="kw2">None</span>: <span class="kw1">print</span> n.<span class="me1">left</span>.<span class="me1">color</span><span class="sy0">,</span> n.<span class="me1">color</span><span class="sy0">,</span> n.<span class="me1">right</span>.<span class="me1">color</span>
 
	<span class="co1"># no need to test, because after right rotation, will need to split 3-node , as right rotation has brought red left grandchild to</span>
        <span class="co1">#become left red child, and left red child is now red right child</span>
        <span class="co1">#so there are two red children.</span>
 
        <span class="co1">#if n.left &lt;&gt; None and n.right &lt;&gt; None and n.left.color == RED and n.right.color == RED:</span>
		<span class="kw1">print</span> <span class="st0">"split"</span>
		n.<span class="me1">color</span> <span class="sy0">=</span> RED
		n.<span class="me1">left</span>.<span class="me1">color</span> <span class="sy0">=</span> BLACK
		n.<span class="me1">right</span>.<span class="me1">color</span> <span class="sy0">=</span> BLACK
 
	<span class="kw1">return</span> n
 
  <span class="kw1">def</span> find<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> k<span class="br0">)</span>:
	<span class="kw1">return</span> <span class="kw2">self</span>._find_rb<span class="br0">(</span>k<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">root</span><span class="br0">)</span>
 
  <span class="kw1">def</span> _find_rb<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> k<span class="sy0">,</span> n<span class="br0">)</span>:
	<span class="kw1">if</span> n <span class="kw1">is</span> <span class="kw2">None</span>:
		<span class="kw1">return</span> <span class="kw2">None</span>
	<span class="kw1">if</span> k <span class="sy0">&lt;</span> n.<span class="me1">k</span>:
		<span class="kw1">return</span> <span class="kw2">self</span>._find_rb<span class="br0">(</span> k<span class="sy0">,</span> n.<span class="me1">left</span><span class="br0">)</span>
	<span class="kw1">if</span> k <span class="sy0">&gt;</span> n. <span class="me1">k</span>:
		<span class="kw1">return</span> <span class="kw2">self</span>._find_rb<span class="br0">(</span> k<span class="sy0">,</span> n.<span class="me1">right</span><span class="br0">)</span>
	<span class="kw1">return</span> n.<span class="me1">v</span>
 
  <span class="kw1">def</span> inorder<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:
	<span class="kw2">self</span>.<span class="me1">inorder_visit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">root</span><span class="sy0">,</span> <span class="st0">"O"</span><span class="br0">)</span>
 
  <span class="kw1">def</span> inorder_visit<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> node<span class="sy0">,</span>label<span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span>:
	<span class="kw1">if</span> node <span class="kw1">is</span> <span class="kw2">None</span>: <span class="kw1">return</span>
	<span class="kw2">self</span>.<span class="me1">inorder_visit</span><span class="br0">(</span>node.<span class="me1">left</span><span class="sy0">,</span> label+<span class="st0">"/L"</span><span class="br0">)</span>
	<span class="kw1">print</span> label<span class="sy0">,</span> <span class="st0">"val="</span><span class="sy0">,</span> node.<span class="me1">v</span>
	<span class="kw2">self</span>.<span class="me1">inorder_visit</span><span class="br0">(</span>node.<span class="me1">right</span><span class="sy0">,</span> label+<span class="st0">"/R"</span><span class="br0">)</span>
 
 
<span class="kw1">def</span> test1<span class="br0">(</span>N<span class="br0">)</span>:
        t <span class="sy0">=</span> RBTree<span class="br0">(</span><span class="br0">)</span> 	
	<span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">xrange</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span>N<span class="br0">)</span>:
          t.<span class="me1">insert</span><span class="br0">(</span>i<span class="sy0">,</span>i<span class="br0">)</span>
 
	l <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span>		
	t.<span class="me1">inorder</span><span class="br0">(</span><span class="br0">)</span>
	<span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">xrange</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span>N<span class="br0">)</span>:
          x <span class="sy0">=</span>t.<span class="me1">find</span><span class="br0">(</span>i<span class="br0">)</span>
          <span class="kw1">if</span> x <span class="sy0">&lt;&gt;</span> <span class="kw2">None</span>:
		  l.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>x<span class="sy0">,</span> i<span class="br0">)</span> <span class="br0">)</span>
	<span class="kw1">print</span> <span class="st0">"found"</span><span class="sy0">,</span> <span class="kw2">len</span><span class="br0">(</span>l<span class="br0">)</span> 
 
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">"__main__"</span>:
	<span class="kw1">import</span> <span class="kw3">random</span>
	test1<span class="br0">(</span><span class="nu0">100000</span><span class="br0">)</span>
	test1<span class="br0">(</span><span class="nu0">1000</span><span class="br0">)</span>
	test1<span class="br0">(</span><span class="nu0">100</span><span class="br0">)</span>
	test1<span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="B_Trees">B Trees</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-19" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h5><span class="mw-headline" id="Executive_Summary">Executive Summary</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-20" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<ul>
<li>Whereas binary trees have nodes that have two children, with the left child and all of its descendants less than the "value" of the node, and the right child and all of its children more than the "value" of the node, a B-tree is a generalization of this.</li>
<li>The generalization is that instead of one value, the node has a list of values, and the list is of size n ( n &gt; 2 ). n is chosen to optimize storage , so that a node corresponds in size to a block for instance. This is in the days before ssd drives, but searching binary nodes stored on ssd ram would still be slower than searching ssd ram for a block of values, loading into normal ram and cpu cache, and searching the loaded list.</li>
<li>At the start of the list, the left child of the first element of the list has a value less than the first element , and so do all its children. To the right of the first element, is a child which has values more than the first element's value, as do all of its children, but also less than the value of the second element. Induction can be used , and this holds so for the child between element 1 and 2, 2 and 3, ... so on until n-1 and nth node.</li>
<li>To insert into a non-full B tree node, is to do a insertion into a sorted list.</li>
<li>In a B+ tree, insertions can only be done in leaf nodes, and non-leaf nodes hold copies of a demarcating value between adjacent child nodes e.g. the left most value of an element's right child's list of nodes.</li>
<li>Whenever a list becomes full e.g. there are n nodes, the node is "split", and this means making two new nodes, and passing the demarcating value upto the parent. (written by armchair wa-r who has never implemented a database.&#160;:P beat you to it).</li>
</ul>
<p>B Trees were described originally as generalizations of binary search trees , where a binary tree is a 2-node B-Tree, the 2 standing for two children, with 2-1 = 1 key separating the 2 children. Hence a 3-node has 2 values separating 3 children, and a N node has N children separated by N-1 keys.</p>
<p>A classical B-Tree can have N-node internal nodes, and empty 2-nodes as leaf nodes, or more conveniently, the children can either be a value or a pointer to the next N-node, so it is a union.</p>
<p>The main idea with B-trees is that one starts with a root N-node , which is able to hold N-1 entries, but on the Nth entry, the number of keys for the node is exhausted, and the node can be split into two half sized N/2 sized N nodes, separated by a single key K, which is equal to the right node's leftmost key, so any entry with key K2 equal or greater than K goes in the right node, and anything less than K goes in the left. When the root node is split, a new root node is created with one key, and a left child and a right child. Since there are N children but only N-1 entries, the leftmost child is stored as a separate pointer. If the leftmost pointer splits, then the left half becomes the new leftmost pointer, and the right half and separating key is inserted into the front of the entries.</p>
<p>An alternative is the B+ tree which is the most commonly used in database systems, because only values are stored in leaf nodes, whereas internal nodes only store keys and pointers to other nodes, putting a limit on the size of the datum value as the size of a pointer. This often allows internal nodes with more entries able to fit a certain block size, e.g. 4K is a common physical disc block size. Hence , if a B+ tree internal node is aligned to a physical disc block, then the main rate limiting factor of reading a block of a large index from disc because it isn't cached in a memory list of blocks is reduced to one block read.</p>
<p>A B+ tree has bigger internal nodes, so is wider and shorter in theory than an equivalent B tree which must fit all nodes within a given physical block size, hence overall it is a faster index due to greater fan out and less height to reach keys on average.</p>
<p>Apparently, this fan out is so important, compression can also be applied to the blocks to increase the number of entries fitting within a given underlying layer's block size (the underlying layer is often a filesystem block).</p>
<p>Most database systems use the B+ tree algorithm, including postgresql, mysql, derbydb, firebird, many Xbase index types, etc.</p>
<p>Many filesystems also use a B+ tree to manage their block layout (e.g. xfs, NTFS, etc).</p>
<p>Transwiki has a java implementation of a B+ Tree which uses traditional arrays as key list and value list.</p>
<p>Below is an example of a B Tree with test driver, and a B+ tree with a test driver. The memory / disc management is not included, but a usable hacked example can be found at <a href="/w/index.php?title=Data_Structures/All_Chapters/Hashing_Memory_Checking_Example&amp;action=edit&amp;redlink=1" class="new" title="Data Structures/All Chapters/Hashing Memory Checking Example (does not exist)">Hashing Memory Checking Example</a>.</p>
<p>This B+ tree implementation was written out of the B Tree , and the difference from the transwiki B+ tree is that it tries to use the semantics of SortedMap and SortedSet already present in the standard Java collections library.</p>
<p>Hence , the flat leaf block list of this B+ implementation can't contain blocks that don't contain any data, because the ordering depends on the first key of the entries, so a leaf block needs to be created with its first entry.</p>
<h4><span class="mw-headline" id="A_B_tree_java_example">A B tree java example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-21" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="java source-java">
<pre class="de1">
<span class="kw1">package</span> <span class="co2">btreemap</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">java.util.ArrayList</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Collection</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Collections</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Comparator</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.List</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Map</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Set</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.SortedMap</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.TreeMap</span><span class="sy0">;</span>
 
<span class="co3">/** can't work without setting a comparator */</span>
<span class="kw1">public</span> <span class="kw1">class</span> BTreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw1">implements</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
 
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> NODE_SIZE <span class="sy0">=</span> <span class="nu0">100</span><span class="sy0">;</span>
 
 
 
	@Override
	<span class="kw1">public</span> Comparator<span class="sy0">&lt;?</span> <span class="kw1">super</span> K<span class="sy0">&gt;</span> comparator<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
 
		<span class="kw1">return</span> comparator<span class="sy0">;</span>
	<span class="br0">}</span>
 
	Comparator<span class="sy0">&lt;</span> <span class="sy0">?</span> <span class="kw1">super</span> K<span class="sy0">&gt;</span> defaultComparator <span class="sy0">=</span> <span class="kw1">new</span>
	Comparator<span class="sy0">&lt;</span>  K<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
		@Override
		<span class="kw1">public</span> <span class="kw4">int</span> compare<span class="br0">(</span>K o1, K o2<span class="br0">)</span> <span class="br0">{</span>
			<span class="co1">// TODO Auto-generated method stub</span>
			<span class="kw3">Comparable</span> c1 <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">Comparable</span><span class="br0">)</span>o1<span class="sy0">;</span>
			<span class="kw3">Comparable</span> c2 <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">Comparable</span><span class="br0">)</span>o2<span class="sy0">;</span>
			<span class="kw1">return</span> c1.<span class="me1">compareTo</span><span class="br0">(</span>c2<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span><span class="sy0">;</span>
	Comparator<span class="sy0">&lt;?</span> <span class="kw1">super</span> K<span class="sy0">&gt;</span> comparator <span class="sy0">=</span> defaultComparator<span class="sy0">;</span>
	BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> root <span class="sy0">=</span> <span class="kw1">new</span> BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>NODE_SIZE, comparator<span class="br0">)</span><span class="sy0">;</span>
	<span class="co3">/**
	 * 
	 * @param comparator
	 *            - this is mandatory for the tree to work
	 */</span>
	<span class="kw1">public</span> <span class="kw4">void</span> setComparator<span class="br0">(</span>Comparator<span class="sy0">&lt;?</span> <span class="kw1">super</span> K<span class="sy0">&gt;</span> comparator<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">this</span>.<span class="me1">comparator</span> <span class="sy0">=</span> comparator<span class="sy0">;</span>
		root <span class="sy0">=</span> <span class="kw1">new</span> BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>NODE_SIZE, comparator<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="co3">/**
	 * 
	 *  
	 * 
	 * @param &lt;K&gt;
	 * @param &lt;V&gt;
	 *            the entry is associated with a right child block.
	 * 
	 */</span>
	<span class="kw1">static</span> <span class="kw1">class</span> BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
		K k<span class="sy0">;</span>
		V v<span class="sy0">;</span>
		BTBlock left<span class="sy0">;</span>
 
		BlockEntry<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
		<span class="br0">}</span>
 
		BlockEntry<span class="br0">(</span>K k, V v<span class="br0">)</span> <span class="br0">{</span>
			left <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
			<span class="kw1">this</span>.<span class="me1">k</span> <span class="sy0">=</span> k<span class="sy0">;</span>
			<span class="kw1">this</span>.<span class="me1">v</span> <span class="sy0">=</span> v<span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="co3">/**
	 * 
	 *  - this represents the result of splitting a full block into
	 *         a left block, and a right block, and a median key, the right
	 *         block and the median key held in a BlockEntry structure as above.
	 * @param &lt;K&gt;
	 * @param &lt;V&gt;
	 * @param &lt;V&gt;g
	 */</span>
	<span class="kw1">static</span> <span class="kw1">class</span> SplitRootEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
		BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> right<span class="sy0">;</span>
		BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> entry<span class="sy0">;</span>
 
		SplitRootEntry<span class="br0">(</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> entry, BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> right<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">this</span>.<span class="me1">right</span> <span class="sy0">=</span> right<span class="sy0">;</span>
			<span class="kw1">this</span>.<span class="me1">entry</span> <span class="sy0">=</span> entry<span class="sy0">;</span>
		<span class="br0">}</span>
 
		SplitRootEntry<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">super</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="co3">/**
	 * this is used to return a result of a possible split , during recursive
	 * calling.
	 * 
	 *  
	 * 
	 * @param &lt;K&gt;
	 * @param &lt;V&gt;
	 */</span>
	<span class="kw1">static</span> <span class="kw1">class</span> resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
 
		<span class="co3">/**
		 * null , if there is no split.
		 */</span>
		SplitRootEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> splitNode<span class="sy0">;</span>
		V v<span class="sy0">;</span>
 
		resultAndSplit<span class="br0">(</span>V v<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">this</span>.<span class="me1">v</span> <span class="sy0">=</span> v<span class="sy0">;</span>
		<span class="br0">}</span>
 
		resultAndSplit<span class="br0">(</span>SplitRootEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> entry, V v<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">this</span>.<span class="me1">v</span> <span class="sy0">=</span> v<span class="sy0">;</span>
			<span class="kw1">this</span>.<span class="me1">splitNode</span> <span class="sy0">=</span> entry<span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="co3">/**
	 * used to represent the insertion point after searching a block if compare
	 * is zero, then a match was found, and pos is the insertion entry if
	 * compare &lt; 0 and pos == 0 , then the search ended up less than the
	 * leftmost entry else compare &gt; 0 , and the search will be to the immediate
	 * right of pos.
	 * 
	 *  
	 * 
	 */</span>
	<span class="kw1">static</span> <span class="kw1">class</span> PosAndCompare <span class="br0">{</span>
		<span class="kw4">int</span> pos <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		<span class="kw4">int</span> compare <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">static</span> <span class="kw1">class</span> BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
		List<span class="sy0">&lt;</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> entries<span class="sy0">;</span>
		BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> rightBlock <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
		<span class="kw1">private</span> <span class="kw4">int</span> maxSz <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
 
		Comparator<span class="sy0">&lt;?</span> <span class="kw1">super</span> K<span class="sy0">&gt;</span> comparator<span class="sy0">;</span>
 
		Comparator<span class="sy0">&lt;?</span> <span class="kw1">super</span> K<span class="sy0">&gt;</span> comparator<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> comparator<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> BTBlock<span class="br0">(</span><span class="kw4">int</span> size, Comparator<span class="sy0">&lt;?</span> <span class="kw1">super</span> K<span class="sy0">&gt;</span> c<span class="br0">)</span> <span class="br0">{</span>
			entries <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			maxSz <span class="sy0">=</span> size<span class="sy0">;</span>
			<span class="kw1">this</span>.<span class="me1">comparator</span> <span class="sy0">=</span> c<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="co3">/**
		 * PosAndCompare usage: if compare is zero, then a match was found, and
		 * pos is the insertion entry if compare &lt; 0 and pos == 0 , then the
		 * search ended up less than the leftmost entry else compare &gt; 0 , and
		 * the search will be to the immediate right of pos.
		 * 
		 *  
		 * 
		 */</span>
		<span class="co1">// private void blockSearch(K k, PosAndCompare pc) {</span>
		<span class="co1">// for (int i = 0; i &lt; entries.size(); ++i) {</span>
		<span class="co1">// pc.compare = comparator.compare(k, entries.get(i).k);</span>
		<span class="co1">// if (pc.compare == 0) {</span>
		<span class="co1">// pc.pos = i;</span>
		<span class="co1">// return;</span>
		<span class="co1">// }</span>
		<span class="co1">// if (pc.compare &lt; 0 &amp;&amp; i == 0) {</span>
		<span class="co1">// pc.pos = 0;</span>
		<span class="co1">// return;</span>
		<span class="co1">// }</span>
		<span class="co1">//</span>
		<span class="co1">// if (pc.compare &lt; 0) {</span>
		<span class="co1">// pc.pos = i - 1;</span>
		<span class="co1">// pc.compare = 1;</span>
		<span class="co1">// return;</span>
		<span class="co1">// }</span>
		<span class="co1">//</span>
		<span class="co1">// }</span>
		<span class="co1">// pc.pos = entries.size() - 1;</span>
		<span class="co1">// pc.compare = 1;</span>
		<span class="co1">//</span>
		<span class="co1">// // binary search, it's hard to get it right !</span>
		<span class="co1">// // int left = 0;</span>
		<span class="co1">// // int right = entries.size();</span>
		<span class="co1">// //</span>
		<span class="co1">// // while (left &lt;= right &amp;&amp; left &lt; entries.size()) {</span>
		<span class="co1">// // // pc.pos = (right - left) / 2 + left;</span>
		<span class="co1">// // pc.pos = (left + right) / 2;</span>
		<span class="co1">// // pc.compare = comparator().compare(k, entries.get(pc.pos).k);</span>
		<span class="co1">// // if (pc.compare &lt; 0) {</span>
		<span class="co1">// // right = pc.pos - 1;</span>
		<span class="co1">// // } else if (pc.compare &gt; 0) {</span>
		<span class="co1">// // left = pc.pos + 1;</span>
		<span class="co1">// // } else {</span>
		<span class="co1">// // return;</span>
		<span class="co1">// // }</span>
		<span class="co1">// // }</span>
		<span class="co1">// //</span>
		<span class="co1">// // BlockEntry&lt;K, V&gt; e = new BlockEntry&lt;K, V&gt;(k, null);</span>
		<span class="co1">// // pc.pos = Collections.binarySearch(entries, e, cmp);</span>
		<span class="co1">//</span>
		<span class="co1">// }</span>
 
		Comparator<span class="sy0">&lt;</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> cmp <span class="sy0">=</span> <span class="kw1">new</span> Comparator<span class="sy0">&lt;</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
			@Override
			<span class="kw1">public</span> <span class="kw4">int</span> compare<span class="br0">(</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> o1, BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> o2<span class="br0">)</span> <span class="br0">{</span>
				<span class="co1">// TODO Auto-generated method stub</span>
				<span class="kw1">return</span> comparator.<span class="me1">compare</span><span class="br0">(</span>o1.<span class="me1">k</span>, o2.<span class="me1">k</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="br0">}</span>
		<span class="br0">}</span><span class="sy0">;</span>
 
		resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> put<span class="br0">(</span>K k, V v<span class="br0">)</span> <span class="br0">{</span>
			V v2<span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">(</span>entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
				entries.<span class="me1">add</span><span class="br0">(</span><span class="kw1">new</span> BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">return</span> <span class="kw1">new</span> resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>v<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
 
				<span class="co1">// PosAndCompare pc = new PosAndCompare();</span>
				BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> e <span class="sy0">=</span> <span class="kw1">new</span> BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw4">int</span> res <span class="sy0">=</span> <span class="kw3">Collections</span>.<span class="me1">binarySearch</span><span class="br0">(</span>entries, e, cmp<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw4">int</span> index <span class="sy0">=</span> <span class="sy0">-</span>res <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span>
				<span class="co1">// blockSearch(k, pc);</span>
 
				<span class="co1">// a match</span>
				<span class="kw1">if</span> <span class="br0">(</span>res <span class="sy0">&gt;=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
					v2 <span class="sy0">=</span> entries.<span class="me1">get</span><span class="br0">(</span>res<span class="br0">)</span>.<span class="me1">v</span><span class="sy0">;</span>
					entries.<span class="me1">get</span><span class="br0">(</span>res<span class="br0">)</span>.<span class="me1">v</span> <span class="sy0">=</span> v<span class="sy0">;</span>
					<span class="kw1">return</span> <span class="kw1">new</span> resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>v2<span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span>
 
				<span class="co1">// follow leftBlock if search is to left of first entry</span>
 
				<span class="kw1">if</span> <span class="br0">(</span>index <span class="sy0">==</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> rightBlock <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
 
					resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> result <span class="sy0">=</span> rightBlock.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
					<span class="kw1">if</span> <span class="br0">(</span>result.<span class="me1">splitNode</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
						rightBlock <span class="sy0">=</span> result.<span class="me1">splitNode</span>.<span class="me1">right</span><span class="sy0">;</span>
						entries.<span class="me1">add</span><span class="br0">(</span>result.<span class="me1">splitNode</span>.<span class="me1">entry</span><span class="br0">)</span><span class="sy0">;</span>
					<span class="br0">}</span>
				<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>index <span class="sy0">==</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> rightBlock <span class="sy0">==</span> <span class="kw2">null</span>
						<span class="sy0">&amp;&amp;</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">==</span> maxSz<span class="br0">)</span> <span class="br0">{</span>
					rightBlock <span class="sy0">=</span> <span class="kw1">new</span> BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="kw1">this</span>.<span class="me1">maxSz</span>, comparator<span class="br0">)</span><span class="sy0">;</span>
					resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> result <span class="sy0">=</span> rightBlock.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
 
				<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>index <span class="sy0">&lt;</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span>
						<span class="sy0">&amp;&amp;</span> entries.<span class="me1">get</span><span class="br0">(</span>index<span class="br0">)</span>.<span class="me1">left</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
					<span class="co1">// follow right block if it exists</span>
					resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> result <span class="sy0">=</span> entries.<span class="me1">get</span><span class="br0">(</span>index<span class="br0">)</span>.<span class="me1">left</span>.<span class="me1">put</span><span class="br0">(</span>
							k, v<span class="br0">)</span><span class="sy0">;</span>
					<span class="kw1">if</span> <span class="br0">(</span>result.<span class="me1">splitNode</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
						entries.<span class="me1">get</span><span class="br0">(</span>index<span class="br0">)</span>.<span class="me1">left</span> <span class="sy0">=</span> result.<span class="me1">splitNode</span>.<span class="me1">right</span><span class="sy0">;</span>
						<span class="co1">// add to the left</span>
						entries.<span class="me1">add</span><span class="br0">(</span>index, result.<span class="me1">splitNode</span>.<span class="me1">entry</span><span class="br0">)</span><span class="sy0">;</span>
 
					<span class="br0">}</span>
 
				<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
					<span class="co1">// add to the left</span>
					entries.<span class="me1">add</span><span class="br0">(</span>index, e<span class="br0">)</span><span class="sy0">;</span>
 
				<span class="br0">}</span>
 
				<span class="co1">// check if overflowed block , split if it has.</span>
				<span class="kw1">if</span> <span class="br0">(</span>entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&gt;</span> maxSz<span class="br0">)</span> <span class="br0">{</span>
					<span class="kw4">int</span> mid <span class="sy0">=</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="sy0">;</span>
 
					<span class="co1">// copy right half to new entries list.</span>
					List<span class="sy0">&lt;</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> leftEntries <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
					<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> mid<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
						leftEntries.<span class="me1">add</span><span class="br0">(</span>entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
					<span class="br0">}</span>
 
					BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> centreEntry <span class="sy0">=</span> entries.<span class="me1">get</span><span class="br0">(</span>mid<span class="br0">)</span><span class="sy0">;</span>
 
					BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> leftBlock <span class="sy0">=</span> <span class="kw1">new</span> BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>maxSz,
							comparator<span class="br0">)</span><span class="sy0">;</span>
 
					leftBlock.<span class="me1">entries</span> <span class="sy0">=</span> leftEntries<span class="sy0">;</span>
 
					<span class="co1">// the median entry's left block is the new left block's</span>
					<span class="co1">// leftmost block</span>
					leftBlock.<span class="me1">rightBlock</span> <span class="sy0">=</span> centreEntry.<span class="me1">left</span><span class="sy0">;</span>
					<span class="co1">// the new right block becomes the right block</span>
					centreEntry.<span class="me1">left</span> <span class="sy0">=</span> leftBlock<span class="sy0">;</span>
 
					<span class="co1">// reduce the old block's entries into its left half of</span>
					<span class="co1">// entries.</span>
					ArrayList<span class="sy0">&lt;</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> newEntries <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
					<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> mid <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span>
						newEntries.<span class="me1">add</span><span class="br0">(</span>entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
					<span class="kw1">this</span>.<span class="me1">entries</span> <span class="sy0">=</span> newEntries<span class="sy0">;</span>
					<span class="co1">// create a return object, with the reduced old block as the</span>
					<span class="co1">// left block</span>
					<span class="co1">// and the median entry with the new right block attached</span>
 
					SplitRootEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> split <span class="sy0">=</span> <span class="kw1">new</span> SplitRootEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>
							centreEntry, <span class="kw1">this</span><span class="br0">)</span><span class="sy0">;</span>
 
					<span class="co1">// the keyed value didn't exist before , so null</span>
					<span class="kw1">return</span> <span class="kw1">new</span> resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>split, <span class="kw2">null</span><span class="br0">)</span><span class="sy0">;</span>
 
				<span class="br0">}</span>
				<span class="kw1">return</span> <span class="kw1">new</span> resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>v<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
		<span class="br0">}</span>
 
		V get<span class="br0">(</span>K k<span class="br0">)</span> <span class="br0">{</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span>
				<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
 
			BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> e <span class="sy0">=</span> <span class="kw1">new</span> BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>k, <span class="kw2">null</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> res <span class="sy0">=</span> <span class="kw3">Collections</span>.<span class="me1">binarySearch</span><span class="br0">(</span>entries, e, cmp<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> index <span class="sy0">=</span> <span class="sy0">-</span>res <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>res <span class="sy0">&gt;=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw1">return</span> entries.<span class="me1">get</span><span class="br0">(</span>res<span class="br0">)</span>.<span class="me1">v</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>index <span class="sy0">==</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> rightBlock <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw1">return</span> rightBlock.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>index <span class="sy0">&lt;</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span>
					<span class="sy0">&amp;&amp;</span> entries.<span class="me1">get</span><span class="br0">(</span>index<span class="br0">)</span>.<span class="me1">left</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw1">return</span> <span class="br0">(</span>V<span class="br0">)</span> entries.<span class="me1">get</span><span class="br0">(</span>index<span class="br0">)</span>.<span class="me1">left</span>.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span> <span class="kw1">else</span>
				<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw4">void</span> getRange<span class="br0">(</span><span class="kw3">SortedMap</span> map, K k1, K k2<span class="br0">)</span> <span class="br0">{</span>
			BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> e <span class="sy0">=</span> <span class="kw1">new</span> BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>k1, <span class="kw2">null</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> res <span class="sy0">=</span> <span class="kw3">Collections</span>.<span class="me1">binarySearch</span><span class="br0">(</span>entries, e, cmp<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> index <span class="sy0">=</span> <span class="sy0">-</span>res <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span>
			BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> e2 <span class="sy0">=</span> <span class="kw1">new</span> BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>k2, <span class="kw2">null</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> res2 <span class="sy0">=</span> <span class="kw3">Collections</span>.<span class="me1">binarySearch</span><span class="br0">(</span>entries, e2, cmp<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> index2 <span class="sy0">=</span> <span class="sy0">-</span>res2 <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span>
 
			<span class="kw4">int</span> from <span class="sy0">=</span> res <span class="sy0">&gt;=</span> <span class="nu0">0</span> <span class="sy0">?</span> res <span class="sy0">:</span> index<span class="sy0">;</span>
			<span class="kw4">int</span> to <span class="sy0">=</span> res2 <span class="sy0">&gt;=</span> <span class="nu0">0</span> <span class="sy0">?</span> res2 <span class="sy0">:</span> index2<span class="sy0">;</span>
 
			<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> from<span class="sy0">;</span> i <span class="sy0">&lt;=</span> to<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
 
				<span class="kw1">if</span> <span class="br0">(</span>i <span class="sy0">&lt;</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>i <span class="sy0">&gt;</span> from <span class="sy0">||</span> res <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">)</span>
						<span class="sy0">&amp;&amp;</span> entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>.<span class="me1">left</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
					entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>.<span class="me1">left</span>.<span class="me1">getRange</span><span class="br0">(</span>map, k1, k2<span class="br0">)</span><span class="sy0">;</span>
					<span class="co1">// if (pc2.pos == pc.pos)</span>
					<span class="co1">// break;</span>
				<span class="br0">}</span>
				<span class="kw1">if</span> <span class="br0">(</span>i <span class="sy0">&lt;</span> to <span class="sy0">||</span> res2 <span class="sy0">&gt;=</span> <span class="nu0">0</span><span class="br0">)</span>
					map.<span class="me1">put</span><span class="br0">(</span>entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>.<span class="me1">k</span>, entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>.<span class="me1">v</span><span class="br0">)</span><span class="sy0">;</span>
 
				<span class="kw1">if</span> <span class="br0">(</span>i <span class="sy0">==</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> rightBlock <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
					rightBlock.<span class="me1">getRange</span><span class="br0">(</span>map, k1, k2<span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span>
 
			<span class="br0">}</span>
 
		<span class="br0">}</span>
 
		K headKey<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">if</span> <span class="br0">(</span>rightBlock <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw1">return</span> rightBlock.<span class="me1">headKey</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
			<span class="kw1">return</span> entries.<span class="me1">get</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>.<span class="me1">k</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		K tailKey<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw4">int</span> i <span class="sy0">=</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">(</span>entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>.<span class="me1">left</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw1">return</span> <span class="br0">(</span>K<span class="br0">)</span> entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>.<span class="me1">left</span>.<span class="me1">tailKey</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
			<span class="kw1">return</span> entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>.<span class="me1">k</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw4">void</span> show<span class="br0">(</span><span class="kw4">int</span> n<span class="br0">)</span> <span class="br0">{</span>
			showTabs<span class="br0">(</span>n<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
				BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> e <span class="sy0">=</span> entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">print</span><span class="br0">(</span><span class="st0">"#"</span> <span class="sy0">+</span> i <span class="sy0">+</span> <span class="st0">":("</span> <span class="sy0">+</span> e.<span class="me1">k</span> <span class="sy0">+</span> <span class="st0">":"</span> <span class="sy0">+</span> e.<span class="me1">v</span> <span class="sy0">+</span> <span class="st0">")  "</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
			<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			showTabs<span class="br0">(</span>n<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>rightBlock <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">print</span><span class="br0">(</span><span class="st0">"Left Block<span class="es0">\n</span>"</span><span class="br0">)</span><span class="sy0">;</span>
				rightBlock.<span class="me1">show</span><span class="br0">(</span>n <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
				<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"No Left Block"</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
			<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
				BlockEntry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> e <span class="sy0">=</span> entries.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
				showTabs<span class="br0">(</span>n<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">if</span> <span class="br0">(</span>e.<span class="me1">left</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
 
					<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"block right of #"</span> <span class="sy0">+</span> i<span class="br0">)</span><span class="sy0">;</span>
					e.<span class="me1">left</span>.<span class="me1">show</span><span class="br0">(</span>n <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
					<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"No block right of #"</span> <span class="sy0">+</span> i<span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span>
			<span class="br0">}</span>
			showTabs<span class="br0">(</span>n<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"End of Block Info<span class="es0">\n</span><span class="es0">\n</span>"</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">private</span> <span class="kw4">void</span> showTabs<span class="br0">(</span><span class="kw4">int</span> n<span class="br0">)</span> <span class="br0">{</span>
			<span class="co1">// TODO Auto-generated method stub</span>
			<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> n<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
				<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">print</span><span class="br0">(</span><span class="st0">"  "</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
 
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> subMap<span class="br0">(</span>K fromKey, K toKey<span class="br0">)</span> <span class="br0">{</span>
		TreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map <span class="sy0">=</span> <span class="kw1">new</span> TreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		root.<span class="me1">getRange</span><span class="br0">(</span>map, fromKey, toKey<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">return</span> map<span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> headMap<span class="br0">(</span>K toKey<span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> subMap<span class="br0">(</span>root.<span class="me1">headKey</span><span class="br0">(</span><span class="br0">)</span>, toKey<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span><span class="sy0">;</span>
 
	@Override
	<span class="kw1">public</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> tailMap<span class="br0">(</span>K fromKey<span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> subMap<span class="br0">(</span>fromKey, root.<span class="me1">tailKey</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> K firstKey<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> root.<span class="me1">headKey</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> K lastKey<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> root.<span class="me1">tailKey</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">int</span> size<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">boolean</span> isEmpty<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">boolean</span> containsKey<span class="br0">(</span><span class="kw3">Object</span> key<span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> get<span class="br0">(</span>key<span class="br0">)</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">boolean</span> containsValue<span class="br0">(</span><span class="kw3">Object</span> value<span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> V get<span class="br0">(</span><span class="kw3">Object</span> key<span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> root.<span class="me1">get</span><span class="br0">(</span><span class="br0">(</span>K<span class="br0">)</span> key<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> V put<span class="br0">(</span>K key, V value<span class="br0">)</span> <span class="br0">{</span>
		resultAndSplit<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> root.<span class="me1">put</span><span class="br0">(</span>key, value<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">(</span>b.<span class="me1">splitNode</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
			root <span class="sy0">=</span> <span class="kw1">new</span> BTBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>root.<span class="me1">maxSz</span>, root.<span class="me1">comparator</span><span class="br0">)</span><span class="sy0">;</span>
			root.<span class="me1">rightBlock</span> <span class="sy0">=</span> b.<span class="me1">splitNode</span>.<span class="me1">right</span><span class="sy0">;</span>
			root.<span class="me1">entries</span>.<span class="me1">add</span><span class="br0">(</span>b.<span class="me1">splitNode</span>.<span class="me1">entry</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> b.<span class="me1">v</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> V remove<span class="br0">(</span><span class="kw3">Object</span> key<span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">void</span> putAll<span class="br0">(</span>Map<span class="sy0">&lt;?</span> <span class="kw1">extends</span> K, <span class="sy0">?</span> <span class="kw1">extends</span> V<span class="sy0">&gt;</span> m<span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
 
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">void</span> clear<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
 
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Set<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> keySet<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Collection<span class="sy0">&lt;</span>V<span class="sy0">&gt;</span> values<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Set<span class="sy0">&lt;</span>java.<span class="me1">util</span>.<span class="kw3">Map</span>.<span class="me1">Entry</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> entrySet<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
<span class="br0">}</span>
 
<span class="kw1">package</span> <span class="co2">btreemap</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">java.util.ArrayList</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Comparator</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.List</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Random</span><span class="sy0">;</span>
 
<span class="kw1">public</span> <span class="kw1">class</span> TestBtree <span class="br0">{</span>
 
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> N <span class="sy0">=</span> <span class="nu0">50000</span><span class="sy0">;</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
		BTreeMap<span class="sy0">&lt;</span><span class="kw3">Integer</span>, Integer<span class="sy0">&gt;</span> map <span class="sy0">=</span> <span class="kw1">new</span> BTreeMap<span class="sy0">&lt;</span><span class="kw3">Integer</span> , Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw3">Random</span> r <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">Random</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		ArrayList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> t <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		Comparator<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> comparator <span class="sy0">=</span> <span class="kw1">new</span> Comparator<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
			@Override
			<span class="kw1">public</span> <span class="kw4">int</span> compare<span class="br0">(</span><span class="kw3">Integer</span> o1, <span class="kw3">Integer</span> o2<span class="br0">)</span> <span class="br0">{</span>
				<span class="co1">// TODO Auto-generated method stub</span>
				<span class="kw1">return</span> o1.<span class="me1">intValue</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">-</span> o2.<span class="me1">intValue</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
		<span class="br0">}</span><span class="sy0">;</span>
		map.<span class="me1">setComparator</span><span class="br0">(</span>comparator<span class="br0">)</span><span class="sy0">;</span>
		List<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> testVals <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span><span class="nu0">0</span> <span class="sy0">;</span> i <span class="sy0">&lt;</span> N <span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			testVals.<span class="me1">add</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i <span class="br0">)</span> <span class="br0">{</span>
			<span class="kw4">int</span> x <span class="sy0">=</span> r.<span class="me1">nextInt</span><span class="br0">(</span>testVals.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			 x <span class="sy0">=</span> testVals.<span class="me1">remove</span><span class="br0">(</span>x<span class="br0">)</span><span class="sy0">;</span>
			<span class="co1">//int x=i;</span>
			t.<span class="me1">add</span><span class="br0">(</span>x<span class="br0">)</span><span class="sy0">;</span>
			map.<span class="me1">put</span><span class="br0">(</span>x, x<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"output "</span> <span class="sy0">+</span> N <span class="sy0">+</span> <span class="st0">" vals"</span><span class="br0">)</span><span class="sy0">;</span>
 
		map.<span class="me1">root</span>.<span class="me1">show</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw4">int</span> x <span class="sy0">=</span> t.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">if</span> <span class="br0">(</span> x <span class="sy0">!=</span> map.<span class="me1">get</span><span class="br0">(</span>x<span class="br0">)</span><span class="br0">)</span> 
				<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Expecting "</span> <span class="sy0">+</span> x <span class="sy0">+</span> <span class="st0">" got "</span> <span class="sy0">+</span> map.<span class="me1">get</span><span class="br0">(</span>x<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
 
		<span class="br0">}</span>
		<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Checked "</span> <span class="sy0">+</span> N <span class="sy0">+</span> <span class="st0">" entries"</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<p><br /></p>
<p><br /></p>
<h4><span class="mw-headline" id="A_B.2B_tree_java_example">A B+ tree java example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-22" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Experiments include timing the run ( e.g. time java -cp . btreemap.BPlusTreeTest1 ) , using an external blocksize + 1 sized leaf block size, so that this is basically the underlying entries TreeMap only , vs , say, 400 internal node size, and 200 external node size . Other experiments include using a SkipListMap instead of a TreeMap.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="java source-java">
<pre class="de1">
<span class="kw1">package</span> <span class="co2">btreemap</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">java.util.Collection</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Comparator</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Map</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Set</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.SortedMap</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.SortedSet</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.TreeMap</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.TreeSet</span><span class="sy0">;</span>
<span class="co3">/**
 * a B+ tree, where leaf blocks contain key-value pairs and 
 * internal blocks have keyed entries pointing to other internal blocks
 * or leaf blocks whose keys are greater than or equal to the associated key.
 * 
 * @author syan
 *
 * @param &lt;K&gt; key type implements Comparable
 * @param &lt;V&gt; value type
 */</span>
<span class="kw1">public</span> <span class="kw1">class</span> BPlusTreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw1">implements</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
 
	<span class="kw1">private</span> <span class="kw4">int</span> maxInternalBlockSize<span class="sy0">;</span>
	BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> root<span class="sy0">;</span>
	<span class="kw1">private</span> <span class="kw4">int</span> maxExternalSize<span class="sy0">;</span>
 
	BPlusTreeMap<span class="br0">(</span><span class="kw4">int</span> maxInternalSize, <span class="kw4">int</span> maxExternalSize<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">this</span>.<span class="me1">maxInternalBlockSize</span> <span class="sy0">=</span> maxInternalSize<span class="sy0">;</span>
		<span class="kw1">this</span>.<span class="me1">maxExternalSize</span> <span class="sy0">=</span> maxExternalSize<span class="sy0">;</span>
 
	<span class="br0">}</span>
 
	<span class="kw1">static</span> <span class="kw1">class</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
		V v<span class="sy0">;</span>
		K k<span class="sy0">;</span>
		BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> left, right<span class="sy0">;</span>
		<span class="kw4">boolean</span> split<span class="sy0">;</span>
 
		<span class="kw1">public</span> <span class="kw4">boolean</span> isSplit<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> split<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> <span class="kw4">void</span> setSplit<span class="br0">(</span><span class="kw4">boolean</span> split<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">this</span>.<span class="me1">split</span> <span class="sy0">=</span> split<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> SplitOrValue<span class="br0">(</span>V value<span class="br0">)</span> <span class="br0">{</span>
			v <span class="sy0">=</span> value<span class="sy0">;</span>
			setSplit<span class="br0">(</span><span class="kw2">false</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> SplitOrValue<span class="br0">(</span>BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> left2,
				BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> bPlusBlock<span class="br0">)</span> <span class="br0">{</span>
			left <span class="sy0">=</span> left2<span class="sy0">;</span>
			right <span class="sy0">=</span> bPlusBlock<span class="sy0">;</span>
			k <span class="sy0">=</span> right.<span class="me1">firstKey</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			setSplit<span class="br0">(</span><span class="kw2">true</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="co1">// System.err.printf("\n\n** split occured %s**\n\n", bPlusBlock</span>
			<span class="co1">// .getClass().getSimpleName());</span>
		<span class="br0">}</span>
 
	<span class="br0">}</span>
 
	<span class="kw1">static</span> <span class="kw1">abstract</span> <span class="kw1">class</span> BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
		<span class="kw1">public</span> <span class="kw1">abstract</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> put<span class="br0">(</span>K k, V v<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">abstract</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> splitBlock<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">public</span> <span class="kw1">abstract</span> V get<span class="br0">(</span>K k<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">public</span> <span class="kw1">abstract</span> <span class="kw4">boolean</span> isEmpty<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">public</span> <span class="kw1">abstract</span> K firstKey<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
	<span class="br0">}</span>
 
	SortedSet<span class="sy0">&lt;</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> blockList <span class="sy0">=</span> getLeafBlockSet<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
	SortedSet<span class="sy0">&lt;</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> getLeafBlockSet<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// return new ConcurrentSkipListSet&lt;BPlusLeafBlock&lt;K, V&gt;&gt;();</span>
		<span class="kw1">return</span> <span class="kw1">new</span> TreeSet<span class="sy0">&lt;</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">static</span> <span class="kw1">class</span> BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw1">extends</span> BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw1">implements</span>
			Comparable<span class="sy0">&lt;</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> <span class="br0">{</span>
		SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> entries <span class="sy0">=</span> getEntryCollection<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">static</span> <span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> getEntryCollection<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> <span class="kw1">new</span> TreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw4">int</span> maxSize<span class="sy0">;</span>
		<span class="kw1">private</span> BPlusTreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> owner<span class="sy0">;</span>
 
		<span class="kw1">public</span> <span class="kw4">boolean</span> isEmpty<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> entries.<span class="me1">isEmpty</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> BPlusLeafBlock<span class="br0">(</span>BPlusTreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> bPlusTreeMap,
				SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> rightEntries<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">this</span>.<span class="me1">owner</span> <span class="sy0">=</span> bPlusTreeMap<span class="sy0">;</span>
			maxSize <span class="sy0">=</span> owner.<span class="me1">maxExternalSize</span><span class="sy0">;</span>
			entries <span class="sy0">=</span> rightEntries<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> put<span class="br0">(</span>K k, V v<span class="br0">)</span> <span class="br0">{</span>
			V v2 <span class="sy0">=</span> entries.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&gt;=</span> maxSize<span class="br0">)</span>
				<span class="kw1">return</span> splitBlock<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">else</span>
				<span class="kw1">return</span> <span class="kw1">new</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>v2<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="br0">}</span>
 
		<span class="kw1">public</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> splitBlock<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
			SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> leftEntries <span class="sy0">=</span> getEntryCollection<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> rightEntries <span class="sy0">=</span> getEntryCollection<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
 
			<span class="kw1">for</span> <span class="br0">(</span>Entry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> e <span class="sy0">:</span> entries.<span class="me1">entrySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="co1">// System.out.println(this.getClass().getSimpleName() +</span>
				<span class="co1">// " split entry " + e.getKey());</span>
				<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">++</span>i <span class="sy0">&lt;=</span> maxSize <span class="sy0">/</span> <span class="nu0">2</span><span class="br0">)</span>
					leftEntries.<span class="me1">put</span><span class="br0">(</span>e.<span class="me1">getKey</span><span class="br0">(</span><span class="br0">)</span>, e.<span class="me1">getValue</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">else</span>
					rightEntries.<span class="me1">put</span><span class="br0">(</span>e.<span class="me1">getKey</span><span class="br0">(</span><span class="br0">)</span>, e.<span class="me1">getValue</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
			BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> right <span class="sy0">=</span> createBlock<span class="br0">(</span>rightEntries<span class="br0">)</span><span class="sy0">;</span>
			<span class="co1">// System.out.println("finished block split");</span>
			<span class="co1">// System.out.println("\nleft block");</span>
			<span class="co1">// for (K ik : leftEntries.keySet()) {</span>
			<span class="co1">// System.out.print(ik + " ");</span>
			<span class="co1">// }</span>
			<span class="co1">// System.out.println("\nright block");</span>
			<span class="co1">// for (K ik : right.entries.keySet()) {</span>
			<span class="co1">// System.out.print(ik + " ");</span>
			<span class="co1">// }</span>
			<span class="co1">// System.out.println("\n");</span>
			<span class="kw1">this</span>.<span class="me1">entries</span> <span class="sy0">=</span> leftEntries<span class="sy0">;</span>
 
			<span class="kw1">return</span> <span class="kw1">new</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="kw1">this</span>, right<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">private</span> BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> createBlock<span class="br0">(</span>SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> rightEntries<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> owner.<span class="me1">createLeafBlock</span><span class="br0">(</span>rightEntries<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		@Override
		<span class="kw1">public</span> V get<span class="br0">(</span>K k<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> entries.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		@Override
		<span class="kw1">public</span> <span class="kw4">int</span> compareTo<span class="br0">(</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> o<span class="br0">)</span> <span class="br0">{</span>
 
			<span class="kw1">return</span> <span class="br0">(</span><span class="br0">(</span>Comparable<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span><span class="br0">)</span> entries.<span class="me1">firstKey</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">compareTo</span><span class="br0">(</span>o.<span class="me1">entries</span>
					.<span class="me1">firstKey</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		@Override
		<span class="kw1">public</span> K firstKey<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> entries.<span class="me1">firstKey</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
	<span class="br0">}</span>
 
 
	<span class="kw1">static</span> <span class="kw1">class</span> BPlusBranchBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw1">extends</span> BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
		SortedMap<span class="sy0">&lt;</span>K, BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> entries <span class="sy0">=</span> createInternalBlockEntries<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw4">int</span> maxSize<span class="sy0">;</span>
 
		<span class="kw1">private</span> BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> left<span class="sy0">;</span>
 
		<span class="kw1">public</span> <span class="kw4">boolean</span> isEmpty<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> entries.<span class="me1">isEmpty</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> BPlusBranchBlock<span class="br0">(</span><span class="kw4">int</span> maxSize2<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">this</span>.<span class="me1">maxSize</span> <span class="sy0">=</span> maxSize2<span class="sy0">;</span>
 
		<span class="br0">}</span>
 
		<span class="kw1">public</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> put<span class="br0">(</span>K k, V v<span class="br0">)</span> <span class="br0">{</span>
			BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> getBlock<span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
 
			SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> sv <span class="sy0">=</span> b.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>sv.<span class="me1">isSplit</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
 
				entries.<span class="me1">put</span><span class="br0">(</span>sv.<span class="me1">k</span>, sv.<span class="me1">right</span><span class="br0">)</span><span class="sy0">;</span>
 
				<span class="kw1">if</span> <span class="br0">(</span>entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&gt;=</span> maxSize<span class="br0">)</span>
					sv <span class="sy0">=</span> splitBlock<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">else</span>
					sv <span class="sy0">=</span> <span class="kw1">new</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="kw2">null</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
			<span class="kw1">return</span> sv<span class="sy0">;</span>
		<span class="br0">}</span>
 
		BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> getBlock<span class="br0">(</span>K k<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">assert</span> <span class="br0">(</span>entries.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span>
			BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> entries.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">(</span>b <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="co1">// headMap returns less than k</span>
				SortedMap<span class="sy0">&lt;</span>K, BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> head <span class="sy0">=</span> entries.<span class="me1">headMap</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">if</span> <span class="br0">(</span>head.<span class="me1">isEmpty</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
					b <span class="sy0">=</span> left<span class="sy0">;</span>
 
					<span class="co1">// System.out.println("for key " + k</span>
					<span class="co1">// + " getting from leftmost block");</span>
					<span class="co1">// showEntries();</span>
 
				<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
					b <span class="sy0">=</span> entries.<span class="me1">get</span><span class="br0">(</span>head.<span class="me1">lastKey</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
					<span class="co1">// System.out.println("for key " + k</span>
					<span class="co1">// + " getting from block with key " + head.lastKey());</span>
					<span class="co1">// showEntries();</span>
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw1">assert</span> <span class="br0">(</span>b <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">return</span> b<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> <span class="kw4">void</span> showEntries<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">(</span><span class="st0">"entries = "</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">(</span>K k <span class="sy0">:</span> entries.<span class="me1">keySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">(</span>k <span class="sy0">+</span> <span class="st0">" "</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
			<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
 
		<span class="kw1">public</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> splitBlock<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
			Set<span class="sy0">&lt;</span>Entry<span class="sy0">&lt;</span>K, BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;&gt;</span> ee <span class="sy0">=</span> entries.<span class="me1">entrySet</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
			BPlusBranchBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> right <span class="sy0">=</span> <span class="kw1">new</span> BPlusBranchBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>maxSize<span class="br0">)</span><span class="sy0">;</span>
			SortedMap<span class="sy0">&lt;</span>K, BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> leftEntries <span class="sy0">=</span> createInternalBlockEntries<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">for</span> <span class="br0">(</span>Entry<span class="sy0">&lt;</span>K, BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> e <span class="sy0">:</span> ee<span class="br0">)</span> <span class="br0">{</span>
				<span class="co1">// System.out.print("split check " + e.getKey() + ":"</span>
				<span class="co1">// );</span>
				<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">++</span>i <span class="sy0">&lt;=</span> maxSize <span class="sy0">/</span> <span class="nu0">2</span><span class="br0">)</span>
					leftEntries.<span class="me1">put</span><span class="br0">(</span>e.<span class="me1">getKey</span><span class="br0">(</span><span class="br0">)</span>, e.<span class="me1">getValue</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">else</span>
					right.<span class="me1">entries</span>.<span class="me1">put</span><span class="br0">(</span>e.<span class="me1">getKey</span><span class="br0">(</span><span class="br0">)</span>, e.<span class="me1">getValue</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="br0">}</span>
			<span class="co1">// System.out.println("\n");</span>
			<span class="kw1">this</span>.<span class="me1">entries</span> <span class="sy0">=</span> leftEntries<span class="sy0">;</span>
 
			<span class="kw1">return</span> <span class="kw1">new</span> SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="kw1">this</span>, right<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">private</span> SortedMap<span class="sy0">&lt;</span>K, BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> createInternalBlockEntries<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> <span class="kw1">new</span> TreeMap<span class="sy0">&lt;</span>K, BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		@Override
		<span class="kw1">public</span> V get<span class="br0">(</span>K k<span class="br0">)</span> <span class="br0">{</span>
			BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> getBlock<span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">return</span> b.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		@Override
		<span class="kw1">public</span> K firstKey<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> entries.<span class="me1">firstKey</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> subMap<span class="br0">(</span>K fromKey, K toKey<span class="br0">)</span> <span class="br0">{</span>
		TreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map <span class="sy0">=</span> <span class="kw1">new</span> TreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b1 <span class="sy0">=</span> getLeafBlock<span class="br0">(</span>fromKey<span class="br0">)</span><span class="sy0">;</span>
 
		BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b2 <span class="sy0">=</span> getLeafBlock<span class="br0">(</span>toKey<span class="br0">)</span><span class="sy0">;</span>
 
		SortedSet<span class="sy0">&lt;</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> range <span class="sy0">=</span> blockList.<span class="me1">subSet</span><span class="br0">(</span>b1, b2<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">for</span> <span class="br0">(</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">:</span> range<span class="br0">)</span> <span class="br0">{</span>
			SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> m <span class="sy0">=</span> b.<span class="me1">entries</span>.<span class="me1">subMap</span><span class="br0">(</span>fromKey, toKey<span class="br0">)</span><span class="sy0">;</span>
			map.<span class="me1">putAll</span><span class="br0">(</span>m<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">return</span> map<span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> getLeafBlock<span class="br0">(</span>K key<span class="br0">)</span> <span class="br0">{</span>
		BPlusAnyBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b1<span class="sy0">;</span>
		b1 <span class="sy0">=</span> root<span class="sy0">;</span>
		<span class="kw1">while</span> <span class="br0">(</span>b1 <span class="kw1">instanceof</span> BPlusBranchBlock<span class="sy0">&lt;?</span>, <span class="sy0">?&gt;</span><span class="br0">)</span> <span class="br0">{</span>
			b1 <span class="sy0">=</span> <span class="br0">(</span><span class="br0">(</span>BPlusBranchBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">)</span> b1<span class="br0">)</span>.<span class="me1">getBlock</span><span class="br0">(</span>key<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="br0">}</span>
		<span class="kw1">return</span> <span class="br0">(</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">)</span> b1<span class="sy0">;</span>
 
	<span class="br0">}</span>
 
	<span class="kw1">public</span> BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> createLeafBlock<span class="br0">(</span>SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> rightEntries<span class="br0">)</span> <span class="br0">{</span>
		BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> <span class="kw1">new</span> BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="kw1">this</span>, rightEntries<span class="br0">)</span><span class="sy0">;</span>
		blockList.<span class="me1">add</span><span class="br0">(</span>b<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">return</span> b<span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> headMap<span class="br0">(</span>K toKey<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> subMap<span class="br0">(</span>firstKey<span class="br0">(</span><span class="br0">)</span>, toKey<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span><span class="sy0">;</span>
 
	@Override
	<span class="kw1">public</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> tailMap<span class="br0">(</span>K fromKey<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> subMap<span class="br0">(</span>fromKey, lastKey<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> K firstKey<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> blockList.<span class="me1">first</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">entries</span>.<span class="me1">firstKey</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> K lastKey<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> blockList.<span class="me1">last</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">entries</span>.<span class="me1">lastKey</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">int</span> size<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span> getLongSize<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw4">long</span> getLongSize<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw4">long</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">:</span> blockList<span class="br0">)</span> <span class="br0">{</span>
			i <span class="sy0">+=</span> b.<span class="me1">entries</span>.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> i<span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">boolean</span> isEmpty<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> root.<span class="me1">isEmpty</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">boolean</span> containsKey<span class="br0">(</span><span class="kw3">Object</span> key<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> get<span class="br0">(</span>key<span class="br0">)</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">boolean</span> containsValue<span class="br0">(</span><span class="kw3">Object</span> value<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> V get<span class="br0">(</span><span class="kw3">Object</span> key<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> <span class="br0">(</span>V<span class="br0">)</span> root.<span class="me1">get</span><span class="br0">(</span><span class="br0">(</span>K<span class="br0">)</span> key<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> V put<span class="br0">(</span>K key, V value<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">if</span> <span class="br0">(</span>root <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
			SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> entries <span class="sy0">=</span> BPlusLeafBlock.<span class="me1">getEntryCollection</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			entries.<span class="me1">put</span><span class="br0">(</span>key, value<span class="br0">)</span><span class="sy0">;</span>
			root <span class="sy0">=</span> createLeafBlock<span class="br0">(</span>entries<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
		<span class="br0">}</span>
		SplitOrValue<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> result <span class="sy0">=</span> root.<span class="me1">put</span><span class="br0">(</span>key, value<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">(</span>result.<span class="me1">isSplit</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
			BPlusBranchBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> root <span class="sy0">=</span> <span class="kw1">new</span> BPlusBranchBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>
					maxInternalBlockSize<span class="br0">)</span><span class="sy0">;</span>
			root.<span class="me1">left</span> <span class="sy0">=</span> result.<span class="me1">left</span><span class="sy0">;</span>
			root.<span class="me1">entries</span>.<span class="me1">put</span><span class="br0">(</span>result.<span class="me1">k</span>, result.<span class="me1">right</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">this</span>.<span class="me1">root</span> <span class="sy0">=</span> root<span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> result.<span class="me1">v</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> V remove<span class="br0">(</span><span class="kw3">Object</span> key<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">void</span> putAll<span class="br0">(</span>Map<span class="sy0">&lt;?</span> <span class="kw1">extends</span> K, <span class="sy0">?</span> <span class="kw1">extends</span> V<span class="sy0">&gt;</span> m<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">for</span> <span class="br0">(</span>K k <span class="sy0">:</span> m.<span class="me1">keySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
			put<span class="br0">(</span>k, m.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">void</span> clear<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Set<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> keySet<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		TreeSet<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> kk <span class="sy0">=</span> <span class="kw1">new</span> TreeSet<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">:</span> blockList<span class="br0">)</span> <span class="br0">{</span>
			kk.<span class="me1">addAll</span><span class="br0">(</span>b.<span class="me1">entries</span>.<span class="me1">keySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> kk<span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Collection<span class="sy0">&lt;</span>V<span class="sy0">&gt;</span> values<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Set<span class="sy0">&lt;</span>java.<span class="me1">util</span>.<span class="kw3">Map</span>.<span class="me1">Entry</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> entrySet<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Comparator<span class="sy0">&lt;?</span> <span class="kw1">super</span> K<span class="sy0">&gt;</span> comparator<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="co1">// TODO Auto-generated method stub</span>
		<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw4">void</span> showLeaves<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
		<span class="kw1">for</span> <span class="br0">(</span>BPlusLeafBlock<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">:</span> blockList<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Block"</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">(</span>Entry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> e <span class="sy0">:</span> b.<span class="me1">entries</span>.<span class="me1">entrySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">(</span>e.<span class="me1">getKey</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">+</span> <span class="st0">":"</span> <span class="sy0">+</span> e.<span class="me1">getValue</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">+</span> <span class="st0">"  "</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
			<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
 
 
<span class="kw1">package</span> <span class="co2">btreemap</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">java.util.ArrayList</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Comparator</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.List</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Random</span><span class="sy0">;</span>
 
<span class="co3">/** driver program to test B+ tree */</span>
 
<span class="kw1">public</span> <span class="kw1">class</span> BPlusTreeTest1 <span class="br0">{</span>
 
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> N <span class="sy0">=</span> <span class="nu0">1200000</span><span class="sy0">;</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
		BPlusTreeMap<span class="sy0">&lt;</span><span class="kw3">Integer</span>, Integer<span class="sy0">&gt;</span> map <span class="sy0">=</span> <span class="kw1">new</span> BPlusTreeMap<span class="sy0">&lt;</span><span class="kw3">Integer</span>, Integer<span class="sy0">&gt;</span><span class="br0">(</span>
				<span class="nu0">400</span>,  <span class="nu0">200</span> <span class="br0">)</span><span class="sy0">;</span><span class="co1">// 5000002);</span>
		<span class="kw3">Random</span> r <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">Random</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		ArrayList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> t <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		Comparator<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> comparator <span class="sy0">=</span> <span class="kw1">new</span> Comparator<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
			@Override
			<span class="kw1">public</span> <span class="kw4">int</span> compare<span class="br0">(</span><span class="kw3">Integer</span> o1, <span class="kw3">Integer</span> o2<span class="br0">)</span> <span class="br0">{</span>
				<span class="co1">// TODO Auto-generated method stub</span>
				<span class="kw1">return</span> o1.<span class="me1">intValue</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">-</span> o2.<span class="me1">intValue</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
		<span class="br0">}</span><span class="sy0">;</span>
 
		List<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> testVals <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			testVals.<span class="me1">add</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw4">int</span> x <span class="sy0">=</span> r.<span class="me1">nextInt</span><span class="br0">(</span>N<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> z <span class="sy0">=</span> testVals.<span class="me1">set</span><span class="br0">(</span>x, testVals.<span class="me1">get</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			testVals.<span class="me1">set</span><span class="br0">(</span><span class="nu0">0</span>, z<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="br0">}</span>
 
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			map.<span class="me1">put</span><span class="br0">(</span>testVals.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>, testVals.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			showProgress<span class="br0">(</span><span class="st0">"put"</span>, testVals, i<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"output "</span> <span class="sy0">+</span> N <span class="sy0">+</span> <span class="st0">" vals"</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">try</span> <span class="br0">{</span>
			<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
 
				showProgress<span class="br0">(</span><span class="st0">"get"</span>, testVals, i<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw4">int</span> x <span class="sy0">=</span> testVals.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">if</span> <span class="br0">(</span>x <span class="sy0">!=</span> map.<span class="me1">get</span><span class="br0">(</span>x<span class="br0">)</span><span class="br0">)</span>
					<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Expecting "</span> <span class="sy0">+</span> x <span class="sy0">+</span> <span class="st0">" got "</span> <span class="sy0">+</span> map.<span class="me1">get</span><span class="br0">(</span>x<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="br0">}</span>
			<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"<span class="es0">\n</span>Checked "</span> <span class="sy0">+</span> N <span class="sy0">+</span> <span class="st0">" entries"</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">Exception</span> e<span class="br0">)</span> <span class="br0">{</span>
			<span class="co1">// TODO: handle exception</span>
			e.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			map.<span class="me1">showLeaves</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="kw4">void</span> showProgress<span class="br0">(</span><span class="kw3">String</span> label, List<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> testVals, <span class="kw4">int</span> i<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">if</span> <span class="br0">(</span>i <span class="sy0">%</span> <span class="br0">(</span>N <span class="sy0">/</span> <span class="nu0">1000</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">printf</span><span class="br0">(</span><span class="st0">"%s %d:%d; "</span>, label, i, testVals.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">(</span>i <span class="sy0">%</span> <span class="br0">(</span>N <span class="sy0">/</span> <span class="nu0">10100</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span>
				<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="Treaps">Treaps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-23" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The invariant in a binary tree is that left is less than right with respect to insertion keys. e.g. for a key with order, ord(L) &lt; ord(R). This doesn't dictate the relationship of nodes however, and left and right rotation does not affect the above. Therefore another order can be imposed. If the order is randomised, it is likely to counteract any skewness of a plain binary tree e.g. when inserting an already sorted input in order.</p>
<p>Below is a java example implementation, including a plain binary tree delete code example.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="java source-java">
<pre class="de1">
<span class="kw1">import</span> <span class="co2">java.util.Iterator</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.LinkedList</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Random</span><span class="sy0">;</span>
 
<span class="kw1">public</span> <span class="kw1">class</span> Treap1<span class="sy0">&lt;</span>K <span class="kw1">extends</span> Comparable<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span>, V<span class="sy0">&gt;</span> <span class="br0">{</span>
	<span class="kw1">public</span> Treap1<span class="br0">(</span><span class="kw4">boolean</span> test<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">this</span>.<span class="me1">test</span> <span class="sy0">=</span> test<span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> Treap1<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span>
	<span class="kw4">boolean</span> test <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>
	<span class="kw1">static</span> <span class="kw3">Random</span> random <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">Random</span><span class="br0">(</span><span class="kw3">System</span>.<span class="me1">currentTimeMillis</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
	<span class="kw1">class</span> TreapNode <span class="br0">{</span>
		<span class="kw4">int</span> priority <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		K k<span class="sy0">;</span>
		V val<span class="sy0">;</span>
		TreapNode left, right<span class="sy0">;</span>
 
		<span class="kw1">public</span> TreapNode<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span>test<span class="br0">)</span> <span class="br0">{</span>
				priority <span class="sy0">=</span> random.<span class="me1">nextInt</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	TreapNode root <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
 
	<span class="kw4">void</span> insert<span class="br0">(</span>K k, V val<span class="br0">)</span> <span class="br0">{</span>
		root <span class="sy0">=</span> insert<span class="br0">(</span>k, val, root<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	TreapNode insert<span class="br0">(</span>K k, V val, TreapNode node<span class="br0">)</span> <span class="br0">{</span>
		TreapNode node2 <span class="sy0">=</span> <span class="kw1">new</span> TreapNode<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		node2.<span class="me1">k</span> <span class="sy0">=</span> k<span class="sy0">;</span>
		node2.<span class="me1">val</span> <span class="sy0">=</span> val<span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">(</span>node <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
			node <span class="sy0">=</span> node2<span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>k.<span class="me1">compareTo</span><span class="br0">(</span>node.<span class="me1">k</span><span class="br0">)</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
 
			node.<span class="me1">left</span> <span class="sy0">=</span> insert<span class="br0">(</span>k, val, node.<span class="me1">left</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
 
			node.<span class="me1">right</span> <span class="sy0">=</span> insert<span class="br0">(</span>k, val, node.<span class="me1">right</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="br0">}</span>
 
		<span class="kw1">if</span> <span class="br0">(</span>node.<span class="me1">left</span> <span class="sy0">!=</span> <span class="kw2">null</span> <span class="sy0">&amp;&amp;</span> node.<span class="me1">left</span>.<span class="me1">priority</span> <span class="sy0">&gt;</span> node.<span class="me1">priority</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="co1">// left rotate</span>
			TreapNode tmp <span class="sy0">=</span> node.<span class="me1">left</span><span class="sy0">;</span>
			node.<span class="me1">left</span> <span class="sy0">=</span> node.<span class="me1">left</span>.<span class="me1">right</span><span class="sy0">;</span>
			tmp.<span class="me1">right</span> <span class="sy0">=</span> node<span class="sy0">;</span>
			node <span class="sy0">=</span> tmp<span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>node.<span class="me1">right</span> <span class="sy0">!=</span> <span class="kw2">null</span> <span class="sy0">&amp;&amp;</span> node.<span class="me1">right</span>.<span class="me1">priority</span> <span class="sy0">&gt;</span> node.<span class="me1">priority</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="co1">// right rotate</span>
			TreapNode tmp <span class="sy0">=</span> node.<span class="me1">right</span><span class="sy0">;</span>
			node.<span class="me1">right</span> <span class="sy0">=</span> node.<span class="me1">right</span>.<span class="me1">left</span><span class="sy0">;</span>
			tmp.<span class="me1">left</span> <span class="sy0">=</span> node<span class="sy0">;</span>
			node <span class="sy0">=</span> tmp<span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> node<span class="sy0">;</span>
	<span class="br0">}</span>
 
	V find<span class="br0">(</span>K k<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> findNode<span class="br0">(</span>k, root<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> V findNode<span class="br0">(</span>K k, Treap1<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span>.<span class="me1">TreapNode</span> node<span class="br0">)</span> <span class="br0">{</span>
 
		<span class="kw1">if</span> <span class="br0">(</span>node <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span>
			<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">(</span>k.<span class="me1">compareTo</span><span class="br0">(</span>node.<span class="me1">k</span><span class="br0">)</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> findNode<span class="br0">(</span>k, node.<span class="me1">left</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>k.<span class="me1">compareTo</span><span class="br0">(</span>node.<span class="me1">k</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> findNode<span class="br0">(</span>k, node.<span class="me1">right</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
			<span class="kw1">return</span> node.<span class="me1">val</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw1">static</span> <span class="kw1">class</span> Deleted <span class="br0">{</span>
		<span class="kw4">boolean</span> success <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw4">boolean</span> delete<span class="br0">(</span>K k<span class="br0">)</span> <span class="br0">{</span>
		Deleted del <span class="sy0">=</span> <span class="kw1">new</span> Deleted<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		root <span class="sy0">=</span> deleteNode<span class="br0">(</span>k, root, del<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">return</span> del.<span class="me1">success</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> Treap1<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span>.<span class="me1">TreapNode</span> deleteNode<span class="br0">(</span>K k, Treap1<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span>.<span class="me1">TreapNode</span> node, Deleted del<span class="br0">)</span> <span class="br0">{</span>
 
		<span class="kw1">if</span> <span class="br0">(</span>node <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>k.<span class="me1">compareTo</span><span class="br0">(</span>node.<span class="me1">k</span><span class="br0">)</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
			 node.<span class="me1">left</span> <span class="sy0">=</span> deleteNode<span class="br0">(</span>k, node.<span class="me1">left</span>, del<span class="br0">)</span> <span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>k.<span class="me1">compareTo</span><span class="br0">(</span>node.<span class="me1">k</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
			node.<span class="me1">right</span> <span class="sy0">=</span>  deleteNode<span class="br0">(</span>k, node.<span class="me1">right</span>, del<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="co1">// k.compareTo(node.k) == 0</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span> node.<span class="me1">left</span> <span class="sy0">==</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span>
				del.<span class="me1">success</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
				<span class="kw1">return</span> node.<span class="me1">right</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span> node.<span class="me1">right</span> <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
			    del.<span class="me1">success</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
				<span class="kw1">return</span>  node.<span class="me1">left</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">else</span>  <span class="kw1">if</span> <span class="br0">(</span>node.<span class="me1">left</span> <span class="sy0">!=</span><span class="kw2">null</span> <span class="sy0">&amp;&amp;</span> node.<span class="me1">right</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span><span class="br0">{</span>
			<span class="coMULTI">/*
			// left rotate and all delete on left subtree
			TreapNode tmp = node.right;
			node.right = node.right.left;
		    tmp.left = node;
		    node = tmp;			
			node.left = deleteNode(k , node.left, del);
			*/</span>
			 <span class="co1">// more standard method ? doesn't disturb tree structure as much</span>
			<span class="co1">// find leftmost descendant of the right child node and replace contents</span>
			TreapNode n2  <span class="sy0">=</span> node.<span class="me1">right</span><span class="sy0">;</span>
			TreapNode previous2 <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
			<span class="kw1">while</span> <span class="br0">(</span>n2.<span class="me1">left</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				previous2 <span class="sy0">=</span> n2<span class="sy0">;</span>
				n2 <span class="sy0">=</span> n2.<span class="me1">left</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>previous2 <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				previous2.<span class="me1">left</span> <span class="sy0">=</span> n2.<span class="me1">right</span><span class="sy0">;</span>
                                <span class="co1">//n2 has no parent link, orphaned</span>
			<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
				node.<span class="me1">right</span> <span class="sy0">=</span> n2.<span class="me1">right</span><span class="sy0">;</span>
                               <span class="co1">//n2 has no parent link, orphaned</span>
			<span class="br0">}</span>
 
			node.<span class="me1">k</span> <span class="sy0">=</span> n2.<span class="me1">k</span><span class="sy0">;</span>
			node.<span class="me1">val</span> <span class="sy0">=</span> n2.<span class="me1">val</span><span class="sy0">;</span>
			del.<span class="me1">success</span> <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
                        <span class="co1">// once n2 out of scope, the orphaned node at n2 will be garbage collected, </span>
		<span class="br0">}</span>
 
		<span class="kw1">return</span> node<span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
		LinkedList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> dat <span class="sy0">=</span> <span class="kw1">new</span> LinkedList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> <span class="nu0">15000</span><span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			dat.<span class="me1">add</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
			testNumbers<span class="br0">(</span>dat, <span class="kw2">true</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// no random priority balancing</span>
			testNumbers<span class="br0">(</span>dat, <span class="kw2">false</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="kw4">void</span> testNumbers<span class="br0">(</span>LinkedList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> dat,
			<span class="kw4">boolean</span> test<span class="br0">)</span> <span class="br0">{</span>
		Treap1<span class="sy0">&lt;</span><span class="kw3">Integer</span>, Integer<span class="sy0">&gt;</span> treap <span class="sy0">=</span> <span class="kw1">new</span> Treap1<span class="sy0">&lt;&gt;</span><span class="br0">(</span>test<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw3">Integer</span> integer <span class="sy0">:</span> dat<span class="br0">)</span> <span class="br0">{</span>
			treap.<span class="me1">insert</span><span class="br0">(</span>integer, integer<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw4">long</span> t1 <span class="sy0">=</span> <span class="kw3">System</span>.<span class="me1">currentTimeMillis</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		Iterator<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> desc <span class="sy0">=</span> dat.<span class="me1">iterator</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw4">int</span> found <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		<span class="kw1">while</span> <span class="br0">(</span>desc.<span class="me1">hasNext</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw3">Integer</span> j <span class="sy0">=</span> desc.<span class="me1">next</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw3">Integer</span> i <span class="sy0">=</span> treap.<span class="me1">find</span><span class="br0">(</span>j<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">(</span>j.<span class="me1">equals</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="sy0">++</span>found<span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
		<span class="kw4">long</span> t2 <span class="sy0">=</span> <span class="kw3">System</span>.<span class="me1">currentTimeMillis</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"found = "</span> <span class="sy0">+</span> found <span class="sy0">+</span> <span class="st0">" in "</span> <span class="sy0">+</span> <span class="br0">(</span>t2 <span class="sy0">-</span> t1<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"test delete"</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw4">int</span> deleted <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
 
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw3">Integer</span> integer <span class="sy0">:</span> dat<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">if</span> <span class="br0">(</span>treap.<span class="me1">delete</span><span class="br0">(</span>integer<span class="br0">)</span><span class="br0">)</span> 
					<span class="sy0">++</span>deleted<span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Deleted = "</span> <span class="sy0">+</span> deleted<span class="br0">)</span><span class="sy0">;</span>
 
	<span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<h2><span class="mw-headline" id="References_2">References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-24" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li>William Ford and William Tapp. <i>Data Structures with <b>C++</b> using <b>STL.</b></i> 2nd ed. Upper Saddle River, NJ: Prentice Hall, 2002.</li>
</ul>
<h2><span class="mw-headline" id="External_Links">External Links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Trees&amp;action=edit&amp;section=T-25" title="Data Structures/Trees">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://faculty.salisbury.edu/~ealu/COSC320/Present/chapter_10.ppt">Presentation of Iterative Tree Traversals</a></li>
</ul>
<p><a rel="nofollow" class="external text" href="http://www.studiesinn.com/learn/Programming-Languages/Data-Structure-Theory/Trees-.html">Data Structure Trees</a></p>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<p>Some definitions of a heap follow:</p>
<p>A heap is an array , where there are parent child relationships, and the index of a child is 2 * parent index, or 2* parent index + 1 , and a child has a <i>order</i> after the parent, in some concrete ordering scheme injected by a client program of a heap. There is importance in maintaining the ordering nvariant after the heap is changed. Some ( Sedgewick and Wayne), have coined the term "swim" and "sink", where maintenance of the invariant involves a invariant breaking item swimming up above children of lower ordering, and then sinking below any children of higher ordering, as there may be two children , so one can swim above a lower ordered child, and still have another child with higher ordering.</p>
<p>A heap is an efficient semi-ordered data structure for storing a collection of orderable data. A min-heap supports two operations:</p>
<pre>
  INSERT(heap, element)
  element REMOVE_MIN(heap)
</pre>
<p>(we discuss min-heaps, but there's no real difference between min and max heaps, except how the comparison is interpreted.)</p>
<p>This chapter will refer exclusively to binary heaps, although different types of heaps exist. The term binary heap and heap are interchangeable in most cases. A heap can be thought of as a tree with parent and child. The main difference between a heap and a binary tree is the heap property. In order for a data structure to be considered a heap, it must satisfy the following condition (heap property):</p>
<dl>
<dd>If <i>A</i> and <i>B</i> are elements in the heap and <i>B</i> is a child of <i>A</i>, then key(<i>A</i>) â‰¤ key(<i>B</i>).</dd>
</dl>
<p>(This property applies for a min-heap. A max heap would have the comparison reversed). What this tells us is that the minimum key will always remain at the top and greater values will be below it. Due to this fact, heaps are used to implement priority queues which allows quick access to the item with the most priority. Here's an example of a min-heap:</p>
<div class="thumb tright">
<div class="thumbinner" style="width:302px;"><a href="/wiki/File:Binary-heap.png" class="image"><img alt="Binary-heap.png" src="//upload.wikimedia.org/wikibooks/en/thumb/5/5c/Binary-heap.png/300px-Binary-heap.png" width="300" height="200" class="thumbimage" srcset="//upload.wikimedia.org/wikibooks/en/thumb/5/5c/Binary-heap.png/450px-Binary-heap.png 1.5x, //upload.wikimedia.org/wikibooks/en/5/5c/Binary-heap.png 2x" data-file-width="452" data-file-height="301" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Binary-heap.png" class="internal" title="Enlarge"></a></div>
</div>
</div>
</div>
<p>A heap is implemented using an array that is indexed from 1 to N, where N is the number of elements in the heap.</p>
<p>At any time, the heap must satisfy the heap property</p>
<pre>
  array[n] &lt;= array[2*n]   // parent element &lt;= left child
</pre>
<p>and</p>
<pre>
  array[n] &lt;= array[2*n+1] // parent element &lt;= right child
</pre>
<p>whenever the indices are in the arrays bounds.</p>
<h2><span class="mw-headline" id="Compute_the_extreme_value">Compute the extreme value</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Min_and_Max_Heaps&amp;action=edit&amp;section=T-1" title="Data Structures/Min and Max Heaps">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>We will prove that <code>array[1]</code> is the minimum element in the heap. We prove it by seeing a contradiction if some other element is less than the first element. Suppose <code>array[i]</code> is the first instance of the minimum, with <code>array[j] &gt; array[i]</code> for all <code>j &lt; i</code>, and <code>i &gt;= 2</code>. But by the heap invariant array, <code>array[floor(i/2)] &lt;= array[i]</code>: this is a contradiction.</p>
<p>Therefore, it is easy to compute <code>MIN(heap)</code>:</p>
<pre>
  MIN(heap)
     return heap.array[1];
</pre>
<h2><span class="mw-headline" id="Removing_the_Extreme_Value">Removing the Extreme Value</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Min_and_Max_Heaps&amp;action=edit&amp;section=T-2" title="Data Structures/Min and Max Heaps">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To remove the minimum element, we must adjust the heap to fill <code>heap.array[1]</code>. This process is called <i>percolation</i>. Basically, we move the hole from node i to either node <code>2i</code> or <code>2i+1</code>. If we pick the minimum of these two, the heap invariant will be maintained; suppose <code>array[2i] &lt; array[2i+1]</code>. Then <code>array[2i]</code> will be moved to <code>array[i]</code>, leaving a hole at <code>2i</code>, but after the move <code>array[i] &lt; array[2i+1]</code>, so the heap invariant is maintained. In some cases, <code>2i+1</code> will exceed the array bounds, and we are forced to percolate <code>2i</code>. In other cases, <code>2i</code> is also outside the bounds: in that case, we are done.</p>
<p><br />
Therefore, here is the remove algorithm:</p>
<p><br /></p>
<pre>
#define LEFT(i) (2*i)
</pre>
<pre>
#define RIGHT(i) (2*i + 1)  
</pre>
<pre>
REMOVE_MIN(heap)
{  
    savemin=arr[1];
    arr[1]=arr[--heapsize];
    i=1;
    while(i&lt;heapsize){
        minidx=i;
        if(LEFT(i)&lt;heapsize &amp;&amp; arr[LEFT(i)] &lt; arr[minidx])
            minidx=LEFT(i);
        if(RIGHT(i)&lt;heapsize &amp;&amp; arr[RIGHT(i)] &lt; arr[minidx]) 
            minidx=RIGHT(i);
        if(minidx!=i){
            swap(arr[i],arr[minidx]);
            i=minidx;            
        }
        else 
            break;
    }
}
</pre>
<p>Why does this work?</p>
<pre>
   If there is only 1 element ,heapsize becomes 0, nothing in the array is valid.
   If there are 2 elements , one min and other max, you replace min with max.
   If there are 3 or more elements say n, you replace 0th element with n-1th element. 
   The heap property is destroyed. Choose the 2 children of root and check which is the minimum.
   Choose the minimum between them, swap it. Now subtree with swapped child is loose heap property.
   If no violations break.
</pre>
<h2><span class="mw-headline" id="Inserting_a_value_into_the_heap">Inserting a value into the heap</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Min_and_Max_Heaps&amp;action=edit&amp;section=T-3" title="Data Structures/Min and Max Heaps">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A similar strategy exists for INSERT: just append the element to the array, then fixup the heap-invariants by swapping. For example if we just appended element N, then the only invariant violation possible involves that element, in particular if <img class="mwe-math-fallback-image-inline tex" alt="array[floor(N/2)] &gt; array[N]" src="//upload.wikimedia.org/math/9/4/e/94ee09e1f251c8a1f02a12da09ed52b3.png" />, then those two elements must be swapped and now the only invariant violation possible is between</p>
<pre>
 array[floor(N/4)]  and  array[floor(N/2)]
</pre>
<p>we continue iterating until N=1 or until the invariant is satisfied.</p>
<pre>
INSERT(heap, element)
   append(heap.array, element)
   i = heap.array.length
   while (i &gt; 1)
     {
       if (heap.array[i/2] &lt;= heap.array[i])
         break;
       swap(heap.array[i/2], heap.array[i]);
       i /= 2;
     }
</pre>
<h2><span class="mw-headline" id="TODO">TODO</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Min_and_Max_Heaps&amp;action=edit&amp;section=T-4" title="Data Structures/Min and Max Heaps">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>
 Merge-heap: it would take two max/min heap and merge them and return a single heap. O(n) time.
 Make-heap: it would also be nice to describe the O(n) make-heap operation
 Heap sort: the structure can actually be used to efficiently sort arrays
 
</pre>
<p>Make-heap would make use a function heapify</p>
<pre>
//Element is a data structure//
   Make-heap(Element Arr[],int size) 
   {
       for(j=size/2;j&gt;0;j--)
           {
               Heapify(Arr,size,j);
           }
   }
</pre>
<pre>
   Heapify(Element Arr[],int size,int t)
   {
       L=2*t;
       R=2*t+1;
       if(L&lt;size )
       {
           mix=minindex(Arr,L,t);
           if(R&lt;=size)
               mix=minindex(Arr,R,mix);
       }
       else
           mix=t;
       if(mix!=t)
       {
           swap(mix,t);
           Heapify(Arr,size,mix);
       }
   }
</pre>
<p>minindex returns index of the smaller element</p>
<h2><span class="mw-headline" id="Applications_of_Priority_Heaps">Applications of Priority Heaps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Min_and_Max_Heaps&amp;action=edit&amp;section=T-5" title="Data Structures/Min and Max Heaps">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In 2009, a smaller Sort Benchmark was won by OzSort, which has a paper describing lucidly how to use a priority heap as the sorting machine to produce merged parts of large (internally) sorted sections . If a sorted section took M memory and the sorting problem was k x M big, then take sequential sections of each of the k sections of size M/k , at a time, so they fit in M memory ( k * M/k = M ), and feed the first element of each of k sections to make a k sized priority queue, and as the top element is removed and written to an output buffer, take the next element from the corresponding section. This means elements may need to be associated with a label for the section they come from. When a M/k-sized section is exhausted, load in the next M/k sized minisection from the original sorted section stored on disc. Continue until all minisections in each of the k sections on disc have been exhausted.</p>
<p>(As an example of pipelining to fill up disc operational delays, there are twin output buffers, so that once an output buffer is full one gets written the disc while the other is being filled.)</p>
<p>This paper showed that a priority heap is more straightforward than a binary tree, because elements are constantly being deleted, as well as added, as a queuing mechanism for a k way merge, and has practical application for sorting large sets of data that exceed internal memory storage.</p>
<p><br /></p>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<h2><span class="mw-headline" id="Graphs">Graphs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Graphs&amp;action=edit&amp;section=T-1" title="Data Structures/Graphs">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A <b>graph</b> is a structure consisting of a set of arrays (also called dimensions) <img class="mwe-math-fallback-image-inline tex" alt="\{v_1, v_2,\dots,v_n\}" src="//upload.wikimedia.org/math/f/f/d/ffdaac931dd3c9b9ae4c0043c2ed3aca.png" /> and a set of edges <img class="mwe-math-fallback-image-inline tex" alt="\{e_1, e_2,\dots,e_m\}" src="//upload.wikimedia.org/math/5/a/d/5adefe493437755185f23294b068a508.png" />. An edge is a pair of vertices <img class="mwe-math-fallback-image-inline tex" alt="\{v_i, v_j\}\ i,j \in \{1..n\}" src="//upload.wikimedia.org/math/3/e/0/3e0afd93c03a303096fc3818c0a9b7ed.png" />. The two vertices are called the edge <i>endpoints</i>. Graphs are ubiquitous in computer science. They are used to model real-world systems such as the Internet (each node represents a router and each edge represents a connection between routers); airline connections (each node is an airport and each edge is a flight); or a city road network (each node represents an intersection and each edge represents a block). The wireframe drawings in computer graphics are another example of graphs.</p>
<p>A graph may be either <i>undirected</i> or <i>directed</i>. Intuitively, an undirected edge models a "two-way" or "duplex" connection between its endpoints, while a directed edge is a one-way connection, and is typically drawn as an arrow. A directed edge is often called an <i>arc</i>. Mathematically, an undirected edge is an unordered pair of vertices, and an arc is an ordered pair. For example, a road network might be modeled as a directed graph, with one-way streets indicated by an arrow between endpoints in the appropriate direction, and two-way streets shown by a pair of parallel directed edges going both directions between the endpoints. You might ask, why not use a single <i>undirected</i> edge for a two-way street. There's no theoretical problem with this, but from a practical programming standpoint, it's generally simpler and less error-prone to stick with all directed or all undirected edges.</p>
<p>An undirected graph can have at most <img class="mwe-math-fallback-image-inline tex" alt="\left (
   \begin{array}{c}
   n+1 \\ 2
   
   \end{array}
   \right )" src="//upload.wikimedia.org/math/e/1/9/e19bdeade9c93ef0475355e6cb66de5c.png" /> edges (one for each unordered pair), while a directed graph can have at most <img class="mwe-math-fallback-image-inline tex" alt="n^2" src="//upload.wikimedia.org/math/b/0/8/b08b1c6ec09f20907eb1d6f1392c01c6.png" /> edges (one per ordered pair). A graph is called <i>sparse</i> if it has many fewer than this many edges (typically <img class="mwe-math-fallback-image-inline tex" alt="O(n)" src="//upload.wikimedia.org/math/7/b/a/7ba55e7c64a9405a0b39a1107e90ca94.png" /> edges), and <i>dense</i> if it has closer to <img class="mwe-math-fallback-image-inline tex" alt="\Omega(n^2)" src="//upload.wikimedia.org/math/0/3/0/030573389a70338bd19a9707c16f31a4.png" /> edges. A <b>multigraph</b> can have more than one edge between the same two vertices. For example, if one were modeling airline flights, there might be multiple flights between two cities, occurring at different times of the day.</p>
<p>A <b>path</b> in a graph is a sequence of vertices <img class="mwe-math-fallback-image-inline tex" alt="\{ v_{i_1}, v_{i_2}, \dots , v_{i_k} \}" src="//upload.wikimedia.org/math/b/5/2/b5281df62ea23992d5e17de7ba4b3ce9.png" /> such that there exists an edge or arc between consecutive vertices. The path is called a <b>cycle</b> if <img class="mwe-math-fallback-image-inline tex" alt="v_{i_1} \equiv v_{i_k}" src="//upload.wikimedia.org/math/4/8/e/48efe45572a2944cc3b4d5c55a55fd18.png" />. An undirected acyclic graph is equivalent to an undirected tree. A directed acyclic graph is called a <b>DAG</b>. It is not necessarily a tree.</p>
<p>Nodes and edges often have associated information, such as <i>labels</i> or <i>weights</i>. For example, in a graph of airline flights, a node might be labeled with the name of the corresponding airport, and an edge might have a weight equal to the flight time. The popular game "<a href="//en.wikipedia.org/wiki/Six_Degrees_of_Kevin_Bacon" class="extiw" title="w:Six Degrees of Kevin Bacon">Six Degrees of Kevin Bacon</a>" can be modeled by a labeled undirected graph. Each actor becomes a node, labeled by the actor's name. Nodes are connected by an edge when the two actors appeared together in some movie. We can label this edge by the name of the movie. Deciding if an actor is separated from Kevin Bacon by six or fewer steps is equivalent to finding a path of length at most six in the graph between Bacon's vertex and the other actors vertex. (This can be done with the breadth-first search algorithm found in the companion <a href="/wiki/Computer_Science:Algorithms" title="Computer Science:Algorithms" class="mw-redirect">Algorithms</a> book. The Oracle of Bacon at the University of Virginia has actually implemented this algorithm and can tell you the path from any actor to Kevin Bacon in a few clicks<a rel="nofollow" class="external autonumber" href="http://www.cs.virginia.edu/oracle/">[1]</a>.)</p>
<h3><span class="mw-headline" id="Directed_Graphs">Directed Graphs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Graphs&amp;action=edit&amp;section=T-2" title="Data Structures/Graphs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="thumb tright">
<div class="thumbinner" style="width:127px;"><a href="/wiki/File:Directed.svg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Directed.svg/125px-Directed.svg.png" width="125" height="113" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Directed.svg/188px-Directed.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Directed.svg/250px-Directed.svg.png 2x" data-file-width="250" data-file-height="225" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Directed.svg" class="internal" title="Enlarge"></a></div>
A directed graph.</div>
</div>
</div>
<p>The number of edges with one endpoint on a given vertex is called that vertex's <b>degree</b>. In a directed graph, the number of edges that point <i>to</i> a given vertex is called its <b>in-degree</b>, and the number that point <i>from</i> it is called its <b>out-degree</b>. Often, we may want to be able to distinguish between different nodes and edges. We can associate labels with either. We call such a graph <b>labeled</b>.</p>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; width:80%" title="Directed Graph Operations">
<p><b>Directed Graph Operations</b></p>
<dl>
<dt style="font-weight:normal"><code style="background:#FFFFEE"><b>make-graph</b>(): graph</code></dt>
<dd>Create a new graph, initially with no nodes or edges.</dd>
<dt style="font-weight:normal"><code style="background:#FFFFEE"><b>make-vertex</b>(graph <i>G</i>, element <i>value</i>): vertex</code></dt>
<dd>Create a new vertex, with the given value.</dd>
<dt style="font-weight:normal"><code style="background:#FFFFEE"><b>make-edge</b>(vertex <i>u</i>, vertex <i>v</i>): edge</code></dt>
<dd>Create an edge between <i>u</i> and <i>v</i>. In a directed graph, the edge will flow from <i>u</i> to <i>v</i>.</dd>
<dt style="font-weight:normal"><code style="background:#FFFFEE"><b>get-edges</b>(vertex <i>v</i>): edge-set</code></dt>
<dd>Returns the set of edges flowing from <i>v</i></dd>
<dt style="font-weight:normal"><code style="background:#FFFFEE"><b>get-neighbors</b>(vertex <i>v</i>): vertex-set</code></dt>
<dd>Returns the set of vertices connected to <i>v</i></dd>
</dl>
<p>[TODO: also need undirected graph abstraction in that section, and also find a better set of operations-- the key to finding good operations is seeing what the algorithms that <i>use</i> graphs actually <i>need</i>]</p>
</div>
<h3><span class="mw-headline" id="Undirected_Graphs">Undirected Graphs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Graphs&amp;action=edit&amp;section=T-3" title="Data Structures/Graphs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="thumb tright">
<div class="thumbinner" style="width:127px;"><a href="/wiki/File:Undirected.svg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Undirected.svg/125px-Undirected.svg.png" width="125" height="113" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Undirected.svg/188px-Undirected.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Undirected.svg/250px-Undirected.svg.png 2x" data-file-width="250" data-file-height="225" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Undirected.svg" class="internal" title="Enlarge"></a></div>
An undirected graph.</div>
</div>
</div>
<p>In a directed graph, the edges point from one vertex to another, while in an <b>undirected graph</b>, they merely connect two vertices. we can travel forward or backward.It is a bidirectional graph.</p>
<h3><span class="mw-headline" id="Weighted_Graphs">Weighted Graphs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Graphs&amp;action=edit&amp;section=T-4" title="Data Structures/Graphs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>We may also want to associate some cost or weight to the traversal of an edge. When we add this information, the graph is called <b>weighted</b>. An example of a weighted graph would be the distance between the capitals of a set of countries.</p>
<p>Directed and undirected graphs may both be weighted. The operations on a weighted graph are the same with addition of a weight parameter during edge creation:</p>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; width:80%" title="Directed Graph Operations">
<p><b>Weighted Graph Operations (an extension of undirected/directed graph operations)</b></p>
<dl>
<dt style="font-weight:normal"><code style="background:#FFFFEE"><b>make-edge</b>(vertex <i>u</i>, vertex <i>v</i>, weight <i>w</i>): edge</code></dt>
<dd>Create an edge between <i>u</i> and <i>v</i> with weight <i>w</i>. In a directed graph, the edge will flow from <i>u</i> to <i>v</i>.</dd>
</dl>
</div>
<h3><span class="mw-headline" id="Graph_Representations">Graph Representations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Graphs&amp;action=edit&amp;section=T-5" title="Data Structures/Graphs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Adjacency_Matrix_Representation">Adjacency Matrix Representation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Graphs&amp;action=edit&amp;section=T-6" title="Data Structures/Graphs">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>An <b>adjacency matrix</b> is one of the two common ways to represent a graph. The adjacency matrix shows which nodes are <b>adjacent</b> to one another. Two nodes are adjacent if there is an edge connecting them. In the case of a directed graph, if node <img class="mwe-math-fallback-image-inline tex" alt="j" src="//upload.wikimedia.org/math/3/6/3/363b122c528f54df4a0446b6bab05515.png" /> is adjacent to node <img class="mwe-math-fallback-image-inline tex" alt="i" src="//upload.wikimedia.org/math/8/6/5/865c0c0b4ab0e063e5caa3387c1a8741.png" />, there is an edge from <img class="mwe-math-fallback-image-inline tex" alt="i" src="//upload.wikimedia.org/math/8/6/5/865c0c0b4ab0e063e5caa3387c1a8741.png" /> to <img class="mwe-math-fallback-image-inline tex" alt="j" src="//upload.wikimedia.org/math/3/6/3/363b122c528f54df4a0446b6bab05515.png" />. In other words, if <img class="mwe-math-fallback-image-inline tex" alt="j" src="//upload.wikimedia.org/math/3/6/3/363b122c528f54df4a0446b6bab05515.png" /> is adjacent to <img class="mwe-math-fallback-image-inline tex" alt="i" src="//upload.wikimedia.org/math/8/6/5/865c0c0b4ab0e063e5caa3387c1a8741.png" />, you can get from <img class="mwe-math-fallback-image-inline tex" alt="i" src="//upload.wikimedia.org/math/8/6/5/865c0c0b4ab0e063e5caa3387c1a8741.png" /> to <img class="mwe-math-fallback-image-inline tex" alt="j" src="//upload.wikimedia.org/math/3/6/3/363b122c528f54df4a0446b6bab05515.png" /> by traversing one edge. For a given graph with <img class="mwe-math-fallback-image-inline tex" alt="n" src="//upload.wikimedia.org/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> nodes, the adjacency matrix will have dimensions of <img class="mwe-math-fallback-image-inline tex" alt="n \times n" src="//upload.wikimedia.org/math/6/0/7/607acaa73c762411b20745149a11e90b.png" />. For an unweighted graph, the adjacency matrix will be populated with boolean values.</p>
<p>For any given node <img class="mwe-math-fallback-image-inline tex" alt="i" src="//upload.wikimedia.org/math/8/6/5/865c0c0b4ab0e063e5caa3387c1a8741.png" />, you can determine its adjacent nodes by looking at row <img class="mwe-math-fallback-image-inline tex" alt="\left( i , \left[ 1..n \right] \right)" src="//upload.wikimedia.org/math/4/4/e/44e71524eb872bccfb00276f9f6494cf.png" /> of the adjacency matrix. A value of true at <img class="mwe-math-fallback-image-inline tex" alt="\left( i , j \right)" src="//upload.wikimedia.org/math/d/3/b/d3b45aac8e2bfb89793f116ad87e6fed.png" /> indicates that there is an edge from node <img class="mwe-math-fallback-image-inline tex" alt="i" src="//upload.wikimedia.org/math/8/6/5/865c0c0b4ab0e063e5caa3387c1a8741.png" /> to node <img class="mwe-math-fallback-image-inline tex" alt="j" src="//upload.wikimedia.org/math/3/6/3/363b122c528f54df4a0446b6bab05515.png" />, and false indicating no edge. In an undirected graph, the values of <img class="mwe-math-fallback-image-inline tex" alt="\left( i, j \right)" src="//upload.wikimedia.org/math/d/3/b/d3b45aac8e2bfb89793f116ad87e6fed.png" /> and <img class="mwe-math-fallback-image-inline tex" alt="\left( j, i \right)" src="//upload.wikimedia.org/math/c/a/a/caa5ee57a1515facb4f8909255ae8db2.png" /> will be equal. In a weighted graph, the boolean values will be replaced by the weight of the edge connecting the two nodes, with a special value that indicates the absence of an edge.</p>
<p>The memory use of an adjacency matrix is <img class="mwe-math-fallback-image-inline tex" alt="O(n^2)" src="//upload.wikimedia.org/math/1/8/9/189317b4b935a745fcfaf95940d2b4f0.png" />.</p>
<h4><span class="mw-headline" id="Adjacency_List_Representation">Adjacency List Representation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Graphs&amp;action=edit&amp;section=T-7" title="Data Structures/Graphs">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The adjacency list is another common representation of a graph. There are many ways to implement this adjacency representation. One way is to have the graph maintain a list of lists, in which the first list is a list of indices corresponding to each node in the graph. Each of these refer to another list that stores a the index of each adjacent node to this one. It might also be useful to associate the weight of each link with the adjacent node in this list.</p>
<p>Example: An undirected graph contains four nodes 1, 2, 3 and 4. 1 is linked to 2 and 3. 2 is linked to 3. 3 is linked to 4.</p>
<p>1 - [2, 3]</p>
<p>2 - [1, 3]</p>
<p>3 - [1, 2, 4]</p>
<p>4 - [3]</p>
<p>It might be useful to store the list of all the nodes in the graph in a hash table. The keys then would correspond to the indices of each node and the value would be a reference to the list of adjacent node indices.</p>
<p>Another implementation might require that each node keep a list of its adjacent nodes.</p>
<h3><span class="mw-headline" id="Graph_Traversals">Graph Traversals</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Graphs&amp;action=edit&amp;section=T-8" title="Data Structures/Graphs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Depth-First_Search">Depth-First Search</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Graphs&amp;action=edit&amp;section=T-9" title="Data Structures/Graphs">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Start at vertex a, visit its neighbour b, then b's neighbour c and keep going until reach 'a dead end' then iterate back and visit nodes reachable from second last visited vertex and keep applying the same principle.</p>
<p><br /></p>
<pre>
[TODO: depth-first search -- with compelling example]
</pre>
<pre>
// Search in the subgraph for a node matching 'criteria'. Do not re-examine 
// nodes listed in 'visited' which have already been tested.
GraphNode depth_first_search(GraphNode node, Predicate criteria, VisitedSet visited) {
 // Check that we haven't already visited this part of the graph
 if (visited.contains(node)) {
   return null;
 }
 visited.insert(node);
 // Test to see if this node satifies the criteria
 if (criteria.apply(node.value)) {
   return node;
 }
 // Search adjacent nodes for a match
 for (adjacent in node.adjacentnodes()) {
   GraphNode ret = depth_first_search(adjacent, criteria, visited);
   if (ret != null) {
     return ret;
   }
 }
 // Give up - not in this part of the graph
 return null;
}
</pre>
<pre>
Breadth-First Search 
</pre>
<p>Breadth first search visits the nodes neighbours and then the unvisited neighbours of the neighbours, etc. If it starts on vertex a it will go to all vertices that have an edge from a. If some points are not reachable it will have to start another BFS from a new vertex.</p>
<pre>
[TODO: breadth-first search -- with compelling example]
[TODO: topological sort -- with compelling example]
</pre>
<p><br /></p>
<hr />
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<h2><span class="mw-headline" id="Hash_Tables">Hash Tables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-1" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div style="clear: both"></div>
<table style="background: #ffd; border: 1px solid #aaaaaa; padding: 6pt; margin: 12pt 8%; width: 60%; margin: auto;" class="notice noprint notice-todo">
<tr>
<td style="width: 58px;">
<div class="floatleft"><img alt="Clipboard" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/45px-Clipboard.svg.png" width="45" height="45" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/68px-Clipboard.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Clipboard.svg/90px-Clipboard.svg.png 2x" data-file-width="48" data-file-height="48" /></div>
</td>
<td>
<p><b>To do:</b><br /></p>
<pre>
 Define and describe what a hash table is
  - Introduce key/value relationships
  - Introduce concepts such as table size (why are prime numbers important?) 
     and other aspects of tables that are independent of type and method of
     implementation.
  - Define "n" for time-complexity.  record? key?  
</pre>
<pre>
 Iteration order for hash tables by augmenting the structure
  - iterating over items in the order in which they were inserted
  - iterating over the items based on most-recently-used
</pre></td>
</tr>
</table>
<div style="clear: both"></div>
<p>A <b>hash table</b>, or a <b>hash map</b>, is a data structure that associates <i>keys</i> with <i>values</i>. The primary operation it supports efficiently is a <i>lookup</i>: given a key (e.g. a person's name), find the corresponding value (e.g. that person's telephone number). It works by transforming the key using a <a href="//en.wikipedia.org/wiki/hash_function" class="extiw" title="w:hash function">hash function</a> into a <i>hash</i>, a number that the hash table uses to locate the desired value.</p>
<div class="thumb tright">
<div class="thumbinner" style="width:364px;"><a href="/wiki/File:HASHTB08.svg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/c/c2/HASHTB08.svg/362px-HASHTB08.svg.png" width="362" height="195" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/c/c2/HASHTB08.svg/543px-HASHTB08.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/c/c2/HASHTB08.svg/724px-HASHTB08.svg.png 2x" data-file-width="744" data-file-height="400" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:HASHTB08.svg" class="internal" title="Enlarge"></a></div>
A small phone book as a hash table.</div>
</div>
</div>
<h3><span class="mw-headline" id="Time_complexity_and_common_uses_of_hash_tables">Time complexity and common uses of hash tables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-2" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Hash tables are often used to implement <a href="//en.wikipedia.org/wiki/associative_array" class="extiw" title="w:associative array">associative arrays</a>, <a href="//en.wikipedia.org/wiki/Set_(computer_science)" class="extiw" title="w:Set (computer science)">sets</a> and <a href="//en.wikipedia.org/wiki/cache" class="extiw" title="w:cache">caches</a>. Like <a href="//en.wikipedia.org/wiki/array" class="extiw" title="w:array">arrays</a>, hash tables provide constant-time <a href="//en.wikipedia.org/wiki/Big-O_notation" class="extiw" title="w:Big-O notation">O(1)</a> lookup on average, regardless of the number of items in the table. However, the rare worst-case lookup time can be as bad as O(<i>n</i>). Compared to other associative array data structures, hash tables are most useful when large numbers of records of data are to be stored.</p>
<p>Hash tables may be used as in-memory data structures. Hash tables may also be adopted for use with <a href="//en.wikipedia.org/wiki/persistent_data_structure" class="extiw" title="w:persistent data structure">persistent data structures</a>; database indexes commonly use disk-based data structures based on hash tables.</p>
<p>Hash tables are used to speed-up string searching in many implementations of <a href="/wiki/Data_Compression/Dictionary_compression#hash_tables" title="Data Compression/Dictionary compression">data compression</a>.</p>
<p>In <a href="//en.wikipedia.org/wiki/computer_chess" class="extiw" title="w:computer chess">computer chess</a>, a hash table is generally used to implement the <a href="//en.wikipedia.org/wiki/transposition_table" class="extiw" title="w:transposition table">transposition table</a>.</p>
<h3><span class="mw-headline" id="Choosing_a_good_hash_function">Choosing a good hash function</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-3" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A good hash function is essential for good hash table performance. A poor choice of hash function is likely to lead to <i>clustering</i>, in which probability of keys mapping to the same hash bucket (i.e. a <i>collision</i>) is significantly greater than would be expected from a random function. Nonzero probability of collisions is inevitable in any hash implementation, but usually the number of operations to resolve collisions scales linearly with the number of keys mapping to the same bucket, so excess collisions will degrade performance significantly. In addition, some hash functions are computationally expensive, so the amount of time (and, in some cases, memory) taken to compute the hash may be burdensome.</p>
<p>Choosing a good hash function is tricky. The literature is replete with poor choices, at least when measured by modern standards. For example, the very popular multiplicative hash advocated by Knuth in The Art of Computer Programming (see reference below) has particularly poor clustering behavior. However, since poor hashing merely degrades hash table performance for particular input key distributions, such problems commonly go undetected.</p>
<p>The literature is similarly sparse on the criteria for choosing a hash function. Unlike most other fundamental algorithms and data structures, there is no universal consensus on what makes a "good" hash function. The remainder of this section is organized by three criteria: simplicity, speed, and strength, and will survey algorithms known to perform well by these criteria.</p>
<p>Simplicity and speed are readily measured objectively (by number of lines of code and CPU benchmarks, for example), but strength is a more slippery concept. Obviously, a <a href="//en.wikipedia.org/wiki/Cryptographic_hash_function" class="extiw" title="w:Cryptographic hash function">cryptographic hash function</a> such as SHA-1 would satisfy the relatively lax strength requirements needed for hash tables, but their slowness and complexity makes them unappealing. In fact, even a cryptographic hash does not provide protection against an adversary who wishes to degrade hash table performance by choosing keys all hashing to the same bucket. For these specialized cases, a <a href="/w/index.php?title=Universal_hash_function&amp;action=edit&amp;redlink=1" class="new" title="Universal hash function (does not exist)">universal hash function</a> should be used instead of any one static hash, no matter how sophisticated.</p>
<p>In the absence of a standard measure for hash function strength, the current state of the art is to employ a battery of <a href="/wiki/Statistics" title="Statistics">statistical</a> tests to measure whether the hash function can be readily distinguished from a random function. Arguably the most important such test is to determine whether the hash function displays the <a href="/w/index.php?title=Avalanche_effect&amp;action=edit&amp;redlink=1" class="new" title="Avalanche effect (does not exist)">avalanche effect</a>, which essentially states that any single-bit change in the input key should affect on average half the bits in the output. Bret Mulvey advocates testing the <i>strict avalanche condition</i> in particular, which states that, for any single-bit change, each of the output bits should change with probability one-half, independent of the other bits in the key. Purely additive hash functions such as <a href="/w/index.php?title=Cyclic_redundancy_check&amp;action=edit&amp;redlink=1" class="new" title="Cyclic redundancy check (does not exist)">CRC</a> fail this stronger condition miserably.</p>
<p>Clearly, a strong hash function should have a <a href="/w/index.php?title=Uniform_distribution&amp;action=edit&amp;redlink=1" class="new" title="Uniform distribution (does not exist)">uniform distribution</a> of hash values. Bret Mulvey proposes the use of a chi-squared test for uniformity, based on <a href="/w/index.php?title=Power_of_two&amp;action=edit&amp;redlink=1" class="new" title="Power of two (does not exist)">power of two</a> hash table sizes ranging from 2<sup>1</sup> to 2<sup>16</sup>. This test is considerably more sensitive than many others proposed for measuring hash functions, and finds problems in many popular hash functions.</p>
<p>Fortunately, there are good hash functions that satisfy all these criteria. The simplest class all consume one byte of the input key per iteration of the inner loop. Within this class, simplicity and speed are closely related, as fast algorithms simply don't have time to perform complex calculations. Of these, one that performs particularly well is the Jenkins One-at-a-time hash, adapted here from <a rel="nofollow" class="external text" href="http://www.burtleburtle.net/bob/hash/doobs.html">an article by Bob Jenkins</a>, its creator.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="c source-c">
<pre class="de1">
  <span class="kw4">uint32</span> joaat_hash<span class="br0">(</span>uchar <span class="sy0">*</span>key<span class="sy0">,</span> <span class="kw4">size_t</span> len<span class="br0">)</span>
  <span class="br0">{</span>
    <span class="kw4">uint32</span> hash <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
    <span class="kw4">size_t</span> i<span class="sy0">;</span>
 
    <span class="kw1">for</span> <span class="br0">(</span>i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> len<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span>
    <span class="br0">{</span>
        hash <span class="sy0">+=</span> key<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span>
        hash <span class="sy0">+=</span> <span class="br0">(</span>hash <span class="sy0">&lt;&lt;</span> <span class="nu0">10</span><span class="br0">)</span><span class="sy0">;</span>
        hash <span class="sy0">^=</span> <span class="br0">(</span>hash <span class="sy0">&gt;&gt;</span> <span class="nu0">6</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
    hash <span class="sy0">+=</span> <span class="br0">(</span>hash <span class="sy0">&lt;&lt;</span> <span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span>
    hash <span class="sy0">^=</span> <span class="br0">(</span>hash <span class="sy0">&gt;&gt;</span> <span class="nu0">11</span><span class="br0">)</span><span class="sy0">;</span>
    hash <span class="sy0">+=</span> <span class="br0">(</span>hash <span class="sy0">&lt;&lt;</span> <span class="nu0">15</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw1">return</span> hash<span class="sy0">;</span>
<span class="br0">}</span>
</pre></div>
</div>
<div class="thumb tright">
<div class="thumbinner" style="width:257px;"><a href="/wiki/File:JenkinsOneAtATime-3.svg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3d/JenkinsOneAtATime-3.svg/255px-JenkinsOneAtATime-3.svg.png" width="255" height="191" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/3/3d/JenkinsOneAtATime-3.svg/383px-JenkinsOneAtATime-3.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/3/3d/JenkinsOneAtATime-3.svg/510px-JenkinsOneAtATime-3.svg.png 2x" data-file-width="255" data-file-height="191" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:JenkinsOneAtATime-3.svg" class="internal" title="Enlarge"></a></div>
Avalanche behavior of Jenkins One-at-a-time hash over 3-byte keys</div>
</div>
</div>
<p>The avalanche behavior of this hash shown on the right. The image was made using Bret Mulvey's AvalancheTest in his <a rel="nofollow" class="external text" href="https://archive.is/20130703050807/bretm.home.comcast.net/hash/11.html">Hash.cs toolset</a>. Each row corresponds to a single bit in the input, and each column to a bit in the output. A green square indicates good mixing behavior, a yellow square weak mixing behavior, and red would indicate no mixing. Only a few bits in the last byte are weakly mixed, a performance vastly better than a number of widely used hash functions.</p>
<p>Many commonly used hash functions perform poorly when subjected to such rigorous avalanche testing. The widely favored <a href="/w/index.php?title=Fowler_Noll_Vo_hash&amp;action=edit&amp;redlink=1" class="new" title="Fowler Noll Vo hash (does not exist)">FNV</a> hash, for example, shows many bits with no mixing at all, especially for short keys. See the <a rel="nofollow" class="external text" href="http://web.archive.org/web/20060116075140/http://bretm.home.comcast.net/hash/6.html">evaluation of FNV</a> by Bret Mulvey for a more thorough analysis.</p>
<p>If speed is more important than simplicity, then the class of hash functions which consume multibyte chunks per iteration may be of interest. One of the most sophisticated is "lookup3" by Bob Jenkins, which consumes input in 12 byte (96 bit) chunks. Note, though, that any speed improvement from the use of this hash is only likely to be useful for large keys, and that the increased complexity may also have speed consequences such as preventing an optimizing compiler from inlining the hash function. Bret Mulvey analyzed an <a rel="nofollow" class="external text" href="http://web.archive.org/web/20060116065454/http://bretm.home.comcast.net/hash/7.html">earlier version, lookup2</a>, and found it to have excellent avalanche behavior.</p>
<p>One desirable property of a hash function is that conversion from the hash value (typically 32 bits) to an bucket index for a particular-size hash table can be done simply by masking, preserving only the lower k bits for a table of size 2<sup>k</sup> (an operation equivalent to computing the hash value <a href="/w/index.php?title=Modular_arithmetic&amp;action=edit&amp;redlink=1" class="new" title="Modular arithmetic (does not exist)">modulo</a> the table size). This property enables the technique of incremental doubling of the size of the hash table - each bucket in the old table maps to only two in the new table. Because of its use of XOR-folding, the FNV hash does not have this property. Some older hashes are even worse, requiring table sizes to be a prime number rather than a power of two, again computing the bucket index as the hash value modulo the table size. In general, such a requirement is a sign of a fundamentally weak function; using a prime table size is a poor substitute for using a stronger function.</p>
<h3><span class="mw-headline" id="Collision_resolution">Collision resolution</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-4" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If two keys hash to the same index, the corresponding records cannot be stored in the same location. So, if it's already occupied, we must find another location to store the new record, and do it so that we can find it when we look it up later on.</p>
<p>To give an idea of the importance of a good collision resolution strategy, consider the following result, derived using the <a href="//en.wikipedia.org/wiki/Birthday_paradox#Generalization" class="extiw" title="w:Birthday paradox">birthday paradox</a>. Even if we assume that our hash function outputs random indices <a href="//en.wikipedia.org/wiki/Uniform_distribution_(discrete)" class="extiw" title="w:Uniform distribution (discrete)">uniformly distributed</a> over the array, and even for an array with 1 million entries, there is a 95% chance of at least one collision occurring before it contains 2500 records.</p>
<p>There are a number of collision resolution techniques, but the most popular are <i>chaining</i> and <i>open addressing</i>.</p>
<h4><span class="mw-headline" id="Chaining">Chaining</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-5" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<div class="thumb tright">
<div class="thumbinner" style="width:364px;"><a href="/wiki/File:HASHTB32.svg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/3/34/HASHTB32.svg/362px-HASHTB32.svg.png" width="362" height="195" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/3/34/HASHTB32.svg/543px-HASHTB32.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/3/34/HASHTB32.svg/724px-HASHTB32.svg.png 2x" data-file-width="744" data-file-height="400" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:HASHTB32.svg" class="internal" title="Enlarge"></a></div>
Hash collision resolved by chaining.</div>
</div>
</div>
<p>In the simplest chained hash table technique, each slot in the array references a <a href="/w/index.php?title=Linked_list&amp;action=edit&amp;redlink=1" class="new" title="Linked list (does not exist)">linked list</a> of inserted records that collide to the same slot. Insertion requires finding the correct slot, and appending to either end of the list in that slot; deletion requires searching the list and removal.</p>
<p>Chained hash tables have advantages over open addressed hash tables in that the removal operation is simple and resizing the table can be postponed for a much longer time because performance <a href="//en.wikipedia.org/wiki/graceful_degradation" class="extiw" title="w:graceful degradation">degrades more gracefully</a> even when every slot is used. Indeed, many chaining hash tables may not require resizing at all since performance degradation is linear as the table fills. For example, a chaining hash table containing twice its recommended capacity of data would only be about twice as slow on average as the same table at its recommended capacity.</p>
<p>Chained hash tables inherit the disadvantages of linked lists. When storing small records, the overhead of the linked list can be significant. An additional disadvantage is that traversing a linked list has poor <a href="//en.wikipedia.org/wiki/Locality_of_reference" class="extiw" title="w:Locality of reference">cache performance</a>.</p>
<p>Alternative data structures can be used for chains instead of linked lists. By using a <a href="//en.wikipedia.org/wiki/Self-balancing_binary_search_tree" class="extiw" title="w:Self-balancing binary search tree">self-balancing tree</a>, for example, the theoretical worst-case time of a hash table can be brought down to O(log <i>n</i>) rather than O(<i>n</i>). However, since each list is intended to be short, this approach is usually inefficient unless the hash table is designed to run at full capacity or there are unusually high collision rates, as might occur in input designed to cause collisions. <a href="/w/index.php?title=Dynamic_array&amp;action=edit&amp;redlink=1" class="new" title="Dynamic array (does not exist)">Dynamic arrays</a> can also be used to decrease space overhead and improve cache performance when records are small.</p>
<p>Some chaining implementations use an optimization where the first record of each chain is stored in the table. Although this can increase performance, it is generally not recommended: chaining tables with reasonable load factors contain a large proportion of empty slots, and the larger slot size causes them to waste large amounts of space.</p>
<h4><span class="mw-headline" id="Open_addressing">Open addressing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-6" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<div class="thumb tright">
<div class="thumbinner" style="width:364px;"><a href="/wiki/File:HASHTB12.svg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/9/90/HASHTB12.svg/362px-HASHTB12.svg.png" width="362" height="226" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/9/90/HASHTB12.svg/543px-HASHTB12.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/9/90/HASHTB12.svg/724px-HASHTB12.svg.png 2x" data-file-width="690" data-file-height="430" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:HASHTB12.svg" class="internal" title="Enlarge"></a></div>
Hash collision resolved by linear probing (interval=1).</div>
</div>
</div>
<p>Open addressing hash tables can store the records directly within the array. A hash collision is resolved by <i>probing</i>, or searching through alternate locations in the array (the <i>probe sequence</i>) until either the target record is found, or an unused array slot is found, which indicates that there is no such key in the table. Well known probe sequences include:</p>
<dl>
<dt><a href="/w/index.php?title=Linear_probing&amp;action=edit&amp;redlink=1" class="new" title="Linear probing (does not exist)">linear probing</a>&#160;</dt>
<dd>in which the interval between probes is fixedâ€”often at 1,</dd>
<dt><a href="/w/index.php?title=Quadratic_probing&amp;action=edit&amp;redlink=1" class="new" title="Quadratic probing (does not exist)">quadratic probing</a>&#160;</dt>
<dd>in which the interval between probes increases linearly (hence, the indices are described by a quadratic function), and</dd>
<dt><a href="/w/index.php?title=Double_hashing&amp;action=edit&amp;redlink=1" class="new" title="Double hashing (does not exist)">double hashing</a>&#160;</dt>
<dd>in which the interval between probes is fixed for each record but is computed by another hash function.</dd>
</dl>
<p>The main tradeoffs between these methods are that linear probing has the best cache performance but is most sensitive to clustering, while double hashing has poor cache performance but exhibits virtually no clustering; quadratic hashing falls in-between in both areas. Double hashing can also require more computation than other forms of probing. Some open addressing methods, such as <a href="/w/index.php?title=Last-come-first-served_hashing&amp;action=edit&amp;redlink=1" class="new" title="Last-come-first-served hashing (does not exist)">last-come-first-served hashing</a> and <a href="/w/index.php?title=Cuckoo_hashing&amp;action=edit&amp;redlink=1" class="new" title="Cuckoo hashing (does not exist)">cuckoo hashing</a> move existing keys around in the array to make room for the new key. This gives better maximum search times than the methods based on probing.</p>
<p>A critical influence on performance of an open addressing hash table is the <i>load factor</i>; that is, the proportion of the slots in the array that are used. As the load factor increases towards 100%, the number of probes that may be required to find or insert a given key rises dramatically. Once the table becomes full, probing algorithms may even fail to terminate. Even with good hash functions, load factors are normally limited to 80%. A poor hash function can exhibit poor performance even at very low load factors by generating significant clustering. What causes hash functions to cluster is not well understood, and it is easy to unintentionally write a hash function which causes severe clustering.</p>
<h5><span class="mw-headline" id="Example_pseudocode">Example pseudocode</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-7" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The following <a href="//en.wikipedia.org/wiki/pseudocode" class="extiw" title="w:pseudocode">pseudocode</a> is an implementation of an open addressing hash table with linear probing and single-slot stepping, a common approach that is effective if the hash function is good. Each of the <b>lookup</b>, <b>set</b> and <b>remove</b> functions use a common internal function <b>findSlot</b> to locate the array slot that either does or should contain a given key.</p>
<pre>
 <b>record</b> pair { key, value }
 <b>var</b> <i>pair array</i> slot[0..numSlots-1]
 
 <b>function</b> findSlot(key)
     i := hash(key) modulus numSlots
     <b>loop</b>
         <b>if</b> slot[i] is not occupied <b>or</b> slot[i].key = key
             <b>return</b> i
         i := (i + 1) modulus numSlots
 
 <b>function</b> lookup(key)
     i := findSlot(key)
     <b>if</b> slot[i] is occupied   <i>// key is in table</i>
         <b>return</b> slot[i].value
     <b>else</b>                     <i>// key is not in table</i>
         <b>return</b> not found     
 
 <b>function</b> set(key, value)
     i := findSlot(key)
     <b>if</b> slot[i] is occupied
         slot[i].value := value
     <b>else</b>
         <b>if</b> the table is almost full
             rebuild the table larger <i>(note 1)</i>
             i := findSlot(key)
         slot[i].key   := key
         slot[i].value := value
</pre>
<p>Another example showing open addressing technique. Presented function is converting each part(4) of an Internet protocol address, where NOT is bitwise NOT, XOR is bitwise XOR, OR is bitwise OR, AND is bitwise AND and &lt;&lt; and &gt;&gt; are shift-left and shift-right:</p>
<pre>
 <i>// key_1,key_2,key_3,key_4 are following 3-digit numbers - parts of ip address xxx.xxx.xxx.xxx</i>
 <b>function</b> ip(key parts)
     j := 1
     <b>do</b>
         key := (key_2 &lt;&lt; 2)
         key := (key + (key_3 &lt;&lt; 7))
         key := key + (j OR key_4 &gt;&gt; 2) * (key_4) * (j + key_1) XOR j
         key := key AND _prime_    <i>// _prime_ is a prime number</i>
         j := (j+1) 
     <b>while</b> collision
     <b>return</b> key
</pre>
<dl>
<dt>note 1&#160;</dt>
<dd>Rebuilding the table requires allocating a larger array and recursively using the <b>set</b> operation to insert all the elements of the old array into the new larger array. It is common to increase the array size <a href="/w/index.php?title=Exponential_growth&amp;action=edit&amp;redlink=1" class="new" title="Exponential growth (does not exist)">exponentially</a>, for example by doubling the old array size.</dd>
</dl>
<pre>
 <b>function</b> remove(key)
     i := findSlot(key)
     <b>if</b> slot[i] is unoccupied
         return   <i>// key is not in the table</i>
     j := i
     <b>loop</b>
         j := (j+1) modulus numSlots
         <b>if</b> slot[j] is unoccupied
             <b>exit loop</b>
         k := hash(slot[j].key) modulus numSlots
         <b>if</b> (j &gt; i <b>and</b> (k &lt;= i <b>or</b> k &gt; j)) <b>or</b>
            (j &lt; i <b>and</b> (k &lt;= i <b>and</b> k &gt; j)) <i>(note 2)</i>
             slot[i] := slot[j]
             i := j
     mark slot[i] as unoccupied
</pre>
<dl>
<dt>note 2&#160;</dt>
<dd>For all records in a cluster, there must be no vacant slots between their natural hash position and their current position (else lookups will terminate before finding the record). At this point in the pseudocode, <i>i</i> is a vacant slot that might be invalidating this property for subsequent records in the cluster. <i>j</i> is such as subsequent record. <i>k</i> is the raw hash where the record at <i>j</i> would naturally land in the hash table if there were no collisions. This test is asking if the record at <i>j</i> is invalidly positioned with respect to the required properties of a cluster now that <i>i</i> is vacant.</dd>
</dl>
<p>Another technique for removal is simply to mark the slot as deleted. However this eventually requires rebuilding the table simply to remove deleted records. The methods above provide O(1) updating and removal of existing records, with occasional rebuilding if the high water mark of the table size grows.</p>
<p>The O(1) remove method above is only possible in linearly probed hash tables with single-slot stepping. In the case where many records are to be deleted in one operation, marking the slots for deletion and later rebuilding may be more efficient.</p>
<h4><span class="mw-headline" id="Open_addressing_versus_chaining">Open addressing versus chaining</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-8" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Chained hash tables have the following benefits over open addressing:</p>
<ul>
<li>They are simple to implement effectively and only require basic data structures.</li>
<li>From the point of view of writing suitable hash functions, chained hash tables are insensitive to clustering, only requiring minimization of collisions. Open addressing depends upon better hash functions to avoid clustering. This is particularly important if novice programmers can add their own hash functions, but even experienced programmers can be caught out by unexpected clustering effects.</li>
<li>They degrade in performance more gracefully. Although chains grow longer as the table fills, a chained hash table cannot "fill up" and does not exhibit the sudden increases in lookup times that occur in a near-full table with open addressing. (<i>see right</i>)</li>
<li>If the hash table stores large records, about 5 or more words per record, chaining uses less memory than open addressing.</li>
<li>If the hash table is sparse (that is, it has a big array with many free array slots), chaining uses less memory than open addressing even for small records of 2 to 4 words per record due to its external storage.</li>
</ul>
<div class="thumb tright">
<div class="thumbinner" style="width:364px;"><a href="/wiki/File:Hash_table_average_insertion_time.png" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Hash_table_average_insertion_time.png/362px-Hash_table_average_insertion_time.png" width="362" height="235" class="thumbimage" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Hash_table_average_insertion_time.png/543px-Hash_table_average_insertion_time.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Hash_table_average_insertion_time.png/724px-Hash_table_average_insertion_time.png 2x" data-file-width="954" data-file-height="620" /></a>
<div class="thumbcaption">
<div class="magnify"><a href="/wiki/File:Hash_table_average_insertion_time.png" class="internal" title="Enlarge"></a></div>
This graph compares the average number of cache misses required to lookup elements in tables with chaining and linear probing. As the table passes the 80%-full mark, linear probing's performance drastically degrades.</div>
</div>
</div>
<p>For small record sizes (a few words or less) the benefits of in-place open addressing compared to chaining are:</p>
<ul>
<li>They can be more space-efficient than chaining since they don't need to store any pointers or allocate any additional space outside the hash table. Simple linked lists require a word of overhead per element.</li>
<li>Insertions avoid the time overhead of memory allocation, and can even be implemented in the absence of a memory allocator.</li>
<li>Because it uses internal storage, open addressing avoids the extra indirection required for chaining's external storage. It also has better <a href="//en.wikipedia.org/wiki/locality_of_reference" class="extiw" title="w:locality of reference">locality of reference</a>, particularly with linear probing. With small record sizes, these factors can yield better performance than chaining, particularly for lookups.</li>
<li>They can be easier to <a href="//en.wikipedia.org/wiki/serialization" class="extiw" title="w:serialization">serialize</a>, because they don't use pointers.</li>
</ul>
<p>On the other hand, normal open addressing is a poor choice for large elements, since these elements fill entire cache lines (negating the cache advantage), and a large amount of space is wasted on large empty table slots. If the open addressing table only stores references to elements (external storage), it uses space comparable to chaining even for large records but loses its speed advantage.</p>
<p>Generally speaking, open addressing is better used for hash tables with small records that can be stored within the table (internal storage) and fit in a cache line. They are particularly suitable for elements of one word or less. In cases where the tables are expected to have high load factors, the records are large, or the data is variable-sized, chained hash tables often perform as well or better.</p>
<p>Ultimately, used sensibly any kind of hash table algorithm is usually fast <i>enough</i>; and the percentage of a calculation spent in hash table code is low. Memory usage is rarely considered excessive. Therefore, in most cases the differences between these algorithms is marginal, and other considerations typically come into play.</p>
<h4><span class="mw-headline" id="Coalesced_hashing">Coalesced hashing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-9" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<dl>
<dd><span class="noprint"><i>Main page: <a href="/w/index.php?title=Coalesced_hashing&amp;action=edit&amp;redlink=1" class="new" title="Coalesced hashing (does not exist)">Coalesced hashing</a></i></span></dd>
</dl>
<p>A hybrid of chaining and open addressing, coalesced hashing links together chains of nodes within the table itself. Like open addressing, it achieves space usage and (somewhat diminished) cache advantages over chaining. Like chaining, it does not exhibit clustering effects; in fact, the table can be efficiently filled to a high density. Unlike chaining, it cannot have more elements than table slots.</p>
<h4><span class="mw-headline" id="Perfect_hashing">Perfect hashing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-10" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<dl>
<dd><span class="noprint"><i>Main page: <a href="/w/index.php?title=Perfect_hashing&amp;action=edit&amp;redlink=1" class="new" title="Perfect hashing (does not exist)">Perfect hashing</a></i></span></dd>
</dl>
<p>If all of the keys that will be used are known ahead of time, and there are no more keys that can fit the hash table, <a href="/w/index.php?title=Perfect_hashing&amp;action=edit&amp;redlink=1" class="new" title="Perfect hashing (does not exist)">perfect hashing</a> can be used to create a perfect hash table, in which there will be no collisions. If <a href="/w/index.php?title=Minimal_perfect_hashing&amp;action=edit&amp;redlink=1" class="new" title="Minimal perfect hashing (does not exist)">minimal perfect hashing</a> is used, every location in the hash table can be used as well.</p>
<p>Perfect hashing gives a hash table where the time to make a lookup is constant in the worst case. This is in contrast to chaining and open addressing methods, where the time for lookup is low on average, but may be arbitrarily large. There exist methods for maintaining a perfect hash function under insertions of keys, known as <a href="/w/index.php?title=Dynamic_perfect_hashing&amp;action=edit&amp;redlink=1" class="new" title="Dynamic perfect hashing (does not exist)">dynamic perfect hashing</a>. A simpler alternative, that also gives worst case constant lookup time, is <a href="/w/index.php?title=Cuckoo_hashing&amp;action=edit&amp;redlink=1" class="new" title="Cuckoo hashing (does not exist)">cuckoo hashing</a>.</p>
<h4><span class="mw-headline" id="Probabilistic_hashing">Probabilistic hashing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-11" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Perhaps the simplest solution to a collision is to replace the value that is already in the slot with the new value, or slightly less commonly, drop the record that is to be inserted. In later searches, this may result in a search not finding a record which has been inserted. This technique is particularly useful for implementing caching.</p>
<p>An even more space-efficient solution which is similar to this is use a <a href="//en.wikipedia.org/wiki/bit_array" class="extiw" title="w:bit array">bit array</a> (an array of one-bit fields) for our table. Initially all bits are set to zero, and when we insert a key, we set the corresponding bit to one. False negatives cannot occur, but <a href="/w/index.php?title=False_positives&amp;action=edit&amp;redlink=1" class="new" title="False positives (does not exist)">false positives</a> can, since if the search finds a 1 bit, it will claim that the value was found, even if it was just another value that hashed into the same array slot by coincidence. In reality, such a hash table is merely a specific type of <a href="//en.wikipedia.org/wiki/Bloom_filter" class="extiw" title="w:Bloom filter">Bloom filter</a>.</p>
<h3><span class="mw-headline" id="Table_resizing">Table resizing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-12" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>With a good hash function, a hash table can typically contain about 70%â€“80% as many elements as it does table slots and still perform well. Depending on the collision resolution mechanism, performance can begin to suffer either gradually or dramatically as more elements are added. To deal with this, when the load factor exceeds some threshold, we allocate a new, larger table, and add all the contents of the original table to this new table. In <a href="/w/index.php?title=Java_programming_language&amp;action=edit&amp;redlink=1" class="new" title="Java programming language (does not exist)">Java</a>'s HashMap class, for example, the default load factor threshold is 0.75.</p>
<p>This can be a very expensive operation, and the necessity for it is one of the hash table's disadvantages. In fact, some naive methods for doing this, such as enlarging the table by one each time you add a new element, reduce performance so drastically as to make the hash table useless. However, if we enlarge the table by some fixed percent, such as 10% or 100%, it can be shown using <a href="/w/index.php?title=Amortized_analysis&amp;action=edit&amp;redlink=1" class="new" title="Amortized analysis (does not exist)">amortized analysis</a> that these resizings are so infrequent that the average time per lookup remains constant-time. To see why this is true, suppose a hash table using chaining begins at the minimum size of 1 and is doubled each time it fills above 100%. If in the end it contains <i>n</i> elements, then the total add operations performed for all the resizings is:</p>
<dl>
<dd>1 + 2 + 4 + ... + <i>n</i> = 2<i>n</i> - 1.</dd>
</dl>
<p>Because the costs of the resizings form a <a href="/w/index.php?title=Geometric_series&amp;action=edit&amp;redlink=1" class="new" title="Geometric series (does not exist)">geometric series</a>, the total cost is O(<i>n</i>). But we also perform <i>n</i> operations to add the <i>n</i> elements in the first place, so the total time to add <i>n</i> elements with resizing is O(<i>n</i>), an amortized time of O(1) per element.</p>
<p>On the other hand, some hash table implementations, notably in <a href="/w/index.php?title=Real-time_system&amp;action=edit&amp;redlink=1" class="new" title="Real-time system (does not exist)">real-time systems</a>, cannot pay the price of enlarging the hash table all at once, because it may interrupt time-critical operations. One simple approach is to initially allocate the table with enough space for the expected number of elements and forbid the addition of too many elements. Another useful but more memory-intensive technique is to perform the resizing gradually:</p>
<ul>
<li>Allocate the new hash table, but leave the old hash table and check both tables during lookups.</li>
<li>Each time an insertion is performed, add that element to the new table and also move <i>k</i> elements from the old table to the new table.</li>
<li>When all elements are removed from the old table, deallocate it.</li>
</ul>
<p>To ensure that the old table will be completely copied over before the new table itself needs to be enlarged, it's necessary to increase the size of the table by a factor of at least (<i>k</i> + 1)/<i>k</i> during the resizing.</p>
<p><a href="/w/index.php?title=Linear_hashing&amp;action=edit&amp;redlink=1" class="new" title="Linear hashing (does not exist)">Linear hashing</a> is a hash table algorithm that permits incremental hash table expansion. It is implemented using a single hash table, but with two possible look-up functions.</p>
<p>Another way to decrease the cost of table resizing is to choose a hash function in such a way that the hashes of most values do not change when the table is resized. This approach, called <a href="/w/index.php?title=Consistent_hashing&amp;action=edit&amp;redlink=1" class="new" title="Consistent hashing (does not exist)">consistent hashing</a>, is prevalent in disk-based and distributed hashes, where resizing is prohibitively costly.</p>
<h3><span class="mw-headline" id="Ordered_retrieval_issue">Ordered retrieval issue</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-13" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Hash tables store data in pseudo-random locations, so accessing the data in a sorted manner is a very time consuming operation. Other data structures such as <a href="/w/index.php?title=Self-balancing_binary_search_tree&amp;action=edit&amp;redlink=1" class="new" title="Self-balancing binary search tree (does not exist)">self-balancing binary search trees</a> generally operate more slowly (since their lookup time is O(log <i>n</i>)) and are rather more complex to implement than hash tables but maintain a sorted data structure at all times. See <a href="/w/index.php?title=Associative_array&amp;action=edit&amp;redlink=1" class="new" title="Associative array (does not exist)">a comparison of hash tables and self-balancing binary search trees</a>.</p>
<h3><span class="mw-headline" id="Problems_with_hash_tables">Problems with hash tables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-14" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Although hash table lookups use constant time on average, the time spent can be significant. Evaluating a good hash function can be a slow operation. In particular, if simple array indexing can be used instead, this is usually faster.</p>
<p>Hash tables in general exhibit poor <a href="/w/index.php?title=Locality_of_reference&amp;action=edit&amp;redlink=1" class="new" title="Locality of reference (does not exist)">locality of reference</a>â€”that is, the data to be accessed is distributed seemingly at random in memory. Because hash tables cause access patterns that jump around, this can trigger <a href="/w/index.php?title=CPU_cache&amp;action=edit&amp;redlink=1" class="new" title="CPU cache (does not exist)">microprocessor cache</a> misses that cause long delays. Compact data structures such as arrays, searched with <a href="/w/index.php?title=Linear_search&amp;action=edit&amp;redlink=1" class="new" title="Linear search (does not exist)">linear search</a>, may be faster if the table is relatively small and keys are cheap to compare, such as with simple integer keys. According to <a href="/w/index.php?title=Moore%27s_Law&amp;action=edit&amp;redlink=1" class="new" title="Moore's Law (does not exist)">Moore's Law</a>, cache sizes are growing exponentially and so what is considered "small" may be increasing. The optimal performance point varies from system to system; for example, a trial on <a href="/w/index.php?title=Parrot_virtual_machine&amp;action=edit&amp;redlink=1" class="new" title="Parrot virtual machine (does not exist)">Parrot</a> shows that its hash tables outperform linear search in all but the most trivial cases (one to three entries).</p>
<p>More significantly, hash tables are more difficult and error-prone to write and use. Hash tables require the design of an effective hash function for each key type, which in many situations is more difficult and time-consuming to design and debug than the mere comparison function required for a <a href="/w/index.php?title=Self-balancing_binary_search_tree&amp;action=edit&amp;redlink=1" class="new" title="Self-balancing binary search tree (does not exist)">self-balancing binary search tree</a>. In open-addressed hash tables it's even easier to create a poor hash function.</p>
<p>Additionally, in some applications, a <a href="/w/index.php?title=Black_hat&amp;action=edit&amp;redlink=1" class="new" title="Black hat (does not exist)">black hat</a> with knowledge of the hash function may be able to supply information to a hash which creates worst-case behavior by causing excessive collisions, resulting in very poor performance (i.e., a <a href="/w/index.php?title=Denial_of_service_attack&amp;action=edit&amp;redlink=1" class="new" title="Denial of service attack (does not exist)">denial of service attack</a>). In critical applications, either <a href="/w/index.php?title=Universal_hashing&amp;action=edit&amp;redlink=1" class="new" title="Universal hashing (does not exist)">universal hashing</a> can be used or a data structure with better worst-case guarantees may be preferable. For details, see Crosby and Wallach's <i><a rel="nofollow" class="external text" href="http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003.pdf">Denial of Service via Algorithmic Complexity Attacks</a></i>.</p>
<h3><span class="mw-headline" id="Other_hash_table_algorithms">Other hash table algorithms</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-15" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>Extendible hashing</b> and <b>linear hashing</b> are hash algorithms that are used in the context of database algorithms used for instance in index file structures, and even primary file organization for a database. Generally, in order to make search scalable for large databases, the search time should be proportional log N or near constant, where N is the number of records to search. Log N searches can be implemented with tree structures, because the degree of fan out and the shortness of the tree relates to the number of steps needed to find a record, so the height of the tree is the maximum number of disc accesses it takes to find where a record is. However, hash tables are also used, because the cost of a disk access can be counted in units of disc accesses, and often that unit is a block of data. Since a hash table can, in the best case, find a key with one or two accesses, a hash table index is regarded as generally faster when retrieving a collection of records during a join operation e.g.</p>
<pre>
SELECT * from customer, orders where customer.cust_id = orders.cust_id and cust_id = X
</pre>
<p>i.e. If orders has a hash index on cust_id, then it takes constant time to locate the block that contains record locations for orders matching cust_id = X. (although, it would be better if the value type of orders was a list of order ids, so that hash keys are just one unique cust_id for each batch of orders, to avoid unnecessary collisions).</p>
<p>Extendible hashing and linear hashing have certain similarities: collisions are accepted as inevitable and are part of the algorithm where blocks or buckets of collision space is added&#160;; traditional good hash function ranges are required, but the hash value is transformed by a dynamic address function&#160;: in <b>extendible hashing</b>, a bit mask is used to mask out unwanted bits, but this mask length increases by one periodically, doubling the available addressing space&#160;; also in extendible hashing, there is an indirection with a directory address space, the directory entries being paired with another address (a pointer ) to the actual block containing the key-value pairs; the entries in the directory correspond to the bit masked hash value (so that the number of entries is equal to maximum bit mask value + 1 e.g. a bit mask of 2 bits, can address a directory of 00 01 10 11, or 3 + 1 = 4).</p>
<p>In <b>linear hashing</b>, the traditional hash value is also masked with a bit mask, but if the resultant smaller hash value falls below a 'split' variable, the original hash value is masked with a bit mask of one bit greater length, making the resultant hash value address recently added blocks. The split variable ranges incrementally between 0 and the maximum current bit mask value e.g. a bit mask of 2, or in the terminology of linear hashing, a "level" of 2, the split variable will range between 0 to 3. When the split variable reaches 4, the level increases by 1, so in the next round of the split variable, it will range between 0 to 7, and reset again when it reaches 8.</p>
<p>The split variable incrementally allows increased addressing space, as new blocks are added; the decision to add a new block occurs whenever a key-and=value is being inserted, and overflows the particular block the key-and-value's key hashes into. This overflow location may be completely unrelated to the block going to be split pointed to by the split variable. However, over time, it is expected that given a good random hash function that distributes entries fairly evenly amongst all addressable blocks, the blocks that actually require splitting because they have overflowed get their turn in round-robin fashion as the split value ranges between 0 - N where N has a factor of 2 to the power of Level, level being the variable incremented whenever the split variable hits N.</p>
<p>New blocks are added one at a time with both extendible hashing, and with linear hashing.</p>
<p>In <b>extendible hashing</b>, a block overflow ( a new key-value colliding with B other key-values, where B is the size of a block) is handled by checking the size of the bit mask "locally", called the "local depth", an attribute which must be stored with the block. The directory structure, also has a depth, the "global depth". If the local depth is less than the global depth, then the local depth is incremented, and all the key values are rehashed and passed through a bit mask which is one bit longer now, placing them either in the current block, or in another block. If the other block happens to be the same block when looked up in the directory, a new block is added, and the directory entry for the other block is made to point to the new block. Why does the directory have entries where two entries point to the same block&#160;? This is because if the local depth <b>is equal to</b> the global depth of the directory, this means the bit mask of the directory does not have enough bits to deal with an increment in the bit mask length of the block, and so the directory must have its bit mask length incremented, but this means the directory now doubles the number of addressable entries. Since half the entries addressable don't exist, the directory simply copies the pointers over to the new entries e.g. if the directory had entries for 00, 01, 10, 11, or a 2 bit mask, and it becomes a 3 bit mask, then 000 001 010 011 100 101 110 111 become the new entries, and 00's block address go to 000 and 001&#160;; 01's pointer goes to 010 and 011, 10 goes to 100 and 101 and so on. And so this creates the situation where two directory entries point to the same block. Although the block that was going to overflow, now can add a new block by redirecting the second pointer to a newly appended block, the other original blocks will have two pointers to them. When it is their turn to split, the algorithm will check local vs global depth and this time find that the local depth is less, and hence no directory splitting is required, only a new block be appended, and the second directory pointer moved from addressing the previous block to addressing the new block.</p>
<p>In <b>linear hashing</b>, adding a similarly hashed block does not occurs immediately when a block overflows, and therefore an overflow block is created to be attached to the overflowing block. However, a block overflow is a signal that more space will be required, and this happens by splitting the block pointed to by the "split" variable, which is initially zero, and hence initially points to block zero. The splitting is done by taking all the key-value pairs in the splitting block, and its overflow block(s), hashing the keys again, but with a bit mask of length current level + 1. This will result in two block addresses, some will be the old block number, and others will be</p>
<pre>
a2 = old block number + ( N times 2 ^ (level) )
</pre>
<dl>
<dt>Rationale</dt>
</dl>
<p>Let m = N times 2 ^ level&#160;; if h is the original hash value, and old block number = h mod m, and now the new block number is h mod ( m * 2 ), because m * 2 = N times 2 ^ (level+1), then the new block number is either h mod m if (h / m) is even so dividing h/m by 2 leaves a zero remainder and therefore doesn't change the remainder, or the new block number is ( h mod m ) + m because h / m is an odd number, and dividing h / m by 2 will leave an excess remainder of m, + the original remainder. ( The same rationale applies to extendible hashing depth incrementing ).</p>
<p>As above, a new block is created with a number a2, which will usually occur at +1 the previous a2 value. Once this is done, the split variable is incremented, so that the next a2 value will be again old a2 + 1. In this way, each block is covered by the split variable eventually, so each block is preemptively rehashed into extra space, and new blocks are added incrementally. Overflow blocks that are no longer needed are discarded, for later garbage collection if needed, or put on an available free block list by chaining.</p>
<p>When the split variable reaches ( N times 2 ^ level ), level is incremented and split variable is reset to zero. In this next round, the split variable will now traverse from zero to ( N times 2 ^ (old_level + 1 ) ), which is exactly the number of blocks at the start of the previous round, but including all the blocks created by the previous round.</p>
<h4><span class="mw-headline" id="A_simple_inference_on_file_storage_mapping_of_linear_hashing_and_extendible_hashing">A simple inference on file storage mapping of linear hashing and extendible hashing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-16" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>As can be seen, extendible hashing requires space to store a directory which can double in size.</p>
<p>Since the space of both algorithms increase by one block at a time, if blocks have a known maximum size or fixed size, then it is straight forward to map the blocks as blocks sequentially appended to a file.</p>
<p>In extendible hashing, it would be logical to store the directory as a separate file, as doubling can be accommodated by adding to the end of the directory file. The separate block file would not have to change, other than have blocks appended to its end.</p>
<p>Header information for linear hashing doesn't increase in size&#160;: basically just the values for N, level, and split need to be recorded, so these can be incorporated as a header into a fixed block size linear hash storage file.</p>
<p>However, linear hashing requires space for overflow blocks, and this might best be stored in another file, otherwise addressing blocks in the linear hash file is not as straight forward as multiplying the block number by the block size and adding the space for N,level, and split.</p>
<p><br />
In the next section, a complete example of linear hashing in Java is given, using a in memory implementation of linear hashing, and code to manage blocks as files in a file directory, the whole contents of the file directory representing the persistent linear hashing structure.</p>
<h3><span class="mw-headline" id="Implementations_2">Implementations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-17" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>While many programming languages already provide hash table functionality,<sup id="cite_ref-4" class="reference"><a href="#cite_note-4">[1]</a></sup> there are several independent implementations worth mentioning.</p>
<ul>
<li><a rel="nofollow" class="external text" href="http://goog-sparsehash.sourceforge.net/">Google Sparse Hash</a> The Google SparseHash project contains several hash-map implementations in use at Google, with different performance characteristics, including an implementation that optimizes for space and one that optimizes for speed. The memory-optimized one is extremely memory-efficient with only 2 bits/entry of overhead.</li>
<li><a rel="nofollow" class="external text" href="https://launchpad.net/libmct">MCT</a> provides hashtables similar to Google's <code>dense_hash_map</code>, but without restriction on contained values; it also comes with exception safety and support for C++0x features.</li>
<li>A number of runtime languages and/or standard libraries use hash tables to implement their support for associative arrays because of their efficiency.</li>
</ul>
<h4><span class="mw-headline" id="A_python_implementation_of_extendible_hashing">A python implementation of extendible hashing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-18" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The file - block management routines aren't there, so this could be added in to make this a real implementation of a database hash index.</p>
<p>A full page is split according to the (local depth)th bit, first by collecting all the directory indices pointing to the full page, updating the pointers according to the d bit being 0 or 1 corresponding to first and second new pages, then reloading all the key-values after hashing each key and using the d bit of each hash to see which page to allocate to. The local depth of each new page is one greater than the old page's local depth, so that the next d bit can be used next time when splitting.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="python source-python">
<pre class="de1">
PAGE_SZ <span class="sy0">=</span> <span class="nu0">20</span>
 
<span class="kw1">class</span> Page:
 
	<span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:
		<span class="kw2">self</span>.<span class="me1">m</span> <span class="sy0">=</span> <span class="br0">{</span><span class="br0">}</span>
		<span class="kw2">self</span>.<span class="me1">d</span> <span class="sy0">=</span> <span class="nu0">0</span>
 
	<span class="kw1">def</span> full<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:
		<span class="kw1">return</span> <span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">m</span><span class="br0">)</span> <span class="sy0">&gt;</span> PAGE_SZ 
 
	<span class="kw1">def</span> put<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span>k<span class="sy0">,</span>v<span class="br0">)</span>:
		<span class="kw2">self</span>.<span class="me1">m</span><span class="br0">[</span>k<span class="br0">]</span> <span class="sy0">=</span> v
 
	<span class="kw1">def</span> get<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span>k<span class="br0">)</span>:
		<span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">m</span>.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span>
 
<span class="kw1">class</span> EH:
 
	<span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:
		<span class="kw2">self</span>.<span class="me1">gd</span> <span class="sy0">=</span> <span class="nu0">0</span> 
		p <span class="sy0">=</span> Page<span class="br0">(</span><span class="br0">)</span>
		<span class="kw2">self</span>.<span class="me1">pp</span><span class="sy0">=</span> <span class="br0">[</span>p<span class="br0">]</span>
 
	<span class="kw1">def</span> get_page<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span>k<span class="br0">)</span>:
		h <span class="sy0">=</span> <span class="kw2">hash</span><span class="br0">(</span>k<span class="br0">)</span> 
		p <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">pp</span><span class="br0">[</span> h &amp; <span class="br0">(</span><span class="br0">(</span> <span class="nu0">1</span> <span class="sy0">&lt;&lt;</span> <span class="kw2">self</span>.<span class="me1">gd</span><span class="br0">)</span> -<span class="nu0">1</span><span class="br0">)</span><span class="br0">]</span>
		<span class="kw1">return</span> p		
 
	<span class="kw1">def</span>  put<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> k<span class="sy0">,</span> v<span class="br0">)</span>:
		p <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">get_page</span><span class="br0">(</span>k<span class="br0">)</span>
		<span class="kw1">if</span> p.<span class="me1">full</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">and</span> p.<span class="me1">d</span> <span class="sy0">==</span> <span class="kw2">self</span>.<span class="me1">gd</span>:
			<span class="kw2">self</span>.<span class="me1">pp</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">pp</span> + <span class="kw2">self</span>.<span class="me1">pp</span>
			<span class="kw2">self</span>.<span class="me1">gd</span> +<span class="sy0">=</span> <span class="nu0">1</span>
 
 
		<span class="kw1">if</span> p.<span class="me1">full</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">and</span> p.<span class="me1">d</span> <span class="sy0">&lt;</span> <span class="kw2">self</span>.<span class="me1">gd</span>:
			p.<span class="me1">put</span><span class="br0">(</span>k<span class="sy0">,</span>v<span class="br0">)</span><span class="sy0">;</span>
			p1 <span class="sy0">=</span> Page<span class="br0">(</span><span class="br0">)</span>
			p2 <span class="sy0">=</span> Page<span class="br0">(</span><span class="br0">)</span>
			<span class="kw1">for</span> k2 <span class="kw1">in</span> p.<span class="me1">m</span>.<span class="me1">keys</span><span class="br0">(</span><span class="br0">)</span>:
				v2 <span class="sy0">=</span> p.<span class="me1">m</span><span class="br0">[</span>k2<span class="br0">]</span>
				h <span class="sy0">=</span> k2.<span class="kw4">__hash__</span><span class="br0">(</span><span class="br0">)</span>
				h <span class="sy0">=</span> h &amp; <span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span> <span class="sy0">&lt;&lt;</span> <span class="kw2">self</span>.<span class="me1">gd</span><span class="br0">)</span> -<span class="nu0">1</span><span class="br0">)</span>
				<span class="kw1">if</span> <span class="br0">(</span>h | <span class="br0">(</span><span class="nu0">1</span> <span class="sy0">&lt;&lt;</span> p.<span class="me1">d</span><span class="br0">)</span> <span class="sy0">==</span> h<span class="br0">)</span>:
					p2.<span class="me1">put</span><span class="br0">(</span>k2<span class="sy0">,</span>v2<span class="br0">)</span>
				<span class="kw1">else</span>:
					p1.<span class="me1">put</span><span class="br0">(</span>k2<span class="sy0">,</span>v2<span class="br0">)</span>
			l <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span>
			<span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">xrange</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">pp</span><span class="br0">)</span><span class="br0">)</span>:
				<span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">pp</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">==</span> p:
					l.<span class="me1">append</span><span class="br0">(</span>i<span class="br0">)</span>
			<span class="kw1">for</span> i <span class="kw1">in</span> l:
				<span class="kw1">if</span> <span class="br0">(</span>i | <span class="br0">(</span> <span class="nu0">1</span> <span class="sy0">&lt;&lt;</span> p.<span class="me1">d</span><span class="br0">)</span> <span class="sy0">==</span> i<span class="br0">)</span>:
					<span class="kw2">self</span>.<span class="me1">pp</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> p2
 
				<span class="kw1">else</span>:
					<span class="kw2">self</span>.<span class="me1">pp</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> p1
 
			p1.<span class="me1">d</span> <span class="sy0">=</span> p.<span class="me1">d</span> + <span class="nu0">1</span>
			p2.<span class="me1">d</span> <span class="sy0">=</span> p1.<span class="me1">d</span>
		<span class="kw1">else</span>:	
			p.<span class="me1">put</span><span class="br0">(</span>k<span class="sy0">,</span>  v<span class="br0">)</span>
 
	<span class="kw1">def</span> get<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> k<span class="br0">)</span>:
		p <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">get_page</span><span class="br0">(</span>k<span class="br0">)</span>
		<span class="kw1">return</span> p.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span>
 
 
 
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">"__main__"</span>:
	eh <span class="sy0">=</span> EH<span class="br0">(</span><span class="br0">)</span>
	N <span class="sy0">=</span> <span class="nu0">10000</span>
	l <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span>
	<span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span>N<span class="br0">)</span>:	
		l.<span class="me1">append</span><span class="br0">(</span>i<span class="br0">)</span>
 
	<span class="kw1">import</span> <span class="kw3">random</span>
	<span class="kw3">random</span>.<span class="me1">shuffle</span><span class="br0">(</span>l<span class="br0">)</span>
	<span class="kw1">for</span> i <span class="kw1">in</span> l:
		eh.<span class="me1">put</span><span class="br0">(</span>i<span class="sy0">,</span>i<span class="br0">)</span>
	<span class="kw1">print</span> l
 
	<span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> N<span class="br0">)</span>:
		<span class="kw1">print</span> eh.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>
</pre></div>
</div>
<h4><span class="mw-headline" id="A_Java_implementation_of_extendible_hashing">A Java implementation of extendible hashing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-19" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>A direct Java translation of the above python code, tested to work.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="java source-java">
<pre class="de1">
<span class="kw1">package</span> <span class="co2">ext_hashing</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">java.util.ArrayList</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.HashMap</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.List</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Map</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Random</span><span class="sy0">;</span>
 
<span class="kw1">public</span> <span class="kw1">class</span> EH2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
	<span class="kw1">static</span> <span class="kw1">class</span> Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
		<span class="kw1">static</span> <span class="kw4">int</span> PAGE_SZ <span class="sy0">=</span> <span class="nu0">20</span><span class="sy0">;</span>
		<span class="kw1">private</span> Map<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> m <span class="sy0">=</span> <span class="kw1">new</span> HashMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw4">int</span> d <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
 
		<span class="kw4">boolean</span> full<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> m.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&gt;</span> PAGE_SZ<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw4">void</span> put<span class="br0">(</span>K k, V v<span class="br0">)</span> <span class="br0">{</span>
			m.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="br0">}</span>
 
		V get<span class="br0">(</span>K k<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> m.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw4">int</span> gd <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
 
	List<span class="sy0">&lt;</span>Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> pp <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
	<span class="kw1">public</span> EH2<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		pp.<span class="me1">add</span><span class="br0">(</span><span class="kw1">new</span> Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> getPage<span class="br0">(</span>K k<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw4">int</span> h <span class="sy0">=</span> k.<span class="me1">hashCode</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> p <span class="sy0">=</span> pp.<span class="me1">get</span><span class="br0">(</span>h <span class="sy0">&amp;</span> <span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span> <span class="sy0">&lt;&lt;</span> gd<span class="br0">)</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">return</span> p<span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw4">void</span> put<span class="br0">(</span>K k, V v<span class="br0">)</span> <span class="br0">{</span>
		Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> p <span class="sy0">=</span> getPage<span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">(</span>p.<span class="me1">full</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> p.<span class="me1">d</span> <span class="sy0">==</span> gd<span class="br0">)</span> <span class="br0">{</span>
			List<span class="sy0">&lt;</span>Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> pp2 <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>EH2.<span class="me1">Page</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span>pp<span class="br0">)</span><span class="sy0">;</span>
			pp.<span class="me1">addAll</span><span class="br0">(</span>pp2<span class="br0">)</span><span class="sy0">;</span>
			<span class="sy0">++</span>gd<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">if</span> <span class="br0">(</span>p.<span class="me1">full</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> p.<span class="me1">d</span> <span class="sy0">&lt;</span> gd<span class="br0">)</span> <span class="br0">{</span>
			p.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
			Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> p1, p2<span class="sy0">;</span>
			p1 <span class="sy0">=</span> <span class="kw1">new</span> Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			p2 <span class="sy0">=</span> <span class="kw1">new</span> Page<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">(</span>K k2 <span class="sy0">:</span> p.<span class="me1">m</span>.<span class="me1">keySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				V v2 <span class="sy0">=</span> p.<span class="me1">m</span>.<span class="me1">get</span><span class="br0">(</span>k2<span class="br0">)</span><span class="sy0">;</span>
 
				<span class="kw4">int</span> h <span class="sy0">=</span> k2.<span class="me1">hashCode</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&amp;</span> <span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span> <span class="sy0">&lt;&lt;</span> gd<span class="br0">)</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span>
 
				<span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>h <span class="sy0">|</span> <span class="br0">(</span><span class="nu0">1</span> <span class="sy0">&lt;&lt;</span> p.<span class="me1">d</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">==</span> h<span class="br0">)</span>
					p2.<span class="me1">put</span><span class="br0">(</span>k2, v2<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">else</span>
					p1.<span class="me1">put</span><span class="br0">(</span>k2, v2<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
			List<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> l <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> pp.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span>
				<span class="kw1">if</span> <span class="br0">(</span>pp.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span> <span class="sy0">==</span> p<span class="br0">)</span>
					l.<span class="me1">add</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">:</span> l<span class="br0">)</span>
				<span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>i <span class="sy0">|</span> <span class="br0">(</span><span class="nu0">1</span> <span class="sy0">&lt;&lt;</span> p.<span class="me1">d</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">==</span> i<span class="br0">)</span>
					pp.<span class="me1">set</span><span class="br0">(</span>i, p2<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">else</span>
					pp.<span class="me1">set</span><span class="br0">(</span>i, p1<span class="br0">)</span><span class="sy0">;</span>
 
			p1.<span class="me1">d</span> <span class="sy0">=</span> p.<span class="me1">d</span> <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span>
			p2.<span class="me1">d</span> <span class="sy0">=</span> p1.<span class="me1">d</span><span class="sy0">;</span>
 
		<span class="br0">}</span> <span class="kw1">else</span>
			p.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> V get<span class="br0">(</span>K k<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> getPage<span class="br0">(</span>k<span class="br0">)</span>.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
 
		<span class="kw4">int</span> N <span class="sy0">=</span> <span class="nu0">500000</span><span class="sy0">;</span>
 
		<span class="kw3">Random</span> r <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">Random</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		List<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> l <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			l.<span class="me1">add</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw4">int</span> j <span class="sy0">=</span> r.<span class="me1">nextInt</span><span class="br0">(</span>N<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> t <span class="sy0">=</span> l.<span class="me1">get</span><span class="br0">(</span>j<span class="br0">)</span><span class="sy0">;</span>
			l.<span class="me1">set</span><span class="br0">(</span>j, l.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			l.<span class="me1">set</span><span class="br0">(</span>i, t<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		EH2<span class="sy0">&lt;</span><span class="kw3">Integer</span>, Integer<span class="sy0">&gt;</span> eh <span class="sy0">=</span> <span class="kw1">new</span> EH2<span class="sy0">&lt;</span><span class="kw3">Integer</span>, Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			eh.<span class="me1">put</span><span class="br0">(</span>l.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span>, l.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">printf</span><span class="br0">(</span><span class="st0">"%d:%d , "</span>, i, eh.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">(</span>i <span class="sy0">%</span> <span class="nu0">10</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span>
				<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
	<span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<h4><span class="mw-headline" id="A_Java_implementation_of_linear_hashing">A Java implementation of linear hashing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-20" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>( usable for simple database indexing of arbitrary size, (almost&#160;?) )</p>
<p>This code evolved out of a need for a bigger Java HashMap. Originally, a Java HashMap standard object was used as a Map to index a heap like database file ( DBF format). But then, a file was encountered with so many records that the OutOfMemoryError was being thrown, so linear hashing seemed like a reasonably simple algorithm to use as a disk based index scheme.</p>
<p>Initially, linear hashing was implemented behind the Java Map interface, mainly the put(k,v) and get(k,v) methods. Generics was used, in order not to get too involved in the key and value details.</p>
<h6><span class="mw-headline" id="debugging_to_achieve_functionality">debugging to achieve functionality</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Hash_Tables&amp;action=edit&amp;section=T-21" title="Data Structures/Hash Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Custom dumps to System.err was used to verify that blocks were being created, filled, and overflow blocks were of expected number if they existed ( no. = 1 ). This was all done in a purely in-memory implementation.</p>
<p>Later, the standard Java decoupling was introduced, where the original LHMap2 class accepted listeners to events, such as when a block was needed. The listener was then implemented as a block file manager, loading blocks into the block list of the memory LHMap2 object whenever a null block was encountered on the block list, and checking whether virtual machine runtime free memory was low, and retiring blocks using just a basic first-to-last-listed cache removal algorithm (not least recently used (LRU), not least often used ) by saving them to disk file, and then actively invoking the system garbage collector.</p>
<p>Because an application use case existed, which was to externally index a large DBF table, this use case was used as the main test harness for the algorithm implementation.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="java source-java">
<pre class="de1">
<span class="kw1">package</span> <span class="co2">linearhashmap</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">java.io.Externalizable</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.IOException</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.ObjectInput</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.ObjectOutput</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.Serializable</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.ArrayList</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Collection</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Iterator</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.LinkedList</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.List</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Map</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Set</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.TreeMap</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.TreeSet</span><span class="sy0">;</span>
 
<span class="co3">/**
 * 
 * @param &lt;K&gt;
 *            key type , must implement equals() and hashCode()
 * @param &lt;V&gt;
 *            value type
 * 
 * 
 */</span>
<span class="kw1">public</span> <span class="kw1">class</span> LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw1">implements</span> Map<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span>, <span class="kw3">Serializable</span> <span class="br0">{</span>
 
	<span class="co3">/**
	 * 
	 */</span>
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">long</span> serialVersionUID <span class="sy0">=</span> 3095071852466632996L<span class="sy0">;</span>
 
	<span class="co3">/**
	 * 
	 */</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw1">interface</span> BlockListener<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">{</span>
		<span class="kw1">public</span> <span class="kw4">void</span> blockRequested<span class="br0">(</span><span class="kw4">int</span> block, LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	List<span class="sy0">&lt;</span>BlockListener<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> listeners <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>BlockListener<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
	<span class="co1">// int savedBlocks;</span>
	<span class="kw4">int</span> N<span class="sy0">;</span>
	<span class="kw4">int</span> level <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
	<span class="kw4">int</span> split <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
	<span class="kw4">int</span> blockSize<span class="sy0">;</span>
	<span class="kw4">long</span> totalWrites <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
 
	List<span class="sy0">&lt;</span>Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> blockList <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
	<span class="kw1">public</span> <span class="kw4">void</span> addBlockListener<span class="br0">(</span>BlockListener<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> listener<span class="br0">)</span> <span class="br0">{</span>
		listeners.<span class="me1">add</span><span class="br0">(</span>listener<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw4">void</span> notifyBlockRequested<span class="br0">(</span><span class="kw4">int</span> block<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">for</span> <span class="br0">(</span>BlockListener<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> l <span class="sy0">:</span> listeners<span class="br0">)</span> <span class="br0">{</span>
			l.<span class="me1">blockRequested</span><span class="br0">(</span>block, <span class="kw1">this</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> LHMap2<span class="br0">(</span><span class="kw4">int</span> blockSize, <span class="kw4">int</span> nStartingBlocks<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">this</span>.<span class="me1">blockSize</span> <span class="sy0">=</span> blockSize<span class="sy0">;</span>
		<span class="kw1">this</span>.<span class="me1">N</span> <span class="sy0">=</span> nStartingBlocks<span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> nStartingBlocks<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			addBlock<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw3">Runtime</span>.<span class="me1">getRuntime</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">addShutdownHook</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">Thread</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">Runnable</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
			@Override
			<span class="kw1">public</span> <span class="kw4">void</span> run<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
				showStructure<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="br0">}</span>
		<span class="br0">}</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw1">class</span> Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw1">implements</span> <span class="kw3">Externalizable</span> <span class="br0">{</span>
		<span class="co3">/**
		 * 
		 */</span>
 
		<span class="kw4">int</span> j <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
 
		Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> overflow <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
		LinkedList<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> keyList <span class="sy0">=</span> <span class="kw1">new</span> LinkedList<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		LinkedList<span class="sy0">&lt;</span>V<span class="sy0">&gt;</span> valueList <span class="sy0">=</span> <span class="kw1">new</span> LinkedList<span class="sy0">&lt;</span>V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">transient</span> <span class="kw1">private</span> LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> owner<span class="sy0">;</span>
		<span class="kw1">transient</span> <span class="kw1">private</span> Map<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> shadow <span class="sy0">=</span> <span class="kw1">new</span> TreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">private</span> <span class="kw4">boolean</span> changed <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>
 
		<span class="kw1">private</span> <span class="kw4">int</span> size <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
 
		<span class="kw1">public</span> LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> getOwner<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> owner<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> <span class="kw4">void</span> setOwner<span class="br0">(</span>LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> owner<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">this</span>.<span class="me1">owner</span> <span class="sy0">=</span> owner<span class="sy0">;</span>
			Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> ov <span class="sy0">=</span> overflow<span class="sy0">;</span>
			<span class="kw1">while</span> <span class="br0">(</span>ov <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				overflow.<span class="me1">setOwner</span><span class="br0">(</span>owner<span class="br0">)</span><span class="sy0">;</span>
				ov <span class="sy0">=</span> ov.<span class="me1">overflow</span><span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> Block<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">super</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> Block<span class="br0">(</span>LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map<span class="br0">)</span> <span class="br0">{</span>
			setOwner<span class="br0">(</span>map<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> V put<span class="br0">(</span>K k, V v<span class="br0">)</span> <span class="br0">{</span>
			setChanged<span class="br0">(</span><span class="kw2">true</span><span class="br0">)</span><span class="sy0">;</span>
 
			V v2 <span class="sy0">=</span> replace<span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">(</span>v2 <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="sy0">++</span>size<span class="sy0">;</span>
				<span class="kw1">if</span> <span class="br0">(</span>keyList.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">==</span> getOwner<span class="br0">(</span><span class="br0">)</span>.<span class="me1">blockSize</span><span class="br0">)</span> <span class="br0">{</span>
 
					<span class="kw1">if</span> <span class="br0">(</span>overflow <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
						getOwner<span class="br0">(</span><span class="br0">)</span>.<span class="me1">blockOverflowed</span><span class="br0">(</span><span class="kw1">this</span>, k, v<span class="br0">)</span><span class="sy0">;</span>
					<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
						overflow.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
					<span class="br0">}</span>
 
				<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
					keyList.<span class="me1">addFirst</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
					valueList.<span class="me1">addFirst</span><span class="br0">(</span>v<span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span>
 
			<span class="br0">}</span>
 
			<span class="kw1">return</span> v2<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw4">void</span> setChanged<span class="br0">(</span><span class="kw4">boolean</span> b<span class="br0">)</span> <span class="br0">{</span>
			changed <span class="sy0">=</span> b<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> Map<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> drainToMap<span class="br0">(</span>Map<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map<span class="br0">)</span> <span class="br0">{</span>
 
			<span class="kw1">while</span> <span class="br0">(</span><span class="sy0">!</span>keyList.<span class="me1">isEmpty</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				K k <span class="sy0">=</span> keyList.<span class="me1">removeLast</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				V v <span class="sy0">=</span> valueList.<span class="me1">removeLast</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				map.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="br0">}</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>overflow <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span>
 
				map <span class="sy0">=</span> overflow.<span class="me1">drainToMap</span><span class="br0">(</span>map<span class="br0">)</span><span class="sy0">;</span>
 
			garbageCollectionOverflow<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">return</span> map<span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> <span class="kw4">void</span> updateMap<span class="br0">(</span>Map<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map<span class="br0">)</span> <span class="br0">{</span>
			Iterator<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> ik <span class="sy0">=</span> keyList.<span class="me1">descendingIterator</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			Iterator<span class="sy0">&lt;</span>V<span class="sy0">&gt;</span> iv <span class="sy0">=</span> valueList.<span class="me1">descendingIterator</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">while</span> <span class="br0">(</span>ik.<span class="me1">hasNext</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> iv.<span class="me1">hasNext</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				map.<span class="me1">put</span><span class="br0">(</span>ik.<span class="me1">next</span><span class="br0">(</span><span class="br0">)</span>, iv.<span class="me1">next</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>overflow <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span>
				overflow.<span class="me1">updateMap</span><span class="br0">(</span>map<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="br0">}</span>
 
		<span class="kw1">private</span> <span class="kw4">void</span> garbageCollectionOverflow<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">if</span> <span class="br0">(</span>overflow <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				overflow.<span class="me1">garbageCollectionOverflow</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				overflow <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
 
			<span class="br0">}</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> <span class="kw4">void</span> addOverflowBucket<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
			<span class="co1">// assert overflow is needed</span>
			<span class="kw1">if</span> <span class="br0">(</span>keyList.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&lt;</span> getOwner<span class="br0">(</span><span class="br0">)</span>.<span class="me1">blockSize</span><span class="br0">)</span>
				<span class="kw1">return</span><span class="sy0">;</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>overflow <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				overflow <span class="sy0">=</span> <span class="kw1">new</span> Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>getOwner<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
				overflow.<span class="me1">addOverflowBucket</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> V replace<span class="br0">(</span>K key, V v2<span class="br0">)</span> <span class="br0">{</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>overflow <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				V v <span class="sy0">=</span> overflow.<span class="me1">replace</span><span class="br0">(</span>key, v2<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw1">if</span> <span class="br0">(</span>v <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span>
					<span class="kw1">return</span> v<span class="sy0">;</span>
			<span class="br0">}</span>
 
			Iterator<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> i <span class="sy0">=</span> keyList.<span class="me1">listIterator</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw4">int</span> j <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
 
			<span class="kw1">while</span> <span class="br0">(</span>i.<span class="me1">hasNext</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
 
				<span class="kw1">if</span> <span class="br0">(</span>key.<span class="me1">equals</span><span class="br0">(</span>i.<span class="me1">next</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
 
					V v <span class="sy0">=</span> valueList.<span class="me1">get</span><span class="br0">(</span>j<span class="br0">)</span><span class="sy0">;</span>
 
					<span class="kw1">if</span> <span class="br0">(</span>v2 <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
 
						valueList.<span class="me1">set</span><span class="br0">(</span>j, v2<span class="br0">)</span><span class="sy0">;</span>
 
					<span class="br0">}</span>
 
					<span class="kw1">return</span> v<span class="sy0">;</span>
				<span class="br0">}</span>
				<span class="sy0">++</span>j<span class="sy0">;</span>
			<span class="br0">}</span>
 
			<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> <span class="kw4">boolean</span> isChanged<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">return</span> changed<span class="sy0">;</span>
		<span class="br0">}</span>
 
		@Override
		<span class="kw1">public</span> <span class="kw4">void</span> readExternal<span class="br0">(</span><span class="kw3">ObjectInput</span> arg0<span class="br0">)</span> <span class="kw1">throws</span> <span class="kw3">IOException</span>,
				<span class="kw3">ClassNotFoundException</span> <span class="br0">{</span>
			<span class="kw4">int</span> sz <span class="sy0">=</span> arg0.<span class="me1">readInt</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> sz<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
				K k <span class="sy0">=</span> <span class="br0">(</span>K<span class="br0">)</span> arg0.<span class="me1">readObject</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				V v <span class="sy0">=</span> <span class="br0">(</span>V<span class="br0">)</span> arg0.<span class="me1">readObject</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				shadow.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
 
		<span class="kw1">public</span> <span class="kw4">void</span> loadFromShadow<span class="br0">(</span>LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> owner<span class="br0">)</span> <span class="br0">{</span>
			setOwner<span class="br0">(</span>owner<span class="br0">)</span><span class="sy0">;</span>
			Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> <span class="kw1">this</span><span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">(</span>K k <span class="sy0">:</span> shadow.<span class="me1">keySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="kw1">if</span> <span class="br0">(</span>b.<span class="me1">keyList</span>.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">==</span> owner.<span class="me1">blockSize</span><span class="br0">)</span> <span class="br0">{</span>
					Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> overflow <span class="sy0">=</span> <span class="kw1">new</span> Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span>owner<span class="br0">)</span><span class="sy0">;</span>
					b.<span class="me1">overflow</span> <span class="sy0">=</span> overflow<span class="sy0">;</span>
					b <span class="sy0">=</span> overflow<span class="sy0">;</span>
				<span class="br0">}</span>
				b.<span class="me1">keyList</span>.<span class="me1">add</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
				b.<span class="me1">valueList</span>.<span class="me1">add</span><span class="br0">(</span>shadow.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="br0">}</span>
			shadow.<span class="me1">clear</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		@Override
		<span class="kw1">public</span> <span class="kw4">void</span> writeExternal<span class="br0">(</span><span class="kw3">ObjectOutput</span> arg0<span class="br0">)</span> <span class="kw1">throws</span> <span class="kw3">IOException</span> <span class="br0">{</span>
			<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span>changed<span class="br0">)</span>
				<span class="kw1">return</span><span class="sy0">;</span>
			Map<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map <span class="sy0">=</span> <span class="kw1">new</span> TreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			updateMap<span class="br0">(</span>map<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> sz <span class="sy0">=</span> map.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			arg0.<span class="me1">writeInt</span><span class="br0">(</span>sz<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">(</span>K k <span class="sy0">:</span> map.<span class="me1">keySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
				arg0.<span class="me1">writeObject</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
				arg0.<span class="me1">writeObject</span><span class="br0">(</span>map.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
			setChanged<span class="br0">(</span><span class="kw2">false</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="br0">}</span>
 
	<span class="br0">}</span>
 
	<span class="kw4">void</span> init<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> N<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			addBlock<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="co3">/**
	 * @param hashValue
	 * @return a bucket number.
	 */</span>
	<span class="kw4">int</span> getDynamicHash<span class="br0">(</span><span class="kw4">int</span> hashValue<span class="br0">)</span> <span class="br0">{</span>
 
		<span class="kw4">long</span> unsignedHash <span class="sy0">=</span> <span class="br0">(</span><span class="br0">(</span><span class="kw4">long</span><span class="br0">)</span> hashValue <span class="sy0">&lt;&lt;</span> <span class="nu0">32</span><span class="br0">)</span> <span class="sy0">&gt;&gt;&gt;</span> <span class="nu0">32</span><span class="sy0">;</span>
		<span class="co1">// ^^ this long cast needed</span>
		<span class="kw4">int</span> h <span class="sy0">=</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span> <span class="br0">(</span>unsignedHash <span class="sy0">%</span> <span class="br0">(</span>N <span class="sy0">&lt;&lt;</span> level<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="co1">// System.err.println("h = " + h);</span>
		<span class="kw1">if</span> <span class="br0">(</span>h <span class="sy0">&lt;</span> split<span class="br0">)</span> <span class="br0">{</span>
 
			h <span class="sy0">=</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span> <span class="br0">(</span>unsignedHash <span class="sy0">%</span> <span class="br0">(</span>N <span class="sy0">&lt;&lt;</span> <span class="br0">(</span>level <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="co1">// System.err.println("h &lt; split, new h = " + h);</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> h<span class="sy0">;</span>
 
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> V put<span class="br0">(</span>K k, V v<span class="br0">)</span> <span class="br0">{</span>
		<span class="sy0">++</span>totalWrites<span class="sy0">;</span>
		<span class="kw4">int</span> h <span class="sy0">=</span> getDynamicHash<span class="br0">(</span>k.<span class="me1">hashCode</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> getBlock<span class="br0">(</span>h<span class="br0">)</span><span class="sy0">;</span>
 
		b.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">return</span> v<span class="sy0">;</span>
 
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw4">long</span> getTotalWrites<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> totalWrites<span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> getBlock<span class="br0">(</span><span class="kw4">int</span> h<span class="br0">)</span> <span class="br0">{</span>
		notifyBlockRequested<span class="br0">(</span>h<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">return</span> blockList.<span class="me1">get</span><span class="br0">(</span>h<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw4">void</span> blockOverflowed<span class="br0">(</span>Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b, K k, V v<span class="br0">)</span> <span class="br0">{</span>
 
		splitNextBucket<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		b.<span class="me1">addOverflowBucket</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		b.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw4">void</span> splitNextBucket<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> getBlock<span class="br0">(</span>split<span class="br0">)</span><span class="sy0">;</span>
		TreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map <span class="sy0">=</span> <span class="kw1">new</span> TreeMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		b.<span class="me1">drainToMap</span><span class="br0">(</span>map<span class="br0">)</span><span class="sy0">;</span>
		addBlock<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">printf</span><span class="br0">(</span><span class="st0">"split N LEVEL  %d %d %d <span class="es0">\n</span>"</span>, split, N, level<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">++</span>split <span class="sy0">&gt;=</span> <span class="br0">(</span>N <span class="sy0">&lt;&lt;</span> level<span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="sy0">++</span>level<span class="sy0">;</span>
 
			split <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
		<span class="kw1">for</span> <span class="br0">(</span>K k <span class="sy0">:</span> map.<span class="me1">keySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
			V v <span class="sy0">=</span> map.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">int</span> h <span class="sy0">=</span> getDynamicHash<span class="br0">(</span>k.<span class="me1">hashCode</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span>h <span class="sy0">+</span> <span class="st0">" "</span><span class="br0">)</span><span class="sy0">;</span>
			Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b2 <span class="sy0">=</span> getBlock<span class="br0">(</span>h<span class="br0">)</span><span class="sy0">;</span>
			b2.<span class="me1">put</span><span class="br0">(</span>k, v<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> addBlock<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> <span class="kw1">new</span> Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="kw1">this</span><span class="br0">)</span><span class="sy0">;</span>
		blockList.<span class="me1">add</span><span class="br0">(</span>b<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">return</span> b<span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">void</span> clear<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		blockList <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		split <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		level <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		totalWrites <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><span class="co1">// savedBlocks = 0;</span>
 
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">boolean</span> containsKey<span class="br0">(</span><span class="kw3">Object</span> key<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> get<span class="br0">(</span>key<span class="br0">)</span> <span class="sy0">!=</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">boolean</span> containsValue<span class="br0">(</span><span class="kw3">Object</span> value<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> values<span class="br0">(</span><span class="br0">)</span>.<span class="me1">contains</span><span class="br0">(</span>value<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Set<span class="sy0">&lt;</span>java.<span class="me1">util</span>.<span class="kw3">Map</span>.<span class="me1">Entry</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> entrySet<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		TreeSet<span class="sy0">&lt;</span><span class="kw3">Map</span>.<span class="me1">Entry</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span> set <span class="sy0">=</span> <span class="kw1">new</span> TreeSet<span class="sy0">&lt;</span><span class="kw3">Map</span>.<span class="me1">Entry</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		Set<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> kk <span class="sy0">=</span> keySet<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span>K k <span class="sy0">:</span> kk<span class="br0">)</span> <span class="br0">{</span>
			<span class="kw1">final</span> K k2 <span class="sy0">=</span> k<span class="sy0">;</span>
			set.<span class="me1">add</span><span class="br0">(</span><span class="kw1">new</span> Entry<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
				@Override
				<span class="kw1">public</span> K getKey<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
					<span class="kw1">return</span> k2<span class="sy0">;</span>
				<span class="br0">}</span>
 
				@Override
				<span class="kw1">public</span> V getValue<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
					<span class="kw1">return</span> get<span class="br0">(</span>k2<span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span>
 
				@Override
				<span class="kw1">public</span> V setValue<span class="br0">(</span>V value<span class="br0">)</span> <span class="br0">{</span>
					<span class="kw1">return</span> put<span class="br0">(</span>k2, value<span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span>
			<span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> set<span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> V get<span class="br0">(</span><span class="kw3">Object</span> key<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw4">int</span> h <span class="sy0">=</span> getDynamicHash<span class="br0">(</span>key.<span class="me1">hashCode</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> getBlock<span class="br0">(</span>h<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">return</span> b.<span class="me1">replace</span><span class="br0">(</span><span class="br0">(</span>K<span class="br0">)</span> key, <span class="kw2">null</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">boolean</span> isEmpty<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> size<span class="br0">(</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Set<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> keySet<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		TreeSet<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> kk <span class="sy0">=</span> <span class="kw1">new</span> TreeSet<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> blockList.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> getBlock<span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
			kk.<span class="me1">addAll</span><span class="br0">(</span>b.<span class="me1">keyList</span><span class="br0">)</span><span class="sy0">;</span>
			Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> ov <span class="sy0">=</span> b.<span class="me1">overflow</span><span class="sy0">;</span>
			<span class="kw1">while</span> <span class="br0">(</span>ov <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				kk.<span class="me1">addAll</span><span class="br0">(</span>ov.<span class="me1">keyList</span><span class="br0">)</span><span class="sy0">;</span>
				ov <span class="sy0">=</span> ov.<span class="me1">overflow</span><span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> kk<span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">void</span> putAll<span class="br0">(</span>Map<span class="sy0">&lt;?</span> <span class="kw1">extends</span> K, <span class="sy0">?</span> <span class="kw1">extends</span> V<span class="sy0">&gt;</span> m<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">for</span> <span class="br0">(</span>K k <span class="sy0">:</span> m.<span class="me1">keySet</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
			put<span class="br0">(</span>k, m.<span class="me1">get</span><span class="br0">(</span>k<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> V remove<span class="br0">(</span><span class="kw3">Object</span> key<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">int</span> size<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw4">long</span> sz <span class="sy0">=</span> longSize<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">return</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span> <span class="br0">(</span>sz <span class="sy0">&gt;</span> <span class="kw3">Integer</span>.<span class="me1">MAX_VALUE</span> <span class="sy0">?</span> <span class="kw3">Integer</span>.<span class="me1">MAX_VALUE</span>
				<span class="sy0">:</span> sz<span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw4">long</span> longSize<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw4">long</span> sz <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span>Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">:</span> blockList<span class="br0">)</span> <span class="br0">{</span>
			Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b1 <span class="sy0">=</span> b<span class="sy0">;</span>
			<span class="kw1">while</span> <span class="br0">(</span>b1 <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				sz <span class="sy0">+=</span> b1.<span class="me1">size</span><span class="sy0">;</span>
				b1 <span class="sy0">=</span> b.<span class="me1">overflow</span><span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> sz<span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> Collection<span class="sy0">&lt;</span>V<span class="sy0">&gt;</span> values<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		ArrayList<span class="sy0">&lt;</span>V<span class="sy0">&gt;</span> list <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		Set<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> kk <span class="sy0">=</span> keySet<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span>K k <span class="sy0">:</span> kk<span class="br0">)</span> <span class="br0">{</span>
			list.<span class="me1">add</span><span class="br0">(</span>get<span class="br0">(</span>k<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw1">return</span> list<span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw4">void</span> showStructure<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> blockList.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
 
			Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> getBlock<span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
			Block<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> ov <span class="sy0">=</span> b.<span class="me1">overflow</span><span class="sy0">;</span>
			<span class="kw4">int</span> k <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
			<span class="kw1">while</span> <span class="br0">(</span>ov <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				ov <span class="sy0">=</span> ov.<span class="me1">overflow</span><span class="sy0">;</span>
				<span class="sy0">++</span>k<span class="sy0">;</span>
			<span class="br0">}</span>
 
			<span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Block "</span> <span class="sy0">+</span> i <span class="sy0">+</span> <span class="st0">" size "</span> <span class="sy0">+</span> b.<span class="me1">keyList</span>.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span>
					<span class="sy0">+</span> <span class="st0">" overflow blocks = "</span> <span class="sy0">+</span> k<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="br0">}</span>
	<span class="br0">}</span>
 
<span class="br0">}</span>
</pre></div>
</div>
<p>Each block is a file in this implementation, because blocks are variably sized here to account for generics and variable sized key and value pairs, and overflow blocks are conceptual, not actual as on disc storage, because the block's contents and that of its overflow bucket(s), are saved as a list of alternating keys and values in this implementation. Methods for saving and loading to Object streams was used in a standard java customized object persistence way by implementing the Externalizable interface in the Block data class.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="java source-java">
<pre class="de1">
<span class="kw1">package</span> <span class="co2">linearhashmap</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">java.io.ByteArrayInputStream</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.ByteArrayOutputStream</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.File</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.FileInputStream</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.FileNotFoundException</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.FileOutputStream</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.IOException</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.ObjectInputStream</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.ObjectOutputStream</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.Serializable</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.ArrayList</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Random</span><span class="sy0">;</span>
<span class="co3">/**
 * This class manages the LHMap2 class block disk swapping, and saves and load an instance of the LHMap2 class.
 * It has been used to externally index a legacy file based database of 100,000  record master table, and 1,000,000 record
 * sized child tables, and accounts for heap space available in the java virtual machine, so that OutOfMemory errors
 * are avoided when the heap space is low by putting blocks back on files, and garbage collecting them.
 * The main performance bottleneck appeared when loading a million record table for an index , on initial creation
 * of the index. 
 * @author doctor
 *
 * @param &lt;K&gt;
 * @param &lt;V&gt;
 */</span>
<span class="kw1">public</span> <span class="kw1">class</span> LHMap2BlockFileManager<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw1">implements</span>
		LHMap2.<span class="me1">BlockListener</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span>, <span class="kw3">Serializable</span> <span class="br0">{</span>
 
	<span class="co3">/**
	 * 
	 */</span>
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">long</span> serialVersionUID <span class="sy0">=</span> 2615265603397988894L<span class="sy0">;</span>
	LHMap2BlockFileManagerData data <span class="sy0">=</span> <span class="kw1">new</span> LHMap2BlockFileManagerData<span class="br0">(</span>
			<span class="kw1">new</span> <span class="kw4">byte</span><span class="br0">[</span><span class="nu0">10000</span><span class="br0">]</span>, <span class="kw1">new</span> <span class="kw3">Random</span><span class="br0">(</span><span class="br0">)</span>, <span class="nu0">0</span>, <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span>, <span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span>
 
	<span class="kw1">public</span> LHMap2BlockFileManager<span class="br0">(</span><span class="kw3">File</span> baseDir, <span class="kw3">String</span> name, <span class="kw4">int</span> maxBlocks,
			<span class="kw4">double</span> unloadRatio<span class="br0">)</span> <span class="br0">{</span>
		data.<span class="me1">home</span> <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">File</span><span class="br0">(</span>baseDir, name<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span>data.<span class="me1">home</span>.<span class="me1">exists</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
			data.<span class="me1">home</span>.<span class="me1">mkdir</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">this</span>.<span class="me1">data</span>.<span class="me1">maxBlocks</span> <span class="sy0">=</span> maxBlocks<span class="sy0">;</span>
		<span class="kw1">this</span>.<span class="me1">data</span>.<span class="me1">unloadRatio</span> <span class="sy0">=</span> unloadRatio<span class="sy0">;</span>
	<span class="br0">}</span>
 
	@Override
	<span class="kw1">public</span> <span class="kw4">void</span> blockRequested<span class="br0">(</span><span class="kw4">int</span> block, LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map<span class="br0">)</span> <span class="br0">{</span>
		LHMap2.<span class="me1">Block</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> map.<span class="me1">blockList</span>.<span class="me1">get</span><span class="br0">(</span>block<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">if</span> <span class="br0">(</span>b <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw4">int</span> tries <span class="sy0">=</span> <span class="nu0">3</span><span class="sy0">;</span>
			<span class="kw3">File</span> f <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">File</span><span class="br0">(</span>data.<span class="me1">home</span>, <span class="kw3">Integer</span>.<span class="me1">toString</span><span class="br0">(</span>block<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">do</span> <span class="br0">{</span>
 
				<span class="kw1">if</span> <span class="br0">(</span>f.<span class="me1">exists</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
					<span class="kw1">break</span><span class="sy0">;</span>
 
				<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span>f.<span class="me1">exists</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
					<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">--</span>tries <span class="sy0">&gt;=</span> <span class="nu0">0</span><span class="br0">)</span>
						fatal<span class="br0">(</span>block<span class="br0">)</span><span class="sy0">;</span>
					<span class="kw1">try</span> <span class="br0">{</span>
 
						<span class="kw3">Thread</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">100</span><span class="br0">)</span><span class="sy0">;</span>
					<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">InterruptedException</span> e<span class="br0">)</span> <span class="br0">{</span>
						e.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
					<span class="br0">}</span>
 
				<span class="br0">}</span>
 
			<span class="br0">}</span> <span class="kw1">while</span> <span class="br0">(</span><span class="kw2">true</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">try</span> <span class="br0">{</span>
				<span class="kw3">ByteArrayInputStream</span> bis <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ByteArrayInputStream</span><span class="br0">(</span>data.<span class="me1">buf</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="kw3">FileInputStream</span> fis <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">FileInputStream</span><span class="br0">(</span>f<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw4">int</span> sz <span class="sy0">=</span> fis.<span class="me1">read</span><span class="br0">(</span>data.<span class="me1">buf</span><span class="br0">)</span><span class="sy0">;</span>
				fis.<span class="me1">close</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				addByteStats<span class="br0">(</span>sz<span class="br0">)</span><span class="sy0">;</span>
				<span class="kw3">ObjectInputStream</span> ois <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ObjectInputStream</span><span class="br0">(</span>bis<span class="br0">)</span><span class="sy0">;</span>
				b <span class="sy0">=</span> <span class="kw1">new</span> LHMap2.<span class="me1">Block</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
				b.<span class="me1">readExternal</span><span class="br0">(</span>ois<span class="br0">)</span><span class="sy0">;</span>
				ois.<span class="me1">close</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				b.<span class="me1">loadFromShadow</span><span class="br0">(</span>map<span class="br0">)</span><span class="sy0">;</span>
 
				map.<span class="me1">blockList</span>.<span class="me1">set</span><span class="br0">(</span>block, b<span class="br0">)</span><span class="sy0">;</span>
				<span class="sy0">--</span>data.<span class="me1">retired</span><span class="sy0">;</span>
 
			<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">FileNotFoundException</span> e<span class="br0">)</span> <span class="br0">{</span>
				e.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				fatal<span class="br0">(</span>block<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">IOException</span> e<span class="br0">)</span> <span class="br0">{</span>
				e.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				fatal<span class="br0">(</span>block<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">ClassNotFoundException</span> e<span class="br0">)</span> <span class="br0">{</span>
				e.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				fatal<span class="br0">(</span>block<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
		<span class="br0">}</span>
		<span class="kw4">int</span> size <span class="sy0">=</span> map.<span class="me1">blockList</span>.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">try</span> <span class="br0">{</span>
			<span class="kw4">long</span> freeMemory <span class="sy0">=</span> <span class="kw3">Runtime</span>.<span class="me1">getRuntime</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">freeMemory</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw4">long</span> limitMemory <span class="sy0">=</span> <span class="br0">(</span><span class="kw4">long</span><span class="br0">)</span> <span class="br0">(</span>data.<span class="me1">avgBlockSize</span> <span class="sy0">*</span> data.<span class="me1">unloadRatio</span> <span class="sy0">*</span> size<span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw1">if</span> <span class="br0">(</span>block <span class="sy0">%</span> <span class="nu0">30</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span>
				<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"free memory ="</span> <span class="sy0">+</span> freeMemory <span class="sy0">+</span> <span class="st0">" limit "</span>
						<span class="sy0">+</span> limitMemory<span class="br0">)</span><span class="sy0">;</span>
 
 
			<span class="kw1">if</span> <span class="br0">(</span>map.<span class="me1">split</span> <span class="sy0">%</span> <span class="nu0">20</span> <span class="sy0">==</span> <span class="nu0">19</span><span class="br0">)</span> <span class="br0">{</span>
				<span class="co1">// this is just to add statistics before really needing to retire</span>
				retireRandomBlock<span class="br0">(</span>map, block<span class="br0">)</span><span class="sy0">;</span>
				<span class="sy0">++</span>data.<span class="me1">retired</span><span class="sy0">;</span>
 
 
			<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>freeMemory <span class="sy0">&lt;</span> limitMemory<span class="br0">)</span> <span class="br0">{</span>
				<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> size <span class="sy0">/</span> <span class="nu0">4</span><span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
					retireRandomBlock<span class="br0">(</span>map, block<span class="br0">)</span><span class="sy0">;</span>
					<span class="sy0">++</span>data.<span class="me1">retired</span><span class="sy0">;</span>
				<span class="br0">}</span>
				<span class="kw3">System</span>.<span class="me1">runFinalization</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="kw3">System</span>.<span class="me1">gc</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
		<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">FileNotFoundException</span> e<span class="br0">)</span> <span class="br0">{</span>
			e.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">IOException</span> e<span class="br0">)</span> <span class="br0">{</span>
			e.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
 
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw4">void</span> addByteStats<span class="br0">(</span><span class="kw4">int</span> sz<span class="br0">)</span> <span class="br0">{</span>
		<span class="sy0">++</span>data.<span class="me1">avgCount</span><span class="sy0">;</span>
		data.<span class="me1">avgBlockSize</span> <span class="sy0">=</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span> <span class="br0">(</span><span class="br0">(</span>data.<span class="me1">avgBlockSize</span>
				<span class="sy0">*</span> <span class="br0">(</span>data.<span class="me1">avgCount</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">+</span> sz<span class="br0">)</span> <span class="sy0">/</span> data.<span class="me1">avgCount</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw4">void</span> retireRandomBlock<span class="br0">(</span>LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map, <span class="kw4">int</span> notThisOne<span class="br0">)</span>
			<span class="kw1">throws</span> <span class="kw3">FileNotFoundException</span>, <span class="kw3">IOException</span> <span class="br0">{</span>
		<span class="kw4">int</span> pick <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		<span class="kw4">int</span> size <span class="sy0">=</span> map.<span class="me1">blockList</span>.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		LHMap2.<span class="me1">Block</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
 
		<span class="kw1">for</span> <span class="br0">(</span>pick <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> pick <span class="sy0">&lt;</span> size
				<span class="sy0">&amp;&amp;</span> <span class="br0">(</span>pick <span class="sy0">==</span> notThisOne <span class="sy0">||</span> <span class="br0">(</span>b <span class="sy0">=</span> map.<span class="me1">blockList</span>.<span class="me1">get</span><span class="br0">(</span>pick<span class="br0">)</span><span class="br0">)</span> <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span><span class="sy0">;</span> <span class="sy0">++</span>pick<span class="br0">)</span>
			<span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">(</span>pick <span class="sy0">&lt;</span> size<span class="br0">)</span>
			retireOneBlock<span class="br0">(</span>map, pick, b<span class="br0">)</span><span class="sy0">;</span>
 
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw4">void</span> retireOneBlock<span class="br0">(</span>LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map, <span class="kw4">int</span> pick, LHMap2.<span class="me1">Block</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b<span class="br0">)</span>
			<span class="kw1">throws</span> <span class="kw3">IOException</span>, <span class="kw3">FileNotFoundException</span> <span class="br0">{</span>
		<span class="kw1">if</span> <span class="br0">(</span>b <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span>
			<span class="kw1">return</span><span class="sy0">;</span>
 
		<span class="kw1">if</span> <span class="br0">(</span>b.<span class="me1">isChanged</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
 
			<span class="co1">// System.err.println("Retiring " + pick);</span>
			<span class="kw3">File</span> f <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">File</span><span class="br0">(</span>data.<span class="me1">home</span>, <span class="kw3">Integer</span>.<span class="me1">toString</span><span class="br0">(</span>pick<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw3">ByteArrayOutputStream</span> bos <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ByteArrayOutputStream</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			<span class="kw3">ObjectOutputStream</span> oos <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ObjectOutputStream</span><span class="br0">(</span>bos<span class="br0">)</span><span class="sy0">;</span>
			b.<span class="me1">writeExternal</span><span class="br0">(</span>oos<span class="br0">)</span><span class="sy0">;</span>
			oos.<span class="me1">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			oos.<span class="me1">close</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw3">FileOutputStream</span> fos <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">FileOutputStream</span><span class="br0">(</span>f<span class="br0">)</span><span class="sy0">;</span>
			<span class="kw4">byte</span><span class="br0">[</span><span class="br0">]</span> bb <span class="sy0">=</span> bos.<span class="me1">toByteArray</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 
			fos.<span class="me1">write</span><span class="br0">(</span>bb<span class="br0">)</span><span class="sy0">;</span>
			fos.<span class="me1">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			fos.<span class="me1">close</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">(</span>bb.<span class="me1">length</span> <span class="sy0">&gt;</span> data.<span class="me1">buf</span>.<span class="me1">length</span><span class="br0">)</span> <span class="br0">{</span>
				data.<span class="me1">buf</span> <span class="sy0">=</span> bb<span class="sy0">;</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
		map.<span class="me1">blockList</span>.<span class="me1">set</span><span class="br0">(</span>pick, <span class="kw2">null</span><span class="br0">)</span><span class="sy0">;</span>
		b <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw4">void</span> fatal<span class="br0">(</span><span class="kw4">int</span> block<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw3">Exception</span> e <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">Exception</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">try</span> <span class="br0">{</span>
			<span class="kw1">throw</span> e<span class="sy0">;</span>
		<span class="br0">}</span> <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">Exception</span> e2<span class="br0">)</span> <span class="br0">{</span>
			e2.<span class="me1">printStackTrace</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"block "</span> <span class="sy0">+</span> block
				<span class="sy0">+</span> <span class="st0">" requested and it is not in blocklist and not a file"</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">:</span> data.<span class="me1">retirees</span><span class="br0">)</span> <span class="br0">{</span>
			<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">print</span><span class="br0">(</span>i <span class="sy0">+</span> <span class="st0">" "</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
		<span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">" were retired"</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw3">System</span>.<span class="me1">exit</span><span class="br0">(</span><span class="sy0">-</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">boolean</span> metaExists<span class="br0">(</span><span class="kw3">File</span> indexDir, <span class="kw3">String</span> name<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw3">File</span> home <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">File</span><span class="br0">(</span>indexDir, name<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">return</span> <span class="kw1">new</span> <span class="kw3">File</span><span class="br0">(</span>home, <span class="st0">"LinearMap2"</span><span class="br0">)</span>.<span class="me1">exists</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> load<span class="br0">(</span><span class="kw3">File</span> baseDir, <span class="kw3">String</span> name<span class="br0">)</span>
			<span class="kw1">throws</span> <span class="kw3">FileNotFoundException</span>, <span class="kw3">IOException</span>, <span class="kw3">ClassNotFoundException</span> <span class="br0">{</span>
		<span class="kw3">File</span> home <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">File</span><span class="br0">(</span>baseDir, name<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw3">File</span> f2 <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">File</span><span class="br0">(</span>home, <span class="st0">"LinearMap2"</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw3">ObjectInputStream</span> ois <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ObjectInputStream</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">FileInputStream</span><span class="br0">(</span>f2<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map <span class="sy0">=</span> <span class="br0">(</span>LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">)</span> ois.<span class="me1">readObject</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		ois.<span class="me1">close</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		loadBlocks<span class="br0">(</span>map<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw1">return</span> map<span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw4">void</span> loadBlocks<span class="br0">(</span>LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map<span class="br0">)</span> <span class="br0">{</span>
		LHMap2BlockFileManager<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> mgr <span class="sy0">=</span> getBlockManagerListener<span class="br0">(</span>map<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw4">int</span> size <span class="sy0">=</span> map.<span class="me1">blockList</span>.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> size<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			mgr.<span class="me1">blockRequested</span><span class="br0">(</span>i, map<span class="br0">)</span><span class="sy0">;</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> LHMap2BlockFileManager<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> getBlockManagerListener<span class="br0">(</span>
			LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> map<span class="br0">)</span> <span class="br0">{</span>
		LHMap2BlockFileManager<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> mgr <span class="sy0">=</span> <span class="br0">(</span>LHMap2BlockFileManager<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span><span class="br0">)</span> map.<span class="me1">listeners</span>
				.<span class="me1">get</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">return</span> mgr<span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> save<span class="br0">(</span><span class="kw3">File</span> indexDir, <span class="kw3">String</span> name,
			LHMap2<span class="sy0">&lt;?</span>, <span class="sy0">?&gt;</span> offsetMap<span class="br0">)</span> <span class="kw1">throws</span> <span class="kw3">FileNotFoundException</span>, <span class="kw3">IOException</span> <span class="br0">{</span>
		retireAllBlocks<span class="br0">(</span>offsetMap<span class="br0">)</span><span class="sy0">;</span>
 
		<span class="kw3">File</span> home <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">File</span><span class="br0">(</span>indexDir, name<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw3">File</span> f2 <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">File</span><span class="br0">(</span>home, <span class="st0">"LinearMap2"</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw3">ObjectOutputStream</span> oos <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ObjectOutputStream</span><span class="br0">(</span>
				<span class="kw1">new</span> <span class="kw3">FileOutputStream</span><span class="br0">(</span>f2<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
		oos.<span class="me1">writeObject</span><span class="br0">(</span>offsetMap<span class="br0">)</span><span class="sy0">;</span>
		oos.<span class="me1">close</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
	<span class="br0">}</span>
 
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw4">void</span> retireAllBlocks<span class="br0">(</span>LHMap2<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> offsetMap<span class="br0">)</span>
			<span class="kw1">throws</span> <span class="kw3">FileNotFoundException</span>, <span class="kw3">IOException</span> <span class="br0">{</span>
		LHMap2BlockFileManager<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> mgr <span class="sy0">=</span> getBlockManagerListener<span class="br0">(</span>offsetMap<span class="br0">)</span><span class="sy0">;</span>
		<span class="kw4">int</span> sz <span class="sy0">=</span> offsetMap.<span class="me1">blockList</span>.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> sz<span class="sy0">;</span> <span class="sy0">++</span>i<span class="br0">)</span> <span class="br0">{</span>
			LHMap2.<span class="me1">Block</span><span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> b <span class="sy0">=</span> offsetMap.<span class="me1">blockList</span>.<span class="me1">get</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
			<span class="co1">// offsetMap.blockList.set(i, null); // mark for reloading as block</span>
			<span class="co1">// destroyed after writing</span>
			<span class="kw1">if</span> <span class="br0">(</span>b <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
				mgr.<span class="me1">retireOneBlock</span><span class="br0">(</span>offsetMap, i, b<span class="br0">)</span><span class="sy0">;</span>
			<span class="br0">}</span>
 
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="java source-java">
<pre class="de1">
<span class="kw1">package</span> <span class="co2">linearhashmap</span><span class="sy0">;</span>
 
<span class="kw1">import</span> <span class="co2">java.io.File</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.io.Serializable</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.List</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Random</span><span class="sy0">;</span>
 
<span class="kw1">public</span> <span class="kw1">class</span> LHMap2BlockFileManagerData <span class="kw1">implements</span>  <span class="kw3">Serializable</span><span class="br0">{</span>
	<span class="co3">/**
	 * 
	 */</span>
	<span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">long</span> serialVersionUID <span class="sy0">=</span> 1L<span class="sy0">;</span>
	<span class="kw1">public</span> <span class="kw4">byte</span><span class="br0">[</span><span class="br0">]</span> buf<span class="sy0">;</span>
	<span class="kw1">public</span> <span class="kw3">Random</span> r<span class="sy0">;</span>
	<span class="kw1">public</span> <span class="kw3">File</span> baseDir<span class="sy0">;</span>
	<span class="kw1">public</span> <span class="kw3">File</span> home<span class="sy0">;</span>
	<span class="kw1">public</span> <span class="kw4">int</span> maxBlocks<span class="sy0">;</span>
	<span class="kw1">public</span> <span class="kw4">int</span> retired<span class="sy0">;</span>
	<span class="kw1">public</span> <span class="kw4">double</span> unloadRatio<span class="sy0">;</span>
	<span class="kw1">public</span> List<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> retirees<span class="sy0">;</span>
	<span class="kw1">public</span> <span class="kw4">int</span> avgBlockSize<span class="sy0">;</span>
	<span class="kw1">public</span> <span class="kw4">long</span> avgCount<span class="sy0">;</span>
 
	<span class="kw1">public</span> LHMap2BlockFileManagerData<span class="br0">(</span><span class="kw4">byte</span><span class="br0">[</span><span class="br0">]</span> buf, <span class="kw3">Random</span> r, <span class="kw4">int</span> retired,
			List<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> retirees, <span class="kw4">long</span> avgCount<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw1">this</span>.<span class="me1">buf</span> <span class="sy0">=</span> buf<span class="sy0">;</span>
		<span class="kw1">this</span>.<span class="me1">r</span> <span class="sy0">=</span> r<span class="sy0">;</span>
		<span class="kw1">this</span>.<span class="me1">retired</span> <span class="sy0">=</span> retired<span class="sy0">;</span>
		<span class="kw1">this</span>.<span class="me1">retirees</span> <span class="sy0">=</span> retirees<span class="sy0">;</span>
		<span class="kw1">this</span>.<span class="me1">avgCount</span> <span class="sy0">=</span> avgCount<span class="sy0">;</span>
	<span class="br0">}</span>
 
 
<span class="br0">}</span>
</pre></div>
</div>
<hr />
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<p><br />
A mathematical set has a fairly simple interface and can be implemented in a surprising number of ways.</p>
<div class="interface" style="background-color: #FFFFEE; border: solid 1px #FFC92E; padding: 1em; width:80%" title="Set&lt;item-type&gt; ADT">
<p><b><code>Set&lt;item-type&gt;</code> ADT</b></p>
<dl>
<dt style="font-weight:normal"><code><b>contains</b>(<var>test-item</var>:item-type):Boolean</code></dt>
<dd>True if <var>test-item</var> is contained in the Set.</dd>
<dt style="font-weight:normal"><code><b>insert</b>(<var>new-item</var>:item-type)</code></dt>
<dd>Adds <var>new-item</var> into the set.</dd>
<dt style="font-weight:normal"><code><b>remove</b>(<var>item</var>:item-type)</code></dt>
<dd>Removes <var>item</var> from the set. If <var>item</var> wasn't in the set, this method does nothing.</dd>
<dt style="font-weight:normal"><code><b>remove</b>(<var>item-iter</var>:List Iterator&lt;item-type&gt;)</code></dt>
<dd>Removes the item referred to by <var>item-iter</var> from the set.</dd>
<dt style="font-weight:normal"><code><b>get-begin</b>():List Iterator&lt;item-type&gt;</code></dt>
<dd>Allows iteration over the elements in the Set.</dd>
<dt style="font-weight:normal"><code><b>get-end</b>():List Iterator&lt;item-type&gt;</code></dt>
<dd>Also allows iteration over the elements in the Set.</dd>
<dt style="font-weight:normal"><code><b>union</b>(<var>other</var>:Set&lt;item-type&gt;):Set&lt;item-type&gt;</code></dt>
<dd>Returns a set containing all elements in either this or the <var>other</var> set. Has a default implementation.</dd>
<dt style="font-weight:normal"><code><b>intersect</b>(<var>other</var>:Set&lt;item-type&gt;):Set&lt;item-type&gt;</code></dt>
<dd>Returns a set containing all elements in both this and the <var>other</var> set. Has a default implementation.</dd>
<dt style="font-weight:normal"><code><b>subtract</b>(<var>other</var>:Set&lt;item-type&gt;):Set&lt;item-type&gt;</code></dt>
<dd>Returns a set containing all elements in this but not the <var>other</var> set. Has a default implementation.</dd>
<dt style="font-weight:normal"><code><b>is-empty</b>():Boolean</code></dt>
<dd>True if no more items can be popped and there is no top item.</dd>
<dt style="font-weight:normal"><code><b>get-size</b>():Integer</code></dt>
<dd>Returns the number of elements in the set.</dd>
</dl>
<p>All operations can be performed in <img class="mwe-math-fallback-image-inline tex" alt="O(N)" src="//upload.wikimedia.org/math/3/3/6/33697ce7dfa48ba80980d298c8089378.png" /> time.</p>
</div>
<h2><span class="mw-headline" id="List_implementation">List implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Sets&amp;action=edit&amp;section=T-1" title="Data Structures/Sets">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>There are several different ways to implement sets. The simplest, but in most cases least efficient, method is to simply create a linear list (an array, linked list or similar structure) containing each of the elements in the set. For the most basic operation, testing membership, a possible implementation could look like</p>
<pre>
<b>function</b> <i>contains</i>(<b>List</b>&lt;<b>T</b>&gt; list, <b>T</b> member)
    <b>for</b> item <b>in</b> list
        <b>if</b> item == member
            <b>return</b> True
    <b>return</b> False
</pre>
<p>To add new members to this set, simply add the element to beginning or end of the list. (If a check is done to ensure no duplicate elements, some other operations may be simpler.) Other operations can be similarly implemented in terms of simple list operations. Unfortunately, the membership test has a worst-case running time of <img class="mwe-math-fallback-image-inline tex" alt="O(n)" src="//upload.wikimedia.org/math/7/b/a/7ba55e7c64a9405a0b39a1107e90ca94.png" /> if the item is not in the list, and even an average-case time of the same, assuming the item is equally likely to be anywhere in the list. If the set is small, or if frequently accessed items can be placed near the front of the list, this may be an efficient solution, but other options can have a faster running time.</p>
<p>Assuming elements can be ordered and insertions and deletions are rare, a list guaranteed to be in sorted order with no duplicate elements can be much more efficient. Using an ordered list, the membership test can be efficient to the order of <img class="mwe-math-fallback-image-inline tex" alt="O(log n)" src="//upload.wikimedia.org/math/6/0/d/60d4554fc1d20efd2fe270a75f50433e.png" />. Additionally, union, intersection and subtraction can be implemented in linear time, whereas they would take quadratic time with unordered lists.</p>
<h2><span class="mw-headline" id="Bit_array_implementation">Bit array implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Sets&amp;action=edit&amp;section=T-2" title="Data Structures/Sets">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>For certain data, it may be more practical to maintain a bit array describing the contents of the set. In this representation, there is a 1 or 0 corresponding to each element of the problem domain, specifying whether the object is an element of the set. For a simple case, assume that only integers from 0 to n can be members of the set, where n is known beforehand. This can be represented by a bit array of length n+1. The <i>contains</i> operation is simple:</p>
<pre>
<b>function</b> <i>contains</i>(<b>BitArray</b> array, <b>Int</b> member)
    <b>if</b> member &gt;= <i>length</i>(array)
       <b>return</b> False
    <b>else if</b> array[member] == 1
       <b>return</b> True
    <b>else</b>
       <b>return</b> False
</pre>
<p>To add or remove an element from this sort of set, simply modify the bit array to reflect whether that index should be 1 or 0. The membership runs in exactly <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> (constant) time, but it has a severely restricted domain. It is possible to shift the domain, going from m to n with step k, rather than 0 to n with step 1 as is specified above, but there is not much flexibility possible here. Nevertheless, for the right domain, this is often the most efficient solution.</p>
<h2><span class="mw-headline" id="Associative_array_implementation">Associative array implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/Sets&amp;action=edit&amp;section=T-3" title="Data Structures/Sets">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Associative arrays--that is, hash tables and binary search trees, represent a heavyweight but general representation of sets. Binary trees generally have <img class="mwe-math-fallback-image-inline tex" alt="O(log n)" src="//upload.wikimedia.org/math/6/0/d/60d4554fc1d20efd2fe270a75f50433e.png" /> time implementations for lookup and mutation for a particular key, and hash tables have a <img class="mwe-math-fallback-image-inline tex" alt="O(1)" src="//upload.wikimedia.org/math/5/e/0/5e079a28737d5dd019a3b8f6133ee55e.png" /> implementation (though there is a higher constant factor). Additionally, they are capable of storing nearly any key type. The membership test is trivial: simply test if the potential set member exists as a key in the associative array. To add an element, just add the set member as a key in the associative array, with a dummy value. In optimized implementations, instead of reusing an existing associative array implementation, it is possible to write a specialized hash table or binary tree which does not store values corresponding to keys. Values are not meaningful here, and they take up a constant factor of additional memory space.</p>
<p><br /></p>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<p><br />
Hashtables use a lot of memory but can be very fast searches, in linear time.</p>
<p>In general you should use the data structure that best fits what you want to do, rather than trying to find the most efficient way.</p>
<pre>
 [TODO:]
 Use asymptotic behaviour to decide, most importantly seeing how the
 structure will be <i>used</i>: an infrequent operation does not need to be
 fast if it means everything else will be much faster
</pre>
<p><br /></p>
<pre>
 [TODO:]
 Can use a table like this one to compare the asymptotic behaviour of every
 structure for every operation on it.
</pre>
<p>Sequences (aka lists):</p>
<table border="1">
<tr>
<td></td>
<td>Dynamic Array</td>
<td>Array Deque</td>
<td>Singly Linked List</td>
<td>Double Linked List</td>
</tr>
<tr>
<td>Push (Front)</td>
<td>O(n)</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr>
<td>Pop (Front)</td>
<td>O(n)</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr>
<td>Push (Back)</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(n), maybe O(1)*</td>
<td>O(1)</td>
</tr>
<tr>
<td>Pop (Back)</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
<tr>
<td>Insert before (given iterator)</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
<tr>
<td>Delete (given iterator)</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
<tr>
<td>Insert after (given iterator)</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr>
<td>Delete after (given iterator)</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr>
<td>Get nth element (random access)</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(n)</td>
<td>O(n)</td>
</tr>
<tr>
<td>Good for implementing stacks</td>
<td>yes (back is top)</td>
<td>yes</td>
<td>yes (front is top)</td>
<td>yes</td>
</tr>
<tr>
<td>Good for implementing queues</td>
<td>no</td>
<td>yes</td>
<td>maybe*</td>
<td>yes</td>
</tr>
<tr>
<td>C++ STL</td>
<td><code>std::vector</code></td>
<td><code>std::deque</code></td>
<td>-</td>
<td><code>std::list</code></td>
</tr>
<tr>
<td>Java Collections</td>
<td><code>java.util.ArrayList</code></td>
<td><code>java.util.ArrayDeque</code></td>
<td>-</td>
<td><code>java.util.LinkedList</code></td>
</tr>
</table>
<pre>
* singly-linked lists can push to the back in O(1) with the modification that you keep a pointer to the last node
</pre>
<p><br />
Associative containers (sets, associative arrays):</p>
<table border="1">
<tr>
<td></td>
<td>Sorted Array</td>
<td>Sorted Linked List</td>
<td>Self-balancing Binary Search Tree</td>
<td>Hash Table</td>
</tr>
<tr>
<td>Find key</td>
<td>O(log n)</td>
<td>O(n)</td>
<td>O(log n)</td>
<td>O(1) average O(n) worst</td>
</tr>
<tr>
<td>Insert element</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(log n)</td>
<td>O(1) average O(n) worst</td>
</tr>
<tr>
<td>Erase key</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(log n)</td>
<td>O(1) average O(n) worst</td>
</tr>
<tr>
<td>Erase element (given iterator)</td>
<td>O(n)</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr>
<td>Can traverse in sorted order?</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>Needs</td>
<td>comparison function</td>
<td>comparison function</td>
<td>comparison function</td>
<td>hash function</td>
</tr>
<tr>
<td>C++ STL</td>
<td>-</td>
<td>-</td>
<td><code>std::set</code><br />
<p><code>std::map</code><br />
<code>std::multiset</code><br />
<code>std::multimap</code></p>
</td>
<td><code>__gnu_cxx::hash_set</code><br />
<p><code>__gnu_cxx::hash_map</code><br />
<code>__gnu_cxx::hash_multiset</code><br />
<code>__gnu_cxx::hash_multimap</code></p>
</td>
</tr>
<tr>
<td>Java Collections</td>
<td>-</td>
<td>-</td>
<td><code>java.util.TreeSet</code><br />
<p><code>java.util.TreeMap</code></p>
</td>
<td><code>java.util.HashSet</code><br />
<p><code>java.util.HashMap</code></p>
</td>
</tr>
</table>
<ul>
<li>Please correct any errors</li>
</ul>
<p>Various Types of Trees</p>
<table border="1">
<tr>
<td></td>
<td>Binary Search</td>
<td>AVL Tree</td>
<td>Binary Heap (min)</td>
<td>Binomial Queue (min)</td>
</tr>
<tr>
<td>Insert element</td>
<td>O(log n)</td>
<td>O(log n)</td>
<td>O(log n)</td>
<td>O(1) (on average)</td>
</tr>
<tr>
<td>Erase element</td>
<td>O(log n)</td>
<td>O(log n)</td>
<td>unavailable</td>
<td>unavailable</td>
</tr>
<tr>
<td>Delete min element</td>
<td>O(log n)</td>
<td>O(log n)</td>
<td>O(log n)</td>
<td>O(log n)</td>
</tr>
<tr>
<td>Find min element</td>
<td>O(log n)</td>
<td>O(log n)</td>
<td>O(1)</td>
<td>O(log n) (can be O(1) if ptr to smallest)</td>
</tr>
<tr>
<td>Increase key</td>
<td>unavailable</td>
<td>unavailable</td>
<td>O(log n)</td>
<td>O(log n)</td>
</tr>
<tr>
<td>Decrease key</td>
<td>unavailable</td>
<td>unavailable</td>
<td>O(log n)</td>
<td>O(log n)</td>
</tr>
<tr>
<td>Find</td>
<td>O(log n)</td>
<td>O(log n)</td>
<td>unavailable</td>
<td>unavailable</td>
</tr>
<tr>
<td>Delete element</td>
<td>O(log n)</td>
<td>O(log n)</td>
<td>unavailable</td>
<td>unavailable</td>
</tr>
<tr>
<td>Create</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr>
<td>find kth smallest</td>
<td>O(log n)</td>
<td>O(log n)</td>
<td>O((k-1)*log n)</td>
<td>O(k*log n)</td>
</tr>
</table>
<p><br /></p>
<pre>
 [TODO:]
 Can also add a table that specifies the best structure for some specific need
 e.g. For queues, double linked. For stacks, single linked. For sets, hash tables. etc...
</pre>
<pre>
 [TODO:]
 Could also contain table with space complexity information (there is a significative cost
 in using hashtables or lists implemented via arrays, for example).
</pre>
<p><br /></p>
<div style="width:60%; margin:0.5em auto; text-align:center; border:1px solid #003365; background:#E8FFE8; font-size:95%; white-space:nowrap;">
<p><b><a href="/wiki/Data_Structures" title="Data Structures">Data Structures</a></b><br />
<a href="/wiki/Data_Structures/Introduction" title="Data Structures/Introduction">Introduction</a> - <a href="/wiki/Data_Structures/Asymptotic_Notation" title="Data Structures/Asymptotic Notation">Asymptotic Notation</a> - <a href="/wiki/Data_Structures/Arrays" title="Data Structures/Arrays">Arrays</a> - <a href="/wiki/Data_Structures/List_Structures" title="Data Structures/List Structures">List Structures &amp; Iterators</a><br />
<a href="/wiki/Data_Structures/Stacks_and_Queues" title="Data Structures/Stacks and Queues">Stacks &amp; Queues</a> - <a href="/wiki/Data_Structures/Trees" title="Data Structures/Trees">Trees</a> - <a href="/wiki/Data_Structures/Min_and_Max_Heaps" title="Data Structures/Min and Max Heaps">Min &amp; Max Heaps</a> - <a href="/wiki/Data_Structures/Graphs" title="Data Structures/Graphs">Graphs</a><br />
<a href="/wiki/Data_Structures/Hash_Tables" title="Data Structures/Hash Tables">Hash Tables</a> - <a href="/wiki/Data_Structures/Sets" title="Data Structures/Sets">Sets</a> - <a href="/wiki/Data_Structures/Tradeoffs" title="Data Structures/Tradeoffs">Tradeoffs</a></p>
</div>
<h2><span class="mw-headline" id="References_3">References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Data_Structures/All_Chapters&amp;action=edit&amp;section=1" title="Edit section: References">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="reflist references" style="">
<ol class="references">
<li id="cite_note-4"><span class="mw-cite-backlink"><a href="#cite_ref-4">â†‘</a></span> <span class="reference-text"><a href="//en.wikipedia.org/wiki/Comparison_of_programming_languages_(mapping)" class="extiw" title="wikipedia:Comparison of programming languages (mapping)">Wikipedia: Comparison of programming languages (mapping)</a> shows how many programming languages provide hash table functionality.</span></li>
</ol>
</div>


<!-- 
NewPP limit report
Parsed by mw1012
CPU time usage: 1.183 seconds
Real time usage: 1.711 seconds
Preprocessor visited node count: 3046/1000000
Preprocessor generated node count: 0/1500000
Postâ€expand include size: 262233/2097152 bytes
Template argument size: 5732/2097152 bytes
Highest expansion depth: 14/40
Expensive parser function count: 0/500
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  979.234      1 - -total
 17.68%  173.162      1 - Data_Structures/Introduction
 17.03%  166.743      1 - Data_Structures/Stacks_and_Queues
 14.49%  141.869      1 - Data_Structures/Trees
 13.33%  130.516      1 - Data_Structures/Hash_Tables
 12.01%  117.624      1 - Data_Structures/Graphs
  7.86%   76.947      2 - Template:Reflist
  6.66%   65.265      1 - Data_Structures/Asymptotic_Notation
  6.49%   63.527      1 - Data_Structures/List_Structures
  6.28%   61.509      2 - Template:Cite_book
-->

<!-- Saved in parser cache with key enwikibooks:pcache:idhash:20101-0!*!0!!en!4!*!math=0 and timestamp 20150228010410 and revision id 2758853
 -->
<noscript><img src="//en.wikibooks.org/wiki/Special:CentralAutoLogin/start?type=1x1" alt="" title="" width="1" height="1" style="border: none; position: absolute;" /></noscript></div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="http://en.wikibooks.org/w/index.php?title=Data_Structures/All_Chapters&amp;oldid=2758853">http://en.wikibooks.org/w/index.php?title=Data_Structures/All_Chapters&amp;oldid=2758853</a>"					</div>
													<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/wiki/Category:Data_Structures" title="Category:Data Structures">Data Structures</a></li></ul></div><div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul><li><a href="/wiki/Category:Pages_needing_attention" title="Category:Pages needing attention">Pages needing attention</a></li><li><a href="/wiki/Category:Pages_with_broken_file_links" title="Category:Pages with broken file links">Pages with broken file links</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-createaccount"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Data+Structures%2FAll+Chapters&amp;returntoquery=amp%253Baction%3Dedit&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Data+Structures%2FAll+Chapters&amp;returntoquery=amp%253Baction%3Dedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="/wiki/Data_Structures/All_Chapters"  title="View the content page [c]" accesskey="c">Book</a></span></li>
															<li  id="ca-talk" class="new"><span><a href="/w/index.php?title=Talk:Data_Structures/All_Chapters&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="/wiki/Data_Structures/All_Chapters" >Read</a></span></li>
															<li id="ca-edit"><span><a href="/w/index.php?title=Data_Structures/All_Chapters&amp;action=edit"  title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="/w/index.php?title=Data_Structures/All_Chapters&amp;action=history"  title="Past revisions of this page [h]" accesskey="h" rel="archives">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="/w/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Wikibooks [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="/wiki/Main_Page"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-Navigation' aria-labelledby='p-Navigation-label'>
			<h3 id='p-Navigation-label'>Navigation</h3>

			<div class="body">
									<ul>
													<li id="n-mainpage"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
													<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="Find help on how to use and edit Wikibooks">Help</a></li>
													<li id="n-Browse"><a href="/wiki/Wikibooks:Card_Catalog_Office" title="Check out what Wikibooks has to offer">Browse wiki</a></li>
													<li id="n-Cookbook"><a href="/wiki/Cookbook:Table_of_Contents" title="Learn recipes from around the world">Cookbook</a></li>
													<li id="n-Wikijunior"><a href="/wiki/Wikijunior" title="Books for children">Wikijunior</a></li>
													<li id="n-Featured-books"><a href="/wiki/Wikibooks:Featured_books" title="The best of Wikibooks">Featured books</a></li>
													<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
													<li id="n-sitesupport"><a href="//donate.wikimedia.org/wiki/Special:FundraiserRedirector?utm_source=donate&amp;utm_medium=sidebar&amp;utm_campaign=C13_en.wikibooks.org&amp;uselang=en" title="Support Wikibooks">Donations</a></li>
													<li id="n-randomrootpage"><a href="/wiki/Special:RandomRootpage">Random book</a></li>
													<li id="n-Using-Wikibooks"><a href="/wiki/Using_Wikibooks">Using Wikibooks</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Community' aria-labelledby='p-Community-label'>
			<h3 id='p-Community-label'>Community</h3>

			<div class="body">
									<ul>
													<li id="n-Reading-room"><a href="/wiki/Wikibooks:Reading_room" title="Discuss Wikibooks-related questions and concerns with others">Reading room</a></li>
													<li id="n-portal"><a href="/wiki/Wikibooks:Community_Portal" title="Find your way around the Wikibooks community">Community portal</a></li>
													<li id="n-currentevents"><a href="/wiki/Wikibooks:Reading_room/Bulletin_Board" title="Important community news">Bulletin Board</a></li>
													<li id="n-maintenance"><a href="/wiki/Wikibooks:Maintenance" title="Frequent tasks that you can help with">Help out!</a></li>
													<li id="n-Policies-and-guidelines"><a href="/wiki/Wikibooks:Policies_and_guidelines" title="Pages detailing important rules and procedures">Policies and guidelines</a></li>
													<li id="n-contact"><a href="/wiki/Wikibooks:Contact_us" title="Alternative methods of communication">Contact us</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Data_Structures/All_Chapters" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Data_Structures/All_Chapters" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-upload"><a href="//commons.wikimedia.org/wiki/Special:UploadWizard" title="Upload files [u]" accesskey="u">Upload file</a></li>
													<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-permalink"><a href="/w/index.php?title=Data_Structures/All_Chapters&amp;oldid=2758853" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="/w/index.php?title=Data_Structures/All_Chapters&amp;action=info" title="More information about this page">Page information</a></li>
						<li id="t-cite"><a href="/w/index.php?title=Special:CiteThisPage&amp;page=Data_Structures%2FAll_Chapters&amp;id=2758853" title="Information on how to cite this page">Cite this page</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-lang' aria-labelledby='p-lang-label'>
			<h3 id='p-lang-label'>In other languages</h3>

			<div class="body">
									<ul>
													<li class="uls-p-lang-dummy"><a href="#"></a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Sister_projects' aria-labelledby='p-Sister_projects-label'>
			<h3 id='p-Sister_projects-label'>Sister projects</h3>

			<div class="body">
									<ul>
													<li id="n-Wikipedia"><a href="//en.wikipedia.org/wiki/Main_Page">Wikipedia</a></li>
													<li id="n-Wikiversity"><a href="//en.wikiversity.org/wiki/Wikiversity:Main_Page">Wikiversity</a></li>
													<li id="n-Wiktionary"><a href="//en.wiktionary.org/wiki/Wiktionary:Main_Page">Wiktionary</a></li>
													<li id="n-Wikiquote"><a href="//en.wikiquote.org/wiki/Main_Page">Wikiquote</a></li>
													<li id="n-Wikisource"><a href="//en.wikisource.org/wiki/Main_Page">Wikisource</a></li>
													<li id="n-Wikinews"><a href="//en.wikinews.org/wiki/Main_Page">Wikinews</a></li>
													<li id="n-Wikivoyage"><a href="//en.wikivoyage.org/wiki/Main_Page">Wikivoyage</a></li>
													<li id="n-Commons"><a href="//commons.wikimedia.org/wiki/Main_Page">Commons</a></li>
													<li id="n-Wikidata"><a href="//www.wikidata.org/wiki/Wikidata:Main_Page">Wikidata</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-coll-print_export' aria-labelledby='p-coll-print_export-label'>
			<h3 id='p-coll-print_export-label'>Print/export</h3>

			<div class="body">
									<ul>
													<li id="coll-create_a_book"><a href="/w/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=Data+Structures%2FAll+Chapters">Create a collection</a></li>
													<li id="coll-download-as-rdf2latex"><a href="/w/index.php?title=Special:Book&amp;bookcmd=render_article&amp;arttitle=Data+Structures%2FAll+Chapters&amp;oldid=2758853&amp;writer=rdf2latex">Download as PDF</a></li>
													<li id="t-print"><a href="/w/index.php?title=Data_Structures/All_Chapters&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 26 January 2015, at 00:00.</li>
											<li id="footer-info-copyright">Text is available under the <a href="//creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike License.</a>; additional terms may apply.  By using this site, you agree to the <a href="//wikimediafoundation.org/wiki/Terms_of_Use">Terms of Use</a> and <a href="//wikimediafoundation.org/wiki/Privacy_policy">Privacy Policy.</a></li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="//wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/wiki/Wikibooks:Welcome" title="Wikibooks:Welcome">About Wikibooks</a></li>
											<li id="footer-places-disclaimer"><a href="/wiki/Wikibooks:General_disclaimer" title="Wikibooks:General disclaimer">Disclaimers</a></li>
											<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute">Developers</a></li>
											<li id="footer-places-mobileview"><a href="//en.m.wikibooks.org/w/index.php?title=Data_Structures/All_Chapters&amp;amp%3Baction=edit&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="//wikimediafoundation.org/"><img src="//bits.wikimedia.org/images/wikimedia-button.png" srcset="//bits.wikimedia.org/images/wikimedia-button-1.5x.png 1.5x, //bits.wikimedia.org/images/wikimedia-button-2x.png 2x" width="88" height="31" alt="Wikimedia Foundation"/></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="//www.mediawiki.org/"><img src="//bits.wikimedia.org/static-1.25wmf19/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="//bits.wikimedia.org/static-1.25wmf19/resources/assets/poweredby_mediawiki_132x47.png 1.5x, //bits.wikimedia.org/static-1.25wmf19/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"ext.globalCssJs.site":"ready","ext.globalCssJs.user":"ready","site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["ext.cite","mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.gadget.extlinks","ext.gadget.mySandbox","mmv.bootstrap.autostart","ext.imageMetrics.loader","ext.eventLogging.subscriber","ext.wikimediaEvents.statsd","ext.navigationTiming","schema.UniversalLanguageSelector","ext.uls.eventlogger","ext.uls.interlanguage","ext.flaggedRevs.advanced"],null,true);
}</script>
<script src="/w/index.php?title=MediaWiki:Gadget-commons-file.js&amp;action=raw&amp;ctype=text/javascript&amp;2172780"></script>
<script src="/w/index.php?title=MediaWiki:Gadget-toolboxcompat.js&amp;action=raw&amp;ctype=text/javascript&amp;2161931"></script>
<script>if(window.mw){
document.write("\u003Cscript src=\"//bits.wikimedia.org/en.wikibooks.org/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":127,"wgHostname":"mw1256"});
}</script>
	</body>
</html>
